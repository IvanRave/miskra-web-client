"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t=function(e,t,r,a){t.enabled(!0),r.debugInfoEnabled(!0),e.disableAutoScrolling(),a.setPrefix("ppa").setStorageType("localStorage")};e.module("myApp.appConfig",["LocalStorageModule","myApp.templateFactory","myApp.readiness","myApp.lgr","ngSanitize"]).config(["$anchorScrollProvider","$sceProvider","$compileProvider","localStorageServiceProvider",t])}(window.angular),function(e){var t=function(){};e.module("myApp.AppController",["myApp.appFilters"]).controller("AppController",[t])}(window.angular),function(e,t,r){function a(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host,hostname:t.hostname,port:t.port,pathname:t.pathname,protocol:t.protocol,hash:t.hash,search:t.search}}function i(e){var t=a(e);return t.pathname+(t.search||"")+(t.hash||"")}var n=function(e,t){var a=function(e,a,n){n===a?t.url=null:t.url=n,r.trackPage(i(a))};e.$on("$locationChangeSuccess",a)};e.module("myApp",["ngAria","ngSanitize","myApp.appConfig","myApp.routeConfig","myApp.analyticsOn","myApp.statePrev"]).run(["$rootScope","statePrev",n]);var s=function(){console.log("waitWhileInit..."),t.waitWhileInit(function(t){if(t)return void alert(t.message);window.APPCONF.XUID||console.warn("XUID"),window.APPCONF.XSID||console.warn("XSID");var r=document.getElementsByClassName("start-loader");r[0]&&(r[0].style.display="none"),e.bootstrap(document,["myApp"],{strictDi:!0})})};console.log("starting..."),e.element(document).ready(function(){window.cordova?(console.log("cordova initialized"),document.addEventListener("deviceready",s,!1)):s()})}(window.angular,window.snns,window.LYTIC),function(e){var t=["ui.router","myApp.mngrRouter","myApp.WlcController","myApp.AggloItemController","myApp.AggloListController","myApp.specListDrct","myApp.rubricListDrct","myApp.aggloListDrct","myApp.mediaItemDrct","myApp.breadcrumbDrct","myApp.appFooter","myApp.appToolbar","myApp.AppMapController","myApp.SpecItemController","myApp.RubricItemController","myApp.TblViewController","myApp.PrtfViewController","myApp.OfferListController","myApp.SplrLoginController","myApp.SplrItemController","myApp.SplrMainController","myApp.SplrManagerController","myApp.userStatusDrct","myApp.AppController","myApp.OauthLoginController","myApp.QuizItemController","myApp.qstnListDrct","myApp.lgr"],r=function(e,t,r,a){r.html5Mode(!0).hashPrefix("!");var i="",n="/";t.state("byt",{url:i,"abstract":!0,views:{mainContent:{templateUrl:"app.tpl.html",controller:"AppController",controllerAs:"crApp"}}}).state("byt.welcome",{url:n,views:{appContent:{templateUrl:"welcome/wlc.tpl.html",controller:"WlcController"}}}).state("byt.map",{url:"/map?{ll:string}&{z:int}&{g:string}&{spec:string}",views:{appContent:{templateUrl:"app-map/app-map.tpl.html",controller:"AppMapController"}},resolve:{q_ll:["$stateParams",function(e){return e.ll}],q_z:["$stateParams",function(e){return e.z}],q_g:["$stateParams",function(e){return e.g}],q_spec:["$stateParams",function(e){return e.spec}]}}).state("byt.mediaItem",{url:"/media/{media_id:int}",views:{appContent:{template:'<div class="full-height" ng-if="media_id">\n<div class="full-height" data-media-item-drct data-media-id="{{media_id}}">\n</div>\n</div>',controller:["$scope","lgr","media_id",function(e,t,r){r?e.media_id=r:t.crit("errMediaItem","no media id")}]}},resolve:{media_id:["$stateParams",function(e){return e.media_id}]}}).state("byt.quizItem",{url:"/q/{quiz_ttl:string}","abstract":!0,views:{appContent:{templateUrl:"quiz-item/quiz-item.tpl.html",controller:"QuizItemController"}},resolve:{quiz_ttl:["$stateParams",function(e){return e.quiz_ttl}]}}).state("byt.quizItem.qstnList",{url:"/",views:{quizContent:{template:'<div qstn-list-drct data-quiz-item="quizItem"></div>'}}}).state("byt.aggloList",{url:"/города",views:{appContent:{templateUrl:"agglo-list/agglo-list.tpl.html",controller:"AggloListController"}}}).state("byt.aggloItem",{url:"/города/:agglo_local_name","abstract":!0,views:{appContent:{templateUrl:"agglo-item/agglo-item.tpl.html",controller:"AggloItemController"}},resolve:{q_agglo_local_name:["$stateParams",function(e){return e.agglo_local_name}]}}).state("byt.aggloItem.specList",{url:"/услуги",views:{aggloItemContent:{template:'<div class="full-height" data-spec-list-drct data-agglo="cur_agglo"></div>'}}}).state("byt.aggloItem.specItem",{url:"/услуги/:spec_name","abstract":!0,views:{aggloItemContent:{templateUrl:"agglo-item/spec-item/spec-item.tpl.html",controller:"SpecItemController"}},resolve:{q_spec_name:["$stateParams",function(e){return e.spec_name}]}}).state("byt.aggloItem.specItem.rubricList",{url:"/рубрики",views:{specItemContent:{template:'<div class="full-height" data-rubric-list-drct data-agglo="cur_agglo" data-spec="cur_spec"></div>'}}}).state("byt.aggloItem.specItem.rubricItem",{url:"/рубрики/:rubric_name","abstract":!0,views:{specItemContent:{templateUrl:"agglo-item/spec-item/rubric-item/rubric-item.tpl.html",controller:"RubricItemController"}},resolve:{q_rubric_name:["$stateParams",function(e){return e.rubric_name}]}}).state("byt.aggloItem.specItem.rubricItem.prtfPrev",{url:"/портфолио",resolve:{rdr:["$location","$state","$stateParams",function(e,t,r){e.url(t.href("byt.aggloItem.specItem.rubricItem.tblView",r))}]}}).state("byt.aggloItem.specItem.rubricItem.prtfView",{url:"/фото",views:{rubricItemContent:{templateUrl:"agglo-item/spec-item/rubric-item/prtf-view/prtf-view.tpl.html",controller:"PrtfViewController"}}}).state("byt.aggloItem.specItem.rubricItem.tblView",{url:"/каталог",views:{rubricItemContent:{templateUrl:"agglo-item/spec-item/rubric-item/tbl-view/tbl-view.tpl.html",controller:"TblViewController"}}}).state("byt.splrManager",{url:"/manage{supplier_id:[0-9]{6,50}}",views:{appContent:{templateUrl:"splr-manager/splr-manager.tpl.html",controller:"SplrManagerController"}},resolve:{q_id:["$stateParams",function(e){return+e.supplier_id}]}}).state("byt.splrLogin",{url:"/login-pwd",views:{appContent:{templateUrl:"splr-login/splr-login.tpl.html",controller:"SplrLoginController"}}}).state("byt.oauthLogin",{url:"/login",views:{appContent:{templateUrl:"splr-login/oauth-login.tpl.html",controller:"OauthLoginController"}}}).state("byt.oauthCallback",{url:"/callback",views:{appContent:{templateUrl:"splr-login/oauth-callback.tpl.html"}}}).state("byt.splrItem",{url:"/id{supplier_id:[0-9]{6,50}}?hash&tpe&name","abstract":!0,views:{appContent:{templateUrl:"splr/splr-item.tpl.html",controller:"SplrItemController"}},resolve:{q_name:["$stateParams",function(e){return e.name}],q_id:["$stateParams",function(e){return+e.supplier_id}],q_hash:["$stateParams",function(e){return e.hash}],q_tpe:["$stateParams",function(e){return e.tpe}]}}).state("byt.splrItem.main",{url:"",views:{splrItemContent:{templateUrl:"splr/main/splr-main.tpl.html",controller:"SplrMainController"}}}).state("byt.splrItemF",{url:"/fid{supplier_id:[0-9]{6,50}}?hash&tpe&name","abstract":!0,views:{appContent:{templateUrl:"splr/splr-item.tpl.html",controller:"SplrItemController"}},resolve:{q_name:["$stateParams",function(e){return e.name}],q_id:["$stateParams",function(e){return+e.supplier_id}],q_hash:["$stateParams",function(e){return e.hash}],q_tpe:["$stateParams",function(e){return e.tpe}]}}).state("byt.splrItemF.main",{url:"",views:{splrItemContent:{templateUrl:"splr/main/splr-main.tpl.html",controller:"SplrMainController"}}}).state("byt.index",{url:"/index.html",resolve:{rdr:["$location","$state","$stateParams",function(e,t,r){e.url(t.href("byt.welcome",r))}]}}).state("byt.indexvkn",{url:"/index-vkn.html",resolve:{rdr:["$location","$state","$stateParams",function(e,t,r){e.url(t.href("byt.welcome",r))}]}}).state("byt.indexfbk",{url:"/index-fbk.html",resolve:{rdr:["$location","$state","$stateParams",function(e,t,r){e.url(t.href("byt.welcome",r))}]}}),a.$get().initRouter(t),t.state("byt.otherwise",{url:"/{path:.*}",views:{appContent:{template:'<div class="err-msg">Запрашиваемая страница не найдена: {{q_path}}</div><div class="err-alt"><a href="/">Перейти на главную</a></div>',controller:["$scope","readiness","q_path",function(e,t,r){e.q_path=r,t.notFound()}]}},resolve:{q_path:["$stateParams",function(e){return e.path}]}})};e.module("myApp.routeConfig",t).config(["$urlRouterProvider","$stateProvider","$locationProvider","mngrRouterProvider",r])}(window.angular),function(e){var t=function(e,t,r,a,i,n){var s=function(t){e.cur_agglo=t,e.home_href=r.href("byt.aggloItem.specList",{agglo_local_name:t.local_name})},o=function(t){return 404===t.status?(e.err_cur_agglo={msg:"Город "+n+" не найден"},void a.notFound()):(console.log("aggloRetrieveError"),console.log(t),e.err_cur_agglo={msg:"Технические неполадки: не удалось подключиться к серверу"},void a.serverError(t))};i.retrieveByLocalName(n).then(s)["catch"](o),t(function(){e.is_prg=!0},500)};e.module("myApp.AggloItemController",["myApp.aggloItemRepo","myApp.readiness"]).controller("AggloItemController",["$scope","$timeout","$state","readiness","aggloItemRepo","q_agglo_local_name",t])}(window.angular),function(e){var t=function(e,t,r,a){var i="Выбор города";e.page_ttl=i;var n=function(t){e.agglo_err={msg:"Технические неполадки: не удалось подключиться к серверу."},r.serverError(t),console.log("aggloRetrieveError",t)};a.retrieveData().then(function(a){e.arr_geo_agglo=a;var n=t.href("byt.aggloList");r.ok(i,"Указание необходимого города из списка: Москва, Санкт-Петербург, Новосибирск, Алматы, Екатеринбург, Нижний Новгород, Казань, Челябинск, Омск, Самара и другие города",n)})["catch"](n)};e.module("myApp.AggloListController",["myApp.geoAggloRepo","myApp.readiness"]).controller("AggloListController",["$scope","$state","readiness","geoAggloRepo",t])}(window.angular),function(e){var t=function a(e,t){_classCallCheck(this,a),e.calcAggloHref=function(e){return t.href("byt.aggloItem.specList",{agglo_local_name:e})}},r=function(){return{restrict:"A",scope:{arrGeoAgglo:"="},templateUrl:"agglo-list/agglo-list-drct.tpl.html",controller:["$scope","$state",t]}};e.module("myApp.aggloListDrct",[]).directive("aggloListDrct",[r])}(window.angular),function(e){e.module("myApp.appFilters",[]).filter("range",function(){return function(e,t){t=parseInt(t,10);for(var r=0;t>r;r+=1)e.push(r);return e}}).filter("enclink",function(){return window.encodeURIComponent})}(window.angular),function(e){var t=function(e,t){return e.toString(10)+","+t.toString(10)},r=function(e){if(!e)return null;var t=e.split(",");if(!t[0]||!t[1])return null;var r=parseFloat(t[0]);if(-180>r||r>180)return null;var a=parseFloat(t[1]);return-90>a||a>90?null:{lng:r,lat:a}},a=function(e){var t=parseInt(e,10);return 0>t||t>18?null:t},i=function(e,t){e=e||{},t=t||{};var r=Math.max(Math.abs((t.lng||0)-(e.lng||0)),Math.abs((t.lat||0)-(e.lat||0)));return r>=.0015},n=function s(n,o,l,c,p,d,u,m,g,v,f,_){if(_classCallCheck(this,s),"function"==typeof window.callPhantom)return void c.serverError(new Error("forbiddenForCrawlers"));if(c.ok("Карта мастеров и салонов красоты","Местоположение, адреса и контактные данные мастеров и салонов красоты"),m.retrieveData().then(function(e){n.arr_serv_group=e}),n.q_spec=_,_){var h=function(){return l.when({lng:37.6,lat:55.75})},A=function(e,t){if(e){var a=r(e);if(a)return l.when(a);e=null}return t?(console.log("calcByG",t),d.retrieveByLocalName(t).then(function(e){return console.log("byLocalName",e),p.coordsFromWktPoint(e.centroid)})["catch"](function(e){return 404===e.status?h():(console.log("errAgglo",e),l.reject(e))})):h()};A(g,f).then(function(e){n.startLng=e.lng,n.startLat=e.lat,n.startZoom=a(v)||14})["catch"](function(e){console.log("errMap",e),n.errMap={msg:"some error"}});var w=function(e,t){var r="/fid"+t.id+"?tpe=map&hash="+t.hash+"&name="+t.name,a='<a class="map-item__msg-link"\n href="'+r+'">карточка салона</a>',i="";t.micro_comment&&(i='<div><span class="map-item__comment">'+t.micro_comment+"</span></div>",t.fas_warning&&(i+='<div><span class="map-item__warning">'+t.fas_warning+"</span></div>"),i+="</div>");var n='<div class="map-item"><div class="map-item__name"><strong>'+t.name+'</strong></div><div class="map-item__dscr">'+t.address+"</div>"+i+'<div class="map-item__link-wrap">'+a+"</div></div>";e[t.id]={lat:parseFloat(t.lat),lng:parseFloat(t.lon),message:n,title:t.name+" | "+t.address}},b=function(t){var r={};return e.forEach(t,e.bind(null,w,r)),r},y=function(e){n.mapMarkers=b(e.result),n.total=e.total};n.mapMove=function(e,r,a,n,s){if(o.go("byt.map",{ll:t(e,r),z:a,g:null,spec:_},{notify:!1,location:"replace"}),14>a)return void console.log("zoom >= 14 required");var l=i({lng:n,lat:s},{lng:e,lat:r});return console.log("isEnough",l),l?void u.retrieveData(e,r,_).then(y)["catch"](function(e){console.log("error",e),alert("Ошибка загрузки данных. Попробуйте позже")}):void console.log("not enough space to load new data")}}};e.module("myApp.AppMapController",["myApp.readiness","myApp.lflMap","myApp.hprFactory","myApp.aggloItemRepo","myApp.firmListRepo","myApp.servGroupRepo"]).controller("AppMapController",["$scope","$state","$q","readiness","hprFactory","aggloItemRepo","firmListRepo","servGroupRepo","q_ll","q_z","q_g","q_spec",n])}(window.angular),function(e,t){var r=function(){var r=function(r,a,i){var n=i.analyticsOn||"click",s=function(){t.trackEvent(i.analyticsEvent||"no-action",i.analyticsCategory||"no-category",{})};e.element(a[0]).bind(n,s)};return{restrict:"A",link:r}};e.module("myApp.analyticsOn",[]).directive("analyticsOn",r)}(window.angular,window.LYTIC),function(e,t){var r=180,a=function(e,t,r){var a=document.createElement(e);return t&&(a.className=t),r&&(Array.isArray(r)&&r.length>0?r.forEach(function(e){a.appendChild(e)}):a.innerHTML=r),a},i={div:function(e,t){return a("div",e,t)},form:function(e,t){return a("form",e,t)},button:function(e,t){return a("button",e,t)},label:function(e,t){return a("label",e,t)},input:function(e){return a("input",e)}},n=function(e,a,n,s,o){var l=function(e){var r=i.form("frm"),a=i.div(null,"Укажите имэйл адрес:"),o=i.input();o.autofocus=!0,o.type="email",o.required=!0;var l=i.div("frm__inp",[o]);r.appendChild(a),r.appendChild(l);var c=i.button("app-button","Получить код для входа");c.disabled=!0;var p="",d=function(e){e!==p&&(p=e,e?c.disabled=!1:c.disabled=!0)};o.addEventListener("change",function(e){return d(e.target.value)}),o.addEventListener("keyup",function(e){return d(e.target.value)});var u=i.div("frm__but",[c]);r.appendChild(u);var m=function(){var r=o.value;if(r){c.disabled=!0;var a=function(e,t){switch(e){case 422:switch(t.errkey){case"validationError":var r=t.details||{};switch(r.property){case"lgn":return"Требуется указать корректный имэйл";case"lgn_again":return"Требуется указать корректный повторный имэйл, совпадающий с основным"}break;case"duplicateKeyError":return"На указанный имэйл ранее уже был отправлен проверочный код: для повторной отправки необходимо подождать некоторое время"}}return n.crit("errSendVcodeEmail","unknown error",{status:e,edata:t}),"Непредвиденная ошибка: попробуйте повторить позже"};s.sendVcodeEmail(r).then(function(r){c.disabled=!1,e(r),t.trackEvent("vcode-email","login",{})})["catch"](function(e){alert(a(e.status,e.data)),c.disabled=!1})}};return r.addEventListener("submit",function(e){e.preventDefault(),m()}),r},c=function(e,a,o){var l=i.div(),c=i.form("frm"),p=i.div("mrgn","Укажите проверочный код, который был выслан на имэйл <b>"+e+"</b>"),d=i.input();d.type="number",d.min=1,d.max=99999,d.style.width="120px",d.required=!0,d.autofocus=!0;var u=i.div("frm__inp",[p,d]);c.appendChild(u);var m=i.button("app-button","Войти");m.disabled=!0;var g=i.div("frm__inp",[m]);c.appendChild(g);var v="",f=function(e){var t=e.target.value;t!==v&&(v=t,t?m.disabled=!1:m.disabled=!0)};d.addEventListener("change",f),d.addEventListener("keyup",f);var _=function(){var r=d.value;if(r){m.disabled=!0;var i=function(e,t){switch(e){case 422:switch(t.errkey){case"validationError":var r=t.details||{};switch(r.property){case"lgn":return"Необходимо указать корректный имэйл";case"vcode":return"Необходимо указать корректный проверочный код"}switch(r.code){case"errLgnNotFound":return"Не найдено проверочного кода для указанного имэйла: возможно срок действия кода уже истёк: попробуйте получить код заново";case"errMaxRetry":return"Превышено максимальное количество попыток неверного входа: проверочный код удалён: попробуйте получить код заново";case"errMismatch":return"Указан неверный проверочный код: проверьте корректность кода"}}}return n.crit("errSendLoginEmail","unknown error",{status:e,edata:t}),"Непредвиденная ошибка: попробуйте повторить позже"};s.sendLoginEmail(e,r).then(function(e){m.disabled=!1,a(e),t.trackEvent("login-email","login",{})})["catch"](function(e){alert(i(e.status,e.data)),m.disabled=!1})}};c.addEventListener("submit",function(e){e.preventDefault(),_()});var h=i.label(null,"Если не получили код, попробуйте: "),A=i.button("mrgn","указать другой имэйл<br/><small>вернуться</small>"),w=i.button("mrgn","");A.addEventListener("click",function(){o()});var b=function(t){w.disabled=!0;var r,a=function(){w.innerHTML="получить код повторно<br/><small>через "+t+" сек.</small>"},i=function(){t>0?a():(window.clearInterval(r),w.innerHTML="получить другой код<br><small>на имэйл: "+e+"</small>",w.addEventListener("click",function(){o()}),w.disabled=!1),t-=1};r=window.setInterval(i,1e3),i()};b(r);var y=i.div("frm__btn",[h,A,w]);return l.appendChild(c),l.appendChild(y),l},p=function(){var t=o.getData();n.info("sessionUpdate","success",t),t.is_editor?e.go("byt.welcome"):e.go("byt.splrItem.main",{supplier_id:t.uid})};return{restrict:"A",link:function(e,t){var r=t[0],a=l(function(e){var t=c(e.lgn,function(e){o.updateSess(e.auth_token).then(p)["catch"](function(e){n.crit("errUpdateSess","login-email",e),alert(e)}),n.info("authResult","login-email",e)},function(){r.innerHTML="",r.appendChild(a)});r.innerHTML="",r.appendChild(t)});r.appendChild(a)}}};e.module("myApp.appLoginEmail",["myApp.apimas","myApp.sessRepo"]).directive("appLoginEmail",["$state","$interval","lgr","apimas","sessRepo",n])}(window.angular,window.LYTIC),function(e){var t={bio:{arr:["bio"],percent:20,msg:"описание, биография"},address:{arr:["address"],percent:20,msg:"адрес, местонахождение"},any_phone:{arr:["phone","landline","whatsapp","viber"],percent:20,msg:"любой телефон для связи: мобильный, стационарный, viber или whatsapp"},any_site:{arr:["vkprofile","instagram","website","vkontakte","facebook","odnoklassniki"],percent:20,msg:"ссылка на сайт, личная или публичная страница в социальных сетях"},any_chat:{arr:["skype","twitter","viber","whatsapp","email"],percent:20,msg:"средство связи: скайп, твиттер, viber, whatsap или имэйл"}},r=function(e,t,r){var a={};return e.forEach(function(e){a[e.type]=e.value}),a.address=t,a.bio=r,a},a=function i(){if(_classCallCheck(this,i),console.log("hello from app splr fill",this.contacts),Array.isArray(this.contacts)){var e=r(this.contacts,this.address,this.bio),a=0,n=[];Object.keys(t).forEach(function(r){var i=t[r],s=i.arr.some(function(t){return!!e[t]});s?a+=i.percent:n.push(i)}),this.percent=a,this.notEnough=n}};e.module("myApp.appSplrFill",[]).component("appSplrFill",{template:'\n<div>\n<div class="pdng" ng-if="$ctrl.notEnough.length"\n  style="background-color: #e91e63; color: #efefef">\n  Профиль заполнен на <b>{{$ctrl.percent}}%</b>\n<br>\n  Более полное заполнение профиля поднимает мастера во всех каталогах и фотогалереях. Рекомендуем заполнить следующие данные:\n<ul>\n  <li ng-repeat="ne in $ctrl.notEnough">\n    <b>{{ne.percent}}%</b> - {{ne.msg}}\n  </li>\n</ul>\n</div>\n</div>\n',controller:a,bindings:{contacts:"<",address:"<",bio:"<"}})}(window.angular),function(e){var t=function i(e,t){_classCallCheck(this,i),e.hrefHome=t.href("byt.welcome"),e.calcHrefAgglo=function(e){return t.href("byt.aggloItem.specList",{agglo_local_name:e})},e.calcHrefSpec=function(e,r){return t.href("byt.aggloItem.specItem.rubricList",{agglo_local_name:e,spec_name:r})},e.calcHrefSplr=function(e,r){return t.href("byt.splrItem",{supplier_id:e,name:r})},e.calcHrefRubric=function(e,r,a,i){return t.href("byt.aggloItem.specItem.rubricItem."+i+"View",{agglo_local_name:e,spec_name:r,rubric_name:a})}},r=function(e,t){var r=t[0];console.log("wrap",r),console.log("scroll",r.scrollWidth,r.scrollLeft),window.setTimeout(function(){r.scrollLeft=r.scrollWidth},100)},a=function(){return{restrict:"A",scope:{aggloName:"=",specName:"=",rubricName:"=",rviewId:"=",rviewName:"=",splrId:"=",splrName:"="},templateUrl:"drct/breadcrumb.tpl.html",controller:["$scope","$state",t],link:r}};e.module("myApp.breadcrumbDrct",[]).directive("breadcrumbDrct",[a])}(window.angular),function(e){e.module("myApp.drct",[]).directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t,r,a){t.$last===!0&&e(function(){t.$emit(a.onFinishRender)})}}}])}(window.angular),function(e){var t=function(e){var t=function(t,r,a){var i,n=r[0];""===document.createElement("detect").style.objectFit?(i=document.createElement("img"),a.workId&&(i.onerror=function(t){i.onerror=null,console.log("img err",t),e.sendReportNoImage({id:a.workId})}),i.src=a.imgSrc):(i=document.createElement("div"),i.style.backgroundImage="url("+a.imgSrc+")"),n.appendChild(i)};return{restrict:"A",link:t}};e.module("myApp.fullSizeImg",["myApp.apimas"]).directive("fullSizeImg",["apimas",t])}(window.angular),function(e,t){var r=function i(e){_classCallCheck(this,i),e.is_show=!!t.showLeftLinkBox&&!!t.isLeftLink&&!t.isLeftLink(),e.showLeftLinkBox=function(){e.is_show&&(t.showLeftLinkBox(),e.is_show=!1)}},a=function(){return{restrict:"A",templateUrl:"drct/left-link.tpl.html",controller:["$scope",r]}};e.module("myApp.leftLinkDrct",[]).directive("leftLinkDrct",[a])}(window.angular,window.snns),function(e){var t=function(t,r){var a=function(a,i){var n=i[0];i.bind("scroll",function(){return Math.abs(a.vpos.val-n.scrollTop)>30&&(a.vpos.val=n.scrollTop,a.$apply()),!0}),a.scrollToStart=function(){r.hash(""),a.vpos.val=1},a.$watch("vpos.val",function(e){n.scrollTop=e,n.focus()});var s=e.element('\n  <div class="scroll-top-wrap" ng-show="vpos.val > 300">\n	<button ng-click="scrollToStart()"\n			title="наверх"\n			class="app-button scroll-top-btn"\n			analytics-on\n			analytics-category="scroll"\n			analytics-event="scroll-top">\n	  <span class="fa fa-arrow-up fa-2x">\n	  </span>\n	</button>\n  </div>');t(s)(a),i.append(s)};return{restrict:"A",link:a,scope:{vpos:"=appVpos"}}};e.module("myApp.appScrollWatcher",[]).directive("appScrollWatcher",["$compile","$location",t])}(window.angular),function(e,t){var r=function i(r,a,n,s,o,l,c,p){if(_classCallCheck(this,i),!r.mediaId)return void p.serverError(new Error("no media id"));r.is_vk_share=!!window.VK,r.is_vk_like=!!window.VK;var d=function(e){switch(e.status){case 404:r.err_msg="Фото или видео не найдено. Возможно было удалено мастером или модератором.",p.notFound();break;default:r.err_msg="Технические неполадки. Попробуйте позже",p.serverError(e)}},u=function(e){if(!r.arr_serv_group)return null;var t=r.arr_serv_group.filter(function(t){return t.id===e})[0];return t?t.name:null};r.calcHrefRubric=function(e,t,r){return n.href("byt.aggloItem.specItem.rubricItem.tblView",{agglo_local_name:e,spec_name:u(t),rubric_name:r})};var m=function(){var t="Работа №"+r.sw.id;t+=". Мастер / салон красоты: "+r.sw.master_profile_name,r.sw.city_name&&(t+=r.sw.city_name_genitive?" из "+r.sw.city_name_genitive:" из города "+r.sw.city_name),e.forEach(r.sw.arr_serv_rubric,function(e){t.length+e.name.length<150&&(t+=" - "+e.name)});var a="Фото "+r.sw.id;r.sw.main_serv_rubric&&(a+=" - "+r.sw.main_serv_rubric.name),a+=" - "+r.sw.master_profile_name,r.sw.city_name&&(a+=" - "+r.sw.city_name),p.ok(a,t,n.href("byt.mediaItem",{media_id:r.sw.id}))},g=function(){r.link_supplier=n.href("byt.splrItem.main",{supplier_id:r.sw.master_profile_id,name:r.sw.master_profile_name});var e=n.href("byt.mediaItem",{id:r.sw.id});r.url_to_share=t.MAIN_HOST+e,r.sw.main_serv_rubric=r.sw.arr_serv_rubric[0]},v=function(){var e=r.sw.master_address;return e?l.retrieveById(e.geo_district_id).then(function(e){r.sw.city_name=e.local_name,r.sw.city_name_genitive=e.case_genitive,r.sw.city_name_prepositional=e.case_prepositional})["catch"](function(e){s.crit("aggloItemRetrieve","from media-item",{msg:e.message},e.stack)}):null},f=function(){return o.sendGet("/work/get-item",{id:r.mediaId}).then(function(e){r.sw=e})},_=function(){return c.retrieveData().then(function(e){r.arr_serv_group=e})},h=function(){return o.sendGet("/work/get-rubrics",{serv_work_id:r.sw.id,locale_id:"ru"}).then(function(e){r.sw.arr_serv_rubric=e.arr_serv_rubric})["catch"](function(e){r.sw.arr_serv_rubric=[],s.crit("mediaGetRubrics","loadWorkRubrics",{msg:e.message},e.stack)})};f().then(_).then(h).then(v).then(g).then(m)["catch"](d)},a=function(){return{restrict:"A",scope:{mediaId:"@"},templateUrl:"media-item/media-item.tpl.html",controller:["$scope","$location","$state","lgr","apimas","aggloItemRepo","servGroupRepo","readiness",r]}};e.module("myApp.mediaItemDrct",["myApp.ytbVideo","myApp.apimas","myApp.readiness","myApp.appVkLike","myApp.fullSizeImg","myApp.aggloItemRepo","myApp.servGroupRepo"]).directive("mediaItemDrct",[a])}(window.angular,window.APPCONF),function(e,t,r){var a=function n(e,a){_classCallCheck(this,n),e.url_share=r.MAIN_HOST+a.encodePath(e.quizItem.rel_url),e.image_share=r.MAIN_HOST+"/qimg/"+e.qresItem.photo+".png",e.isWallPostQres=!!t.wallPost,e.wallPostQres=function(r){if(e.isWallPostQres){var a="",i="";r.photo&&(i=r.photo),a+="Пройти тест в приложении vk.com/app4863471 либо на сайте miskra.ru",t.wallPost(a,i,function(e,t){return e?("10007"===e.message||alert("Возникла ошибка при сохранении. Повторите позже"),void console.log(e)):(console.log(t),void alert("Результат успешно сохранён на вашей стене."))})}}},i=function(){return{restrict:"A",templateUrl:"quiz-item/qres-item.tpl.html",scope:{quizItem:"=",qresItem:"="},controller:["$scope","hprFactory",a]}};e.module("myApp.qresItemDrct",["myApp.appShareBlock","myApp.quizHelper","myApp.hprFactory"]).directive("qresItemDrct",[i])}(window.angular,window.snns,window.APPCONF),function(e){var t=function a(e){_classCallCheck(this,a),e.setAnswer=function(e,t){e.user_answer=t}},r=function(){return{restrict:"A",templateUrl:"quiz-item/qstn-item.tpl.html",scope:{item:"="},controller:["$scope",t]}};e.module("myApp.qstnItemDrct",[]).directive("qstnItemDrct",[r])}(window.angular),function(e,t){var r=function i(r,a,n,s){_classCallCheck(this,i),r.url_to_share=t.MAIN_HOST+a.href("byt.quizItem.questionList"),r.calcAnswerIds=function(t){var r=[];return e.forEach(t.question_list,function(e){e.user_answer&&r.push(e.user_answer.id)}),r},r.calcResult=function(e){var t=r.calcAnswerIds(e);return t.length!==e.question_list.length?void console.log("required all answers"):void s.calcQres(t).then(function(e){r.qresItem=e})["catch"](function(e){console.log(e),alert("Непредвиденная ошибка: не удалось вычислить результат: попробуйте позже")})},n.ok("Тест: "+r.quizItem.ttl,r.quizItem.dscr,r.quizItem.rel_url)},a=function(){return{restrict:"A",templateUrl:"quiz-item/qstn-list.tpl.html",scope:{quizItem:"="},controller:["$scope","$state","readiness","quizSrvc",r]}};e.module("myApp.qstnListDrct",["myApp.qstnItemDrct","myApp.qresItemDrct","myApp.quizSrvc","myApp.appCommentForm","myApp.readiness"]).directive("qstnListDrct",[a])}(window.angular,window.APPCONF),function(e){var t=function(e,t){var r=t.map(function(e){return e.q}),a=function(e){return-1===r.indexOf(e.id)},i=e.filter(a);return i[0]},r=function(){return{toUrlParams:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},fromStrToAnsw:function(e){return e?e.split("-").map(function(e){var t=e.split("_");return{q:t[0],a:e}}):[]},fromAnswToStr:function(e){var t=e.map(function(e){return e.a});return t.join("-")},calcNextQuestion:t}};e.module("myApp.quizHelper",[]).factory("quizHelper",[r])}(window.angular),function(e){var t=function r(e,t,a,i,n){_classCallCheck(this,r);var s=t.href("byt.quizItem.qstnList"),o=function(t){console.log(t);var r="";404===t.status?(r="Тест не найден",a.notFound()):(r="Ошибка загрузки теста: повторите запрос позже",a.serverError(t)),e.quizErr=r},l=function(t){t.ttl=t.ttl[0].charAt(0).toUpperCase()+t.ttl.slice(1),t.dscr="В результате теста - краткие рекомендации, как выбрать подходящую причёску или стрижку: что вам подойдёт, а чего следует избегать.",t.rel_url=s,e.quizItem=t};n=n.replace(/-/g," "),i.getItem(n).then(l)["catch"](o)};e.module("myApp.QuizItemController",["myApp.quizSrvc","myApp.readiness"]).controller("QuizItemController",["$scope","$state","readiness","quizSrvc","quiz_ttl",t])}(window.angular),function(e,t){var r={},a={},i=function(e,i){return{getItem:function(a){return r[a]?e.when(r[a]):i({method:"GET",url:t.QUIZ_ENDPOINT+"/quiz/get-full-by-title",params:{ttl:a}}).then(function(e){return r[a]=e.data,e.data})},getQres:function(r){if(a[r])return e.when(a[r]);var n=t.QUIZ_ENDPOINT+"/qres/get-item";return i({method:"GET",url:n,params:{id:r}}).then(function(e){return e.data}).then(function(e){return a[r]=e,e})},calcQres:function(e){var r=t.QUIZ_ENDPOINT+"/qres/calc-item";return i({method:"GET",url:r,params:{answers:e.join("-")}}).then(function(e){return e.data}).then(function(e){return a[e.id]=e,e})}}};e.module("myApp.quizSrvc",[]).factory("quizSrvc",["$q","$http",i])}(window.angular,window.APPCONF),function(e){var t=function(e,t,r,a,i){e.splr={id:t,name:i}};e.module("myApp.SplrItemController",[]).controller("SplrItemController",["$scope","q_id","q_tpe","q_hash","q_name",t])}(window.angular),function(e,t){var r=function(r,a,i,n,s,o,l,c){r.page_ttl="Вход для мастеров и салонов красоты";var p=function(){var e=o.getData();a.go("byt.splrItem.main",{supplier_id:e.uid})},d=function(e){n.crit("oauthUpdateSess","catch",{
reason:e})},u=function(e){o.updateSess(e.auth_token).then(p)["catch"](d)},m=function(e){n.crit("oauthCatch","oauth login",e)},g=function(e,r,a){var i="code"===r?a.code:a.access_token;return i?void c.sendOauth(i,r,t.OAUTH_CALLBACK,e).then(u)["catch"](m):void m("required: code or access_token")},v=function(e){n.crit("oauthCatchCode","catch verification code",e)};r.openOauthNstg=function(){l.loginNstg(t.OAUTH_NSTG_ID,"code",t.OAUTH_CALLBACK,[]).then(e.bind(null,g,"nstg","code"))["catch"](v)},r.openOauthVkn=function(){l.loginVkn(t.OAUTH_VKN_ID,"code",t.OAUTH_CALLBACK,[]).then(e.bind(null,g,"vkn","code"))["catch"](v)},s.ok(r.page_ttl,"Вход или регистрация для мастеров и салонов красоты с использованием аккаунта Инстаграм: автоматический экспорт работ и услуг, переход в личный кабинет",a.href("byt.oauthLogin"))};e.module("myApp.OauthLoginController",["myApp.oauthEntry","myApp.apimas","myApp.sessRepo","myApp.readiness","myApp.appLoginEmail"]).controller("OauthLoginController",["$scope","$state","$interval","lgr","readiness","sessRepo","oauthEntry","apimas",r])}(window.angular,window.APPCONF),function(e){var t=function r(e,t,a,i,n,s,o){_classCallCheck(this,r),e.page_ttl="Вход",e.auth={lgn:"",pwd:""},e.statePrev=s;var l=function(e){if("validationError"===e.errkey){var t=e.details||{};return"pwd"===t.property&&"is not correct"===t.msg?"неверный пароль":"lgn"===t.property?"неверный логин":JSON.stringify(e.details)}return JSON.stringify(e)},c=function(t){switch(t.status){case 422:return void(e.err_msg=l(t.data));case 401:return void(e.err_msg="Ошибка авторизации: неверные данные");default:return e.err_msg="Непредвиденная ошибка",void a.crit("errLoginAuth","fail auth pwd",t)}},p=function(){var e=o.getData();e.is_editor?t.go("byt.welcome"):t.go("byt.splrItem.main",{supplier_id:e.uid})},d=function(e){o.updateSess(e.auth_token).then(p)["catch"](c)},u=function(){e.in_progress=!1};e.sendAuth=function(t,r){e.err_msg="",e.in_progress=!0,n.sendLogin({lgn:t,pwd:r}).then(d)["catch"](c)["finally"](u)},i.ok("Вход: логин и пароль","Вход или регистрация с последующим входом для мастеров и салонов красоты: форма входа по логину и паролю",t.href("byt.splrLogin"))};e.module("myApp.SplrLoginController",["myApp.apimas","myApp.sessRepo","myApp.readiness","myApp.statePrev"]).controller("SplrLoginController",["$scope","$state","lgr","readiness","apimas","statePrev","sessRepo",t])}(window.angular),function(e){var t=function r(e,t,a,i,n){_classCallCheck(this,r),e.sessData=i.getData(),e.vpos={val:0},e.$watch("sessData.uid",function(t){e.is_owner=n===t});var s=function(r){r.master_address||(r.master_address={master_profile_id:r.id}),e.supplier=r,t.ok("Редактирование мастера / салона красоты","Редактирование мастера или салона красоты: профиль, адрес, контактные данные, ссылки на другие источники")},o=function(r){404===r.status?(e.err_msg="Мастер не найден. Возможно он был удалён ранее модератором или самим мастером.",t.notFound()):(e.err_msg="Возникла непредвиденная ошибка. Повторите запрос позже.",t.serverError(new Error(r.status)))};a.sendGet("/master/get-profile",{id:n},!0).then(s)["catch"](o)};e.module("myApp.SplrManagerController",["myApp.appScrollWatcher","myApp.splrPhoneEdt","myApp.splrEmailEdt","myApp.splrVkidEdt","myApp.apimas","myApp.sessRepo","myApp.readiness"]).controller("SplrManagerController",["$scope","readiness","apimas","sessRepo","q_id",t])}(window.angular),function(e){var t=["myApp.SplrProfileEdtController","myApp.SplrServListEdtController","myApp.SplrServItemEdtController","myApp.SplrAggloEdtController","myApp.SplrSocialEdtController","myApp.SplrRemovalController","myApp.servCreatorEdt","myApp.workCreatorEdt","myApp.workItemEdt","myApp.workListEdt"],r=function(){var e=function(e){var t="byt.splrManager.";e.state(t+"profile",{url:"/profile",views:{managerContent:{templateUrl:"splr-manager/profile/profile-edt.tpl.html",controller:"SplrProfileEdtController"}}}).state(t+"servList",{url:"/servs",views:{managerContent:{templateUrl:"splr-manager/serv-list/serv-list-edt.tpl.html",controller:"SplrServListEdtController"}}}).state(t+"servCreator",{url:"/add-servs",views:{managerContent:{template:'<div serv-creator-edt data-supplier="supplier" ng-if="is_owner || sessData.is_moder"></div>'}}}).state(t+"servItem",{url:"/serv/:id",views:{managerContent:{templateUrl:"splr-manager/serv-item/serv-item-edt.tpl.html",controller:"SplrServItemEdtController"}},resolve:{q_id:["$stateParams",function(e){return e.id}]}}).state(t+"address",{url:"/address",views:{managerContent:{templateUrl:"splr-manager/address/agglo-edt.tpl.html",controller:"SplrAggloEdtController"}}}).state(t+"social",{url:"/socials",views:{managerContent:{templateUrl:"splr-manager/social/social-edt.tpl.html",controller:"SplrSocialEdtController"}}}).state(t+"removal",{url:"/removal",views:{managerContent:{templateUrl:"splr-manager/removal/removal.tpl.html",controller:"SplrRemovalController"}}})};return{initRouter:e}};e.module("myApp.mngrRouter",t).factory("mngrRouter",[r])}(window.angular),function(e){var t=function r(e,t,a,i,n,s,o,l){_classCallCheck(this,r),e.page_ttl="МисКра";var c=function(e){t.go("byt.aggloItem.specList",{agglo_local_name:e.local_name})},p=function(e){o.retrieveByCoords(e.lng,e.lat).then(function(e){e?c(e):alert("Местоположение не поддерживается сервисом. Попробуйте выбрать вручную.")})};e.defineLocation=function(){l.retrieveFromDevice().then(p)["catch"](function(e){alert(e)})};var d=function(){e.err_calc="не удалось определить автоматически"},u=function(t){o.retrieveByCoords(t.lng,t.lat).then(function(t){t?e.agglo_calc=t:d()})["catch"](d)},m=function(){l.retrieveByIp().then(function(e){u(e)})["catch"](d)},g=function(){s.ok("Мастера и салоны красоты","Парикмахеры, визажисты, уход за ногтями, бровями и ресницами - мастера и салоны красоты России, а также Украины, Казахстана и Белоруссии"),e.is_progress_auto=!0,m()};g()};e.module("myApp.WlcController",["ui.router","myApp.aggloItemRepo","myApp.locRepo","myApp.readiness"]).controller("WlcController",["$scope","$state","$log","$http","$timeout","readiness","aggloItemRepo","locRepo",t])}(window.angular),function(e){var t=function(){var e=this;e.offer_list=[]};e.module("myApp.OfferListController",[]).controller("OfferListController",[t])}(window.angular),function(e){var t=function(e,t,r,a,i,n,s,o){n.retrieveData().then(function(t){var r=i.findElemByProp(t||[],"name",o);r?e.cur_spec=r:(e.err_cur_spec={msg:'Специализация "'+o+'" в городе '+e.cur_agglo.local_name+" не найдена"},a.notFound())})["catch"](function(t){e.err_cur_spec={msg:"Ошибка загрузки специализации. Пожалуйста, попробуйте позже",reason:t},console.log("retrieveData",t),a.serverError(new Error(t))}),r(function(){e.is_prg=!0},500)};e.module("myApp.SpecItemController",["myApp.hprFactory","myApp.servGroupRepo","myApp.readiness"]).controller("SpecItemController",["$scope","$q","$timeout","readiness","hprFactory","servGroupRepo","q_agglo_local_name","q_spec_name",t])}(window.angular),function(e){var t=function a(e,t,r,i,n){_classCallCheck(this,a),e.calcHref=function(t){return r.href("byt.aggloItem.specItem.rubricList",{agglo_local_name:e.agglo.local_name,spec_name:t})},n.retrieveData().then(function(t){e.groups=t;var a=r.href("byt.aggloItem.specList",{agglo_local_name:e.agglo.local_name});i.ok(e.agglo.local_name+" - услуги мастеров и салонов красоты","Перечень услуг красоты: парикмахеры, стилисты, визажисты, услуги по уходу за ногтями, ресницами, бровями и многое другое в "+e.agglo.case_prepositional,a)})["catch"](function(t){e.err_groups={msg:"Ошибка загрузки категорий. Пожалуйста, попробуйте позже",reason:t},console.log(t),i.serverError(new Error(t))}),t(function(){e.is_prg=!0},500)},r=function(){return{restrict:"A",templateUrl:"agglo-item/spec-list/spec-list.tpl.html",scope:{agglo:"="},controller:["$scope","$timeout","$state","readiness","servGroupRepo",t]}};e.module("myApp.specListDrct",["myApp.leftLinkDrct","myApp.servGroupRepo","myApp.readiness"]).directive("specListDrct",[r])}(window.angular);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e,t){var r=function(e){var t=[];for(var r in e)null!==e[r]&&"object"!==_typeof(e[r])&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")},a=function(e,a,i,n,s){n.removeAll();var o=function(e,r){var n=i.getData().token;return n?s.upload({url:t.APIMAS_POST_ENDPOINT+e,method:"POST",data:{ufile:r},headers:{Authorization:"Bearer "+n}}):a.reject("Требуется авторизация: войдите в личный кабинет.")},l=function(n,s){var o=i.getData().token;return o?e({method:"POST",url:t.APIMAS_POST_ENDPOINT+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Authorization:"Bearer "+o},data:r(s)}).then(function(e){return e.data})["catch"](function(e){return 401===e.status&&i.deleteSess(),a.reject(e)}):a.reject("Требуется авторизация: войдите в личный кабинет.")},c=function(a){return e({method:"POST",url:t.APIMAS_POST_ENDPOINT+"/sess/login",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:r(a)}).then(function(e){return e.data})},p=function(a){return e({method:"POST",url:t.APIMAS_POST_ENDPOINT+"/work/report-no-image",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:r(a)}).then(function(e){return e.data})},d=function(a){return e({method:"POST",url:t.APIMAS_POST_ENDPOINT+"/sess/reg-free",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:r(a)}).then(function(e){return e.data})},u=function(a){var i={link:a};return e({method:"POST",url:t.APIMAS_POST_ENDPOINT+"/sess/reg-free",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:r(i)}).then(function(e){return e.data})},m=function(a,i,n,s){var o={tkn:a,response_type:i,redirect_uri:n,issuer_id:s};return console.log(o),e({method:"POST",url:t.APIMAS_POST_ENDPOINT+"/sess/oauth",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:r(o)}).then(function(e){return e.data})},g=function(a){var i={lgn:a,lgn_again:a};return e({method:"POST",url:t.APIMAS_POST_ENDPOINT+"/sess/vcode-email",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:r(i)}).then(function(e){return e.data})},v=function(a,i){var n={lgn:a,vcode:i};return e({method:"POST",url:t.APIMAS_POST_ENDPOINT+"/sess/login-email",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:r(n)}).then(function(e){return e.data})},f=function(r,a,i){return i&&(a.v=(new Date).getTime()),e({method:"GET",url:t.APIMAS_ENDPOINT+r,params:a}).then(function(e){return e.data})};return{sendPost:l,sendMultipart:o,sendGet:f,sendLog:u,sendLogin:c,sendRegFree:d,sendOauth:m,sendVcodeEmail:g,sendLoginEmail:v,sendReportNoImage:p}};e.module("myApp.apimas",["myApp.sessRepo","ngFileUpload"]).factory("apimasCache",["$cacheFactory",function(e){return e("apimas-cache")}]).factory("apimas",["$http","$q","sessRepo","apimasCache","Upload",a])}(window.angular,window.APPCONF),function(e,t){var r=function(e,r){var a={key:t.APICOM_KEY,version:t.APICOM_VERSION,"stat[user]":t.XUID,"stat[sid]":t.XSID},i=function(e){return"404"===e.response_code?r.reject({status:404}):"200"!==e.response_code?r.reject({status:500}):(window.DG&&window.DG.apitracker.regBC(e.register_bc_url),e)},n=function(r,n){return a.id=r,a.hash=n,e({method:"GET",url:t.APICOM_ENDPOINT+"/profile",params:a}).then(function(e){return e.data}).then(i)};return{loadFirm:n}};e.module("myApp.firmItemFactory",[]).factory("firmItemFactory",["$http","$q",r])}(window.angular,window.APPCONF),function(e,t){var r=function(e,r){var a={key:t.APICOM_KEY,version:t.APICOM_VERSION,sort:"distance",page:1,pagesize:50,what:"","stat[user]":t.XUID,"stat[sid]":t.XSID},i=function(e){return 200!==e.status?r.reject("Ошибка запроса"):e.data?"404"===e.data.response_code?{total:0,markers:[]}:"200"!==e.data.response_code?r.reject("Ошибка запроса"):{total:parseInt(e.data.total,10),result:e.data.result}:r.reject("Ошибка запроса")},n=function(r,n,s,o){return a.what=r,a.point=n.toString()+","+s.toString(),a.radius=o,e({method:"GET",url:t.APICOM_ENDPOINT+"/search",params:a}).then(i)};return{loadFirmsByPoint:n}};e.module("myApp.firmListFactory",[]).factory("firmListFactory",["$http","$q",r])}(window.angular,window.APPCONF),function(e,t){var r=function(e,r,a){var i=function(){var i=t.GEO_ENDPOINT;return i?r({method:"GET",url:i}).then(function(t){if(!t.data)return e.reject(new Error("no data"));var r=t.data.Data;if(!r)return e.reject(new Error("no Data"));var a=r.Location;return a?{latitude:a.Latitude,longitude:a.Longitude,accuracy:1e5}:e.reject(new Error("no Location"))}):a(function(){return{latitude:55.75,longitude:37.6,accuracy:1e5}},500)},n=function(){var t=e.defer();return"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){t.resolve(e.coords)},function(e){console.log("geoloc error",e),t.reject("Не удалось получить текущее местоположение")},{timeout:1e4}):t.reject("Не удалось получить текущее местоположение"),t.promise};return{getCurCoords:n,getByIp:i}};e.module("myApp.geolocFactory",[]).factory("geolocFactory",["$q","$http","$timeout",r])}(window.angular,window.APPCONF),function(e){var t={debug:"debug",info:"info",warn:"warn",crit:"crit"},r=!1;try{r="localhost"===document.location.hostname}catch(a){console.log(a)}var i=function(e,a){var i=function(i,n,s,o,l){if(!i)return void console.log("no level");if(!r&&i===t.debug)return void console.log("skip");if(console.log(i,n,s),o&&console.log(o),l&&console.log(l),i===t.crit||i===t.warn){var c={level:i,id:n,msg:s,args:o,stack:l,location:window.location.href},p=a.browserInfo();r?console.log("sendLog",c,p):e.sendLog(JSON.stringify(c)+"\n"+JSON.stringify(p))}};return{debug:function(e,r,a,n){return i(t.debug,e,r,a,n)},info:function(e,r,a,n){return i(t.info,e,r,a,n)},warn:function(e,r,a,n){return i(t.warn,e,r,a,n)},crit:function(e,r,a,n){return i(t.crit,e,r,a,n)}}};e.module("myApp.lgr",["myApp.apimas","myApp.hprFactory"]).factory("lgr",["apimas","hprFactory",i])}(window.angular),function(e){function t(t,r,a){function i(t,r){var a=!0;return e.forEach(t,function(e,t){r[t]!==e&&(a=!1)}),a}function n(t,n,s){var o=r.defer(),l=a.get(t);if(l){var c=e.fromJson(l),p=c.filter(e.bind(null,i,n));s?o.resolve(p):p.length>1?o.reject("notOnlyOne"):o.resolve(p[0])}else o.resolve(s?[]:null);return o.promise}function s(t,i){var n=r.defer(),s=a.get(t),o=s?e.fromJson(s):[],l=o.filter(function(e,t){return e.id===i.id?(o[t]=i,!0):!1})[0];return l||o.push(i),a.set(t,e.toJson(o)),n.resolve(i),n.promise}function o(t,n){var s=r.defer(),o=a.get(t);if(o){var l=e.fromJson(o);e.forEach(l,function(e,t){i(n,e)&&l.splice(t,1)}),a.set(t,e.fromJson(l))}return s.resolve(),s.promise}return{writeToStorage:s,readFromStorage:n,delFromStorage:o}}e.module("myApp.localDb",["LocalStorageModule"]).factory("localDb",["$log","$q","localStorageService",t])}(window.angular),function(e,t,r){var a={code:"?",token:"#"},i=function(e){var t=["cordova-plugin-inappbrowser","org.apache.cordova.inappbrowser"];return t.some(function(t){return e.hasOwnProperty(t)})},n=function(e){if(e.split){for(var t=e.split("&"),r={},a=0;a<t.length;a++)r[t[a].split("=")[0]]=t[a].split("=")[1];return r}return{}},s=function(e,t,i){var s=t.split(a[i])[1],o=n(s);o.access_token!==r&&null!==o.access_token?e.resolve({access_token:o.access_token}):o.code!==r&&null!==o.code?e.resolve({code:o.code}):e.reject("Problem authenticating")},o=function(e,t,r,a){var i=e.defer(),n=window.open(t,"windowName","location=0,status=0,width=800,height=400"),o=function(){console.log(n);try{if(n.document){var e=n.document.URL;e.indexOf(r)>=0&&(console.log(e),window.clearInterval(l),n.close(),s(i,e,a))}}catch(t){console.log("myexc",t)}n.closed&&(window.clearInterval(l),i.reject("Auth is cancelled"))},l=window.setInterval(o,1500);return i.promise},l=function(e,t,r,a){var n=e.defer(),o=window.cordova.require("cordova/plugin_list").metadata;if(i(o)!==!0)return n.reject("Could not find InAppBrowser plugin"),n.promise;var l=window.open(t,"_blank","location=no,clearsessioncache=yes,clearcache=yes"),c=function(e){0===e.url.indexOf(r)&&(l.removeEventListener("exit",function(){}),l.close(),s(n,e.url,a))};return l.addEventListener("loadstart",c),l.addEventListener("exit",function(){n.reject("The sign in flow was canceled")}),n.promise},c=function(e){return{loginVkn:function(r,a,i,n){var s=t.OAUTH_VKN_URI+"?client_id="+r+"&redirect_uri="+i+"&response_type="+a+"&display=touch";return n&&n.length>0&&(s+="&scope="+n.join(",")),window.cordova?l(e,s,i,a):o(e,s,i,a)},loginNstg:function(r,a,i,n){var s=t.OAUTH_NSTG_URI+"?client_id="+r+"&redirect_uri="+i+"&response_type="+a;return n&&n.length>0&&(s+="&scope="+n.join(" ")),window.cordova?l(e,s,i,a):o(e,s,i,a)}}};e.module("myApp.oauthEntry",[]).factory("oauthEntry",["$q",c])}(window.angular,window.APPCONF,void 0),function(e,t){var r=function(e){var r=function(e,t){window.document.title=e;var r=window.document.querySelector("meta[name=description]");r&&(r.content=t||"")},a=function(e){var t=window.document.querySelector("link[rel=canonical]");if(t)t.href=e;else{var r=document.createElement("link");r.rel="canonical",r.href=e,window.document.getElementsByTagName("head")[0].appendChild(r)}},i=function(){var e=window.document.querySelector("link[rel=canonical]");e&&e.parentNode.removeChild(e)},n=/[а-яё]/gi,s=function(e){var t=e.split("/");return t=t.map(function(e){return n.test(e)&&(e=encodeURIComponent(e)),e}),t.join("/")},o=function(t){window.setTimeout(function(){"function"==typeof window.callPhantom&&(window.callPhantom({appResult:"clientFinished",statusCode:t}),e.debug("callPhantomFromClient")),e.info("runHtmlReady","finish render",{statusCode:t})},0)},l=function(n,l,c){n&&l||e.crit("noTtlAndDscr","no ttl and dscr",arguments),c?(c=s(c),a(t.MAIN_HOST+c)):i(),r(n+" - МисКра",l+" - МисКра"),o(200)},c=function(){r("404",""),i(),o(404)},p=function(t){t=t||{},r("500",""),i(),o(500),e.crit("serverError","http 500",{message:JSON.stringify(t.message),err:JSON.stringify(t)},t.stack)};return{ok:l,notFound:c,serverError:p}};e.module("myApp.readiness",[]).factory("readiness",["lgr",r])}(window.angular,window.APPCONF),function(e){var t=function(e){e=e.substr(9,e.length-11);var t=e.split(",");return t.map(function(e){return{lng:parseFloat(e.split(" ")[0]),lat:parseFloat(e.split(" ")[1])}})},r=function(e,t){var r=e.filter(function(e){return e.city===t})[0];if(!r)return[];var a=r.stations;if(a&&a.length>0)return a.map(function(e){return{id:e[0],name:e[1]}});var i=r.districts;return i&&i.length>0?i.map(function(e){return{id:e[0],name:e[1]}}):[]},a=function(){var a=function(e,t){for(var r=!1,a=0,i=t.length,n=i-1;i>a;a+=1)(t[a].lng<=e.lng&&e.lng<t[n].lng||t[n].lng<=e.lng&&e.lng<t[a].lng)&&e.lat<(t[n].lat-t[a].lat)*(e.lng-t[a].lng)/(t[n].lng-t[a].lng)+t[a].lat&&(r=!r),n=a;return r},i=function(e,r,i){return a({lng:i,lat:r},t(e))},n=function(t,r,a){var n;return e.forEach(t,function(e){n||i(e.extent,r,a)&&(n=e)}),n};return{isPointInsideWkt:i,findAggloByCoords:n,getRegionsByCity:r}};e.module("myApp.geoHelper",[]).factory("geoHelper",[a])}(window.angular),function(e){var t=function(){function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var t=function(e,t){return 0===e.length?!0:0===t.length?!1:(e.sort(),t.sort(),("|"+t.join("|")+"|").indexOf("|"+e.join("|")+"|")>=0)},r=function(e,t,r){var a=e.map(function(e){var r=e[t];return r}).indexOf(r);return-1===a?null:e[a]},a=function(e,t){t=t||0;var r=e.getBoundingClientRect();return r.top>=0-t&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)+t&&r.right<=(window.innerWidth||document.documentElement.clientWidth)},i=function(e){e=e.substr(6,e.length-7);var t=e.split(" ");return{lng:parseFloat(t[0]),lat:parseFloat(t[1])}},n=function(e){for(var t,r,a=e.length;a>0;)r=Math.floor(Math.random()*a),a--,t=e[a],e[a]=e[r],e[r]=t;return e},s=function(e){e+="";var t,r,a,i=0;if(0===e.length)return i;for(t=0,a=e.length;a>t;t++)r=e.charCodeAt(t),i=(i<<5)-i+r,i|=0;return i},o=function(){var e,t,r,a=navigator.userAgent,i=navigator.appName,n=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);return-1!==(t=a.indexOf("Opera"))?(i="Opera",n=a.substring(t+6),-1!==(t=a.indexOf("Version"))&&(n=a.substring(t+8))):-1!==(t=a.indexOf("MSIE"))?(i="Microsoft Internet Explorer",n=a.substring(t+5)):-1!==(t=a.indexOf("Chrome"))?(i="Chrome",n=a.substring(t+7)):-1!==(t=a.indexOf("Safari"))?(i="Safari",n=a.substring(t+7),-1!==(t=a.indexOf("Version"))&&(n=a.substring(t+8))):-1!==(t=a.indexOf("Firefox"))?(i="Firefox",n=a.substring(t+8)):(e=a.lastIndexOf(" ")+1)<(t=a.lastIndexOf("/"))&&(i=a.substring(e,t),n=a.substring(t+1),i.toLowerCase()===i.toUpperCase()&&(i=navigator.appName)),-1!==(r=n.indexOf(";"))&&(n=n.substring(0,r)),-1!==(r=n.indexOf(" "))&&(n=n.substring(0,r)),s=parseInt(""+n,10),isNaN(s)&&(n=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),{browserName:i,fullVersion:n,majorVersion:s,appName:navigator.appName,userAgent:navigator.userAgent}},l=function(){var e=navigator.userAgent||navigator.vendor||window.opera,t=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},c=/[а-яё]/gi,p=function(e){var t=e.split("/");return t=t.map(function(e){return c.test(e)&&(e=encodeURIComponent(e)),e}),t.join("/")};return{findElemByProp:r,isArrInArr:t,randomIntFromInterval:e,coordsFromWktPoint:i,isElemInViewport:a,shuffle:n,toHashCode:s,isMobileDevice:l,encodePath:p,browserInfo:o}};e.module("myApp.hprFactory",[]).factory("hprFactory",[t])}(window.angular),function(e){var t=function(){var t=function(t,r,a){e.forEach(t.item.name.split(" "),function(i){e.forEach(r.split(" "),function(e){i.toLowerCase()===e.toLowerCase()&&(t.weight+=a)})})},r=function(e,t,r){t=t.toLowerCase();for(var a=e.item.name.toLowerCase(),i=1;i<a.length;i+=1)t.indexOf(a[i-1]+a[i])>=0&&(e.weight+=r)},a=function(e,a){var i=e.filter(function(e){return e.id===a.id?!1:e.name.split(" ").length<2?!1:!(e.count_master_serv<5)}),n=i.map(function(e){return{item:e,weight:0}});return n.forEach(function(e){return t(e,a.name,10)}),n.forEach(function(e){e.item.serv_group_id===a.serv_rubric_id&&(e.weight+=10)}),n.forEach(function(e){return r(e,a.name,1)}),n.sort(function(e,t){return e.weight>t.weight?-1:1}),n.slice(0,4)};return{calcSimilarRubrics:a}};e.module("myApp.rubricHelper",[]).factory("rubricHelper",[t])}(window.angular),function(e){var t=function(){var e=function(e){var t;try{t=JSON.parse(e)}catch(r){return console.log("tbl parse address",r),console.log("dscr",e),""}var a=[t.supRegion,t.supStreet];return a=a.filter(function(e){return!!e}),a.join(", ")},t=function(e){var t;try{t=JSON.parse(e)}catch(r){return console.log("tbl parse address",r),console.log("dscr",e),""}return t.supComment},r=function(e){var t;try{t=JSON.parse(e)}catch(r){return console.log("tbl parse address",r),""}if(!t.cusRegions)return"";var a=t.cusRegions.join(", ");return t.cusConds&&(a+=" ("+t.cusConds+")"),a};return{calcAddrFromDescription:e,calcCommentFromDescription:t,calcOutGeoFromDescription:r}};e.module("myApp.splrAddressHelper",[]).factory("splrAddressHelper",[t])}(window.angular),function(e){var t={},r=function(e,r,a){var i=function(e){return t[e.local_name]=e,e},n=function(a){return t[a]?e.when(t[a]):r.sendGet("/territory/get-agglo-by-local-name",{local_name:a}).then(i)},s=function(a){var n;for(var s in t)t[s].id===a&&(n=t[s]);return n?e.when(n):r.sendGet("/territory/get-agglo-by-id",{id:a}).then(i)},o=function(n,s){var o=[];for(var l in t)o.push(t[l]);var c=a.findAggloByCoords(o,s,n);return c?e.when(c):r.sendGet("/territory/get-agglo-by-coords",{ll:n+","+s}).then(i)};return{retrieveByLocalName:n,retrieveByCoords:o,retrieveById:s}};e.module("myApp.aggloItemRepo",["myApp.apimas","myApp.geoHelper"]).factory("aggloItemRepo",["$q","apimas","geoHelper",r])}(window.angular),function(e){var t={articles:[{ttl:"Укрепление ресниц: 7 простых шагов",lnk:"http://blog.miskra.ru/post/%D1%83%D0%BA%D1%80%D0%B5%D0%BF%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%80%D0%B5%D1%81%D0%BD%D0%B8%D1%86/",rubrics:["lashesStrong","extEyelashes","lashesAll","lashesExtClassic","lashesCorrection","lashesModel"]},{ttl:"10 этапов домашнего ламинирования волос",lnk:"http://blog.miskra.ru/post/%D0%B4%D0%BE%D0%BC%D0%B0%D1%88%D0%BD%D0%B5%D0%B5-%D0%BB%D0%B0%D0%BD%D0%BC%D0%B8%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B2%D0%BE%D0%BB%D0%BE%D1%81/",rubrics:["laminationHair","highlightHair","toningHair","colorationHair","settingHair"]},{ttl:"Модные стрижки 2016",lnk:"http://blog.miskra.ru/post/%D0%BC%D0%BE%D0%B4%D0%BD%D1%8B%D0%B5-%D1%81%D1%82%D1%80%D0%B8%D0%B6%D0%BA%D0%B8-2016/",rubrics:["careHairCut","ladderHairCut","poluboksHairCut","womanHairCut","shortHairCut","modelHairCut","bobHairCut","cutHair","pixieHairCut","cascadeHairCut","middleHairCut"]},{ttl:"Профессиональный макияж для всех",lnk:"http://blog.miskra.ru/post/%D0%BF%D1%80%D0%BE%D1%84%D0%B5%D1%81%D1%81%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9-%D0%BC%D0%B0%D0%BA%D0%B8%D1%8F%D0%B6-%D0%B4%D0%BB%D1%8F-%D0%B2%D1%81%D0%B5%D1%85/",rubrics:["makeupProfi","makeup3d","makeupEye","makeupEyelid","makeupProm","makeupHoliday","makeupHollywood","makeupBusiness","makeupEvening","makeupDaytime","makeupWedding","makeupUsual"]},{ttl:"Секреты возрастного макияжа для мудрых женщин",lnk:"http://blog.miskra.ru/post/%D1%81%D0%B5%D0%BA%D1%80%D0%B5%D1%82%D1%8B-%D0%B2%D0%BE%D0%B7%D1%80%D0%B0%D1%81%D1%82%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BC%D0%B0%D0%BA%D0%B8%D1%8F%D0%B6%D0%B0-%D0%B4%D0%BB%D1%8F-%D0%BC%D1%83%D0%B4%D1%80%D1%8B%D1%85-%D0%B6%D0%B5%D0%BD%D1%89%D0%B8%D0%BD/",rubrics:["makeupAge","makeupEast","makeupEye","makeupEyelid","makeupHoliday","makeupBusiness","makeupEvening","makeupDaytime","makeupUsual"]}]},r=function(){return{calcByRubricId:function(e){return t.articles.filter(function(t){return t.rubrics.indexOf(e)>=0})}}};e.module("myApp.blogRepo",[]).factory("blogRepo",[r])}(window.angular),function(e){var t=function(e,t){return{retrieveData:function(e,r){return t.loadFirm(e,r)}}};e.module("myApp.firmItemRepo",["myApp.firmItemFactory"]).factory("firmItemRepo",["$q","firmItemFactory",t])}(window.angular),function(e){var t=function(e,t){var r={result:{},total:0},a={hair:{name:"Парикмахерские"},lashes:{name:"Услуги по уходу за ресницами / бровями"},nail:{name:"Ногтевые студии"},makeup:{name:"Услуги визажиста"}},i={};return{getData:function(){return r},retrieveData:function(n,s,o){return n===i.lng&&s===i.lat&&o===i.servGroupId?e.when(r):a[o]?t.loadFirmsByPoint(a[o].name,n,s,3e3).then(function(e){return r.result=e.result,r.total=e.total,i.lng=n,i.lat=s,i.servGroupId=o,r}):e.reject(new Error("noSuchSpec: "+o))}}};e.module("myApp.firmListRepo",["myApp.firmListFactory"]).factory("firmListRepo",["$q","firmListFactory",t])}(window.angular),function(e){function t(e){e.sort(function(e,t){return e.local_name>t.local_name?1:-1});for(var t=[],r=["moscow","spb","novosibirsk","ekaterinburg","n_novgorod","kazan","chelyabinsk","omsk"],a=0;a<e.length;a+=1)for(var i=e[a],n=0;n<r.length;n+=1)i.inter_code===r[n]&&(t[n]=i,e.splice(a--,1));for(var s=t.length-1;s>=0;s-=1)e.splice(0,0,t[s])}var r={arr_geo_agglo:[],is_loaded:!1},a=function(a,i){var n=function(a){r.arr_geo_agglo.length=0;var i=a;t(i),e.extend(r.arr_geo_agglo,i),r.is_loaded=!0},s=function(){return r.is_loaded?a.when(r.arr_geo_agglo):i.sendGet("/territory/get-agglos",{}).then(function(e){return n(e.arr_geo_agglo),e.arr_geo_agglo})};return{retrieveData:s}};e.module("myApp.geoAggloRepo",["myApp.apimas"]).factory("geoAggloRepo",["$q","apimas",a])}(window.angular),function(e){var t={arr_geo_region:[{city:1,stations:[[251,"Берёзовая роща"],[241,"Гагаринская"],[240,"Заельцовская"],[852,"Золотая нива"],[242,"Красный проспект"],[250,"Маршала Покрышкина"],[244,"Октябрьская"],[248,"Площадь Гарина-Михайловского"],[243,"Площадь Ленина"],[247,"Площадь Маркса"],[245,"Речной вокзал"],[249,"Сибирская"],[246,"Студенческая"]],districts:[[151,"Дзержинский"],[152,"Железнодорожный"],[150,"Заельцовский"],[153,"Калининский"],[154,"Кировский"],[155,"Ленинский"],[156,"Октябрьский"],[157,"Первомайский"],[158,"Советский"],[159,"Центральный"]]},{city:2,stations:[],districts:[[263,"Кировский"],[264,"Ленинский"],[265,"Октябрьский"],[266,"Советский"],[267,"Центральный"]]},{city:3,stations:[],districts:[[313,"Кировский"],[315,"Ленинский"],[314,"Октябрьский"],[316,"Советский"]]},{city:4,stations:[],districts:[[399,"Железнодорожный"],[402,"Индустриальный"],[400,"Ленинский"],[403,"Октябрьский"],[401,"Центральный"]]},{city:5,stations:[],districts:[[323,"Заводский"],[326,"Кировский"],[324,"Ленинский"],[327,"Рудничный"],[325,"Центральный"]]},{city:6,stations:[],districts:[[429,"Заводской"],[432,"Кузнецкий"],[430,"Куйбышевский"],[433,"Новоильинский"],[431,"Орджоникидзевский"],[434,"Центральный"]]},{city:7,stations:[],districts:[[206,"Железнодорожный"],[200,"Кировский"],[201,"Ленинский"],[202,"Октябрьский"],[204,"Свердловский"],[203,"Советский"],[205,"Центральный"]]},{city:8,stations:[],districts:[[388,"Кировский"],[390,"Ленинский"],[389,"Советский"],[391,"Трусовский"]]},{city:9,stations:[[1775,"Ботаническая"],[266,"Геологическая"],[264,"Динамо"],[262,"Машиностроителей"],[265,"Площадь 1905 года"],[260,"Проспект Космонавтов"],[261,"Уралмаш"],[263,"Уральская"],[2954,"Чкаловская"]],districts:[[146,"Верх-Исетский"],[149,"Железнодорожный"],[147,"Кировский"],[145,"Ленинский"],[148,"Октябрьский"],[143,"Орджоникидзевский"],[144,"Чкаловский"]]},{city:11,stations:[],districts:[[601,"Ершовский"],[271,"Ленинский"],[273,"Октябрьский"],[272,"Правобережный"],[274,"Свердловский"]]},{city:15,stations:[],districts:[[219,"Калининский"],[220,"Курчатовский"],[221,"Ленинский"],[222,"Металлургический"],[223,"Советский"],[224,"Тракторозаводский"],[225,"Центральный"]]},{city:19,stations:[[229,"Автозаводская"],[239,"Буревестник"],[238,"Бурнаковская"],[3565,"Горьковская"],[231,"Двигатель Революции"],[232,"Заречная"],[237,"Канавинская"],[227,"Кировская"],[228,"Комсомольская"],[233,"Ленинская"],[235,"Московская"],[226,"Парк Культуры"],[230,"Пролетарская"],[234,"Чкаловская"]],
districts:[[170,"Автозаводский"],[171,"Канавинский"],[172,"Ленинский"],[173,"Московский"],[174,"Нижегородский"],[175,"Приокский"],[176,"Советский"],[177,"Сормовский"]]},{city:21,stations:[[3850,"Авиастроительная"],[270,"Аметьево"],[271,"Горки"],[850,"Козья слобода"],[267,"Кремлёвская"],[268,"Площадь Габдуллы Тукая"],[620,"Проспект Победы"],[3851,"Северный вокзал"],[269,"Суконная слобода"],[3852,"Яшьлек"]],districts:[[178,"Авиастроительный"],[179,"Вахитовский"],[180,"Кировский"],[181,"Московский"],[182,"Ново-Савиновский"],[183,"Приволжский"],[184,"Советский"]]},{city:23,stations:[],districts:[[212,"Западный"],[214,"Карасунский"],[213,"Прикубанский"],[215,"Центральный"]]},{city:32,stations:[[1,"Авиамоторная"],[2,"Автозаводская"],[3,"Академическая"],[4,"Александровский сад"],[5,"Алексеевская"],[3569,"Алма-Атинская"],[6,"Алтуфьево"],[7,"Аннино"],[8,"Арбатская"],[9,"Аэропорт"],[10,"Бабушкинская"],[11,"Багратионовская"],[12,"Баррикадная"],[13,"Бауманская"],[14,"Беговая"],[15,"Белорусская"],[16,"Беляево"],[17,"Бибирево"],[18,"Библиотека имени Ленина"],[20,"Борисово"],[21,"Боровицкая"],[22,"Ботанический сад"],[23,"Братиславская"],[24,"Бульвар адмирала Ушакова"],[25,"Бульвар Дмитрия Донского"],[145,"Бульвар Рокоссовского"],[26,"Бунинская аллея"],[27,"Варшавская"],[28,"ВДНХ"],[29,"Владыкино"],[30,"Водный стадион"],[31,"Войковская"],[32,"Волгоградский проспект"],[33,"Волжская"],[34,"Волоколамская"],[35,"Воробьёвы горы"],[38,"Выставочная"],[36,"Выставочный центр (монорельс)"],[37,"Выхино"],[39,"Динамо"],[40,"Дмитровская"],[41,"Добрынинская"],[42,"Домодедовская"],[2247,"Достоевская"],[43,"Дубровка"],[4511,"Жулебино"],[1946,"Зябликово"],[44,"Измайловская"],[46,"Калужская"],[47,"Кантемировская"],[48,"Каховская"],[49,"Каширская"],[50,"Киевская"],[51,"Китай-город"],[52,"Кожуховская"],[53,"Коломенская"],[54,"Комсомольская"],[55,"Коньково"],[487,"Красногвардейская"],[56,"Краснопресненская"],[57,"Красносельская"],[58,"Красные ворота"],[59,"Крестьянская застава"],[60,"Кропоткинская"],[61,"Крылатское"],[62,"Кузнецкий мост"],[63,"Кузьминки"],[64,"Кунцевская"],[65,"Курская"],[66,"Кутузовская"],[67,"Ленинский проспект"],[4512,"Лермонтовский проспект"],[68,"Лубянка"],[69,"Люблино"],[70,"Марксистская"],[71,"Марьина роща"],[72,"Марьино"],[73,"Маяковская"],[74,"Медведково"],[75,"Международная"],[76,"Менделеевская"],[648,"Митино"],[77,"Молодёжная"],[650,"Мякинино"],[78,"Нагатинская"],[79,"Нагорная"],[80,"Нахимовский проспект"],[81,"Новогиреево"],[3562,"Новокосино"],[82,"Новокузнецкая"],[83,"Новослободская"],[19,"Новоясеневская"],[84,"Новые Черёмушки"],[85,"Октябрьская"],[86,"Октябрьское поле"],[87,"Орехово"],[88,"Отрадное"],[89,"Охотный ряд"],[90,"Павелецкая"],[91,"Парк культуры"],[92,"Парк Победы"],[93,"Партизанская"],[94,"Первомайская"],[95,"Перово"],[96,"Петровско-Разумовская"],[97,"Печатники"],[98,"Пионерская"],[99,"Планерная"],[101,"Площадь Ильича"],[102,"Площадь Революции"],[103,"Полежаевская"],[104,"Полянка"],[105,"Пражская"],[106,"Преображенская площадь"],[107,"Пролетарская"],[108,"Проспект Вернадского"],[109,"Проспект Мира"],[488,"Профсоюзная"],[110,"Пушкинская"],[3568,"Пятницкое шоссе"],[111,"Речной вокзал"],[112,"Рижская"],[113,"Римская"],[114,"Рязанский проспект"],[115,"Савёловская"],[116,"Свиблово"],[117,"Севастопольская"],[118,"Семёновская"],[119,"Серпуховская"],[626,"Славянский бульвар"],[120,"Смоленская"],[121,"Сокол"],[122,"Сокольники"],[123,"Спортивная"],[489,"Строгино"],[124,"Студенческая"],[125,"Сухаревская"],[126,"Сходненская"],[127,"Таганская"],[128,"Тверская"],[129,"Театральная"],[130,"Текстильщики"],[131,"Телецентр (монорельс)"],[132,"Тёплый Стан"],[133,"Тимирязевская"],[134,"Тимирязевская (монорельс)"],[135,"Третьяковская"],[4516,"Тропарёво"],[136,"Трубная"],[137,"Тульская"],[138,"Тургеневская"],[139,"Тушинская"],[140,"Улица 1905 года"],[141,"Улица Академика Королёва (монорельс)"],[142,"Улица Академика Янгеля"],[143,"Улица Горчакова"],[144,"Улица Милашенкова (монорельс)"],[146,"Улица Сергея Эйзенштейна (монорельс)"],[147,"Улица Скобелевская"],[148,"Улица Старокачаловская"],[149,"Университет"],[150,"Филёвский парк"],[151,"Фили"],[152,"Фрунзенская"],[153,"Царицыно"],[154,"Цветной бульвар"],[155,"Черкизовская"],[156,"Чертановская"],[157,"Чеховская"],[158,"Чистые пруды"],[159,"Чкаловская"],[160,"Шаболовская"],[1945,"Шипиловская"],[161,"Шоссе Энтузиастов"],[162,"Щёлковская"],[163,"Щукинская"],[164,"Электрозаводская"],[165,"Юго-Западная"],[166,"Южная"],[167,"Ясенево "]],districts:[[89,"Академический"],[28,"Алексеевский"],[29,"Алтуфьевский"],[2,"Арбат"],[12,"Аэропорт"],[30,"Бабушкинский"],[3,"Басманный"],[13,"Беговой"],[14,"Бескудниковский"],[31,"Бибирево"],[73,"Бирюлёво Восточное"],[74,"Бирюлёво Западное"],[45,"Богородское"],[75,"Братеево"],[32,"Бутырский"],[46,"Вешняки"],[101,"Внуково"],[15,"Войковский"],[16,"Восточное Дегунино"],[48,"Восточное Измайлово"],[47,"Восточный"],[61,"Выхино-Жулебино"],[90,"Гагаринский"],[17,"Головинский"],[49,"Гольяново"],[76,"Даниловский"],[18,"Дмитровский"],[77,"Донской"],[102,"Дорогомилово"],[4,"Замоскворечье"],[19,"Западное Дегунино"],[91,"Зюзино"],[78,"Зябликово"],[50,"Ивановское"],[51,"Измайлово"],[62,"Капотня"],[565,"Кожухово"],[92,"Коньково"],[20,"Коптево"],[52,"Косино-Ухтомский"],[93,"Котловка"],[5,"Красносельский"],[103,"Крылатское"],[124,"Крюково"],[63,"Кузьминки"],[104,"Кунцево"],[114,"Куркино"],[21,"Левобережный"],[64,"Лефортово"],[33,"Лианозово"],[94,"Ломоносовский"],[34,"Лосиноостровский"],[65,"Люблино"],[35,"Марфино"],[36,"Марьина Роща"],[66,"Марьино"],[122,"Матушкино"],[53,"Метрогородок"],[6,"Мещанский"],[115,"Митино"],[105,"Можайский"],[22,"Молжаниновский"],[79,"Москворечье-Сабурово"],[81,"Нагатино-Садовники"],[80,"Нагатинский Затон"],[82,"Нагорный"],[67,"Некрасовка"],[68,"Нижегородский"],[106,"Ново-Переделкино"],[54,"Новогиреево"],[55,"Новокосино"],[95,"Обручевский"],[83,"Орехово-Борисово"],[84,"Орехово-Борисово Южное"],[37,"Останкинский"],[38,"Отрадное"],[107,"Очаково-Матвеевское"],[123,"Панфиловский"],[56,"Перово"],[69,"Печатники"],[116,"Покровское-Стрешнево"],[57,"Преображенское"],[7,"Пресненский"],[108,"Проспект Вернадского"],[109,"Раменки"],[39,"Ростокино"],[70,"Рязанский"],[4381,"Савёлки"],[23,"Савёловский"],[40,"Свиблово"],[96,"Северное Бутово"],[58,"Северное Измайлово"],[42,"Северное Медведково"],[117,"Северное Тушино"],[41,"Северный"],[24,"Сокол"],[59,"Соколиная Гора"],[60,"Сокольники"],[110,"Солнцево"],[118,"Строгино"],[8,"Таганский"],[9,"Тверской"],[71,"Текстильщики"],[97,"Тёплый Стан"],[25,"Тимирязевский"],[111,"Тропарёво-Никулино"],[112,"Филёвский Парк"],[113,"Фили-Давыдково"],[10,"Хамовники"],[26,"Ховрино"],[27,"Хорошевский"],[119,"Хорошёво-Мнёвники"],[88,"Царицыно"],[98,"Черёмушки"],[85,"Чертаново Северное"],[86,"Чертаново Центральное"],[87,"Чертаново Южное"],[120,"Щукино"],[99,"Южное Бутово"],[43,"Южное Медведково"],[121,"Южное Тушино"],[72,"Южнопортовый"],[11,"Якиманка"],[44,"Ярославский"],[100,"Ясенево"]]},{city:38,stations:[[184,"Автово"],[652,"Адмиралтейская"],[170,"Академическая"],[181,"Балтийская"],[653,"Бухарестская"],[205,"Василеостровская"],[178,"Владимирская"],[492,"Волковская"],[174,"Выборгская"],[194,"Горьковская"],[206,"Гостиный двор"],[169,"Гражданский проспект"],[168,"Девяткино"],[220,"Достоевская"],[209,"Елизаровская"],[493,"Звенигородская"],[202,"Звёздная"],[183,"Кировский завод"],[214,"Комендантский проспект"],[216,"Крестовский остров"],[203,"Купчино"],[223,"Ладожская"],[185,"Ленинский проспект"],[173,"Лесная"],[221,"Лиговский проспект"],[210,"Ломоносовская"],[207,"Маяковская"],[654,"Международная"],[201,"Московская"],[198,"Московские ворота"],[182,"Нарвская"],[195,"Невский проспект"],[222,"Новочеркасская"],[651,"Обводный канал"],[212,"Обухово"],[189,"Озерки"],[200,"Парк Победы"],[187,"Парнас"],[193,"Петроградская"],[191,"Пионерская"],[208,"Площадь Александра Невского"],[177,"Площадь Восстания"],[175,"Площадь Ленина"],[172,"Площадь Мужества"],[171,"Политехническая"],[204,"Приморская"],[211,"Пролетарская"],[224,"Проспект Большевиков"],[186,"Проспект Ветеранов"],[188,"Проспект Просвещения"],[179,"Пушкинская"],[213,"Рыбацкое"],[219,"Садовая"],[196,"Сенная площадь"],[619,"Спасская"],[218,"Спортивная"],[215,"Старая Деревня"],[180,"Технологический институт"],[190,"Удельная"],[225,"Улица Дыбенко "],[197,"Фрунзенская"],[176,"Чернышевская"],[192,"Чёрная речка"],[217,"Чкаловская"],[199,"Электросила"]],districts:[[125,"Адмиралтейский"],[126,"Василеостровский"],[127,"Выборгский"],[128,"Калининский"],[129,"Кировский"],[130,"Колпинский"],[131,"Красногвардейский"],[132,"Красносельский"],[133,"Кронштадтский"],[134,"Курортный"],[135,"Московский"],[136,"Невский"],[137,"Петроградский"],[138,"Петродворцовый"],[139,"Приморский"],[140,"Пушкинский"],[141,"Фрунзенский"],[142,"Центральный"]]},{city:46,stations:[],districts:[[318,"Восточный"],[319,"Западный"]]},{city:49,stations:[],districts:[[249,"Варавино-Фактория"],[252,"Исакогорский"],[255,"Ломоносовский"],[250,"Маймаксанский"],[253,"Майская Горка"],[256,"Октябрьский"],[251,"Северный"],[254,"Соломбальский"],[257,"Цигломенский"]]},{city:67,stations:[[1779,"Абай"],[1782,"Алатау"],[1778,"Алмалы"],[1780,"Байконур"],[1777,"Жибек Жолы"],[4518,"Москва"],[1776,"Райымбек батыр"],[4519,"Сайран"],[1781,"Театр имени Мухтара Ауэзова"]],districts:[[4451,"Алатауский"],[543,"Алмалинский"],[544,"Ауэзовский"],[545,"Бостандыкский"],[546,"Жетысуский"],[547,"Медеуский"],[4452,"Наурызбайский"],[548,"Турксибский"]]}]};e.module("myApp.ArrGeoRegion",[]).value("ArrGeoRegion",t)}(window.angular),function(e){var t={arr_geo_region:[],is_loaded:!1},r=function(r,a){var i=function(r){t.arr_geo_region.length=0,e.extend(t.arr_geo_region,r),t.is_loaded=!0};return{getData:function(){return t},retrieveData:function(){return t.is_loaded?r.when(t.arr_geo_region):(i(a.arr_geo_region),r.when(a.arr_geo_region))},isStations:function(e){if(!t[e])return!1;var r=t[e].stations;return!!(r&&r.length>0)}}};e.module("myApp.geoRegionRepo",["myApp.ArrGeoRegion"]).factory("geoRegionRepo",["$q","ArrGeoRegion",r])}(window.angular),function(e){var t={coords:{lat:null,lng:null}},r=function(e,r){return{retrieveByIp:function(){return t.coords.lng&&t.coords.lat?e.when(t.coords):r.getByIp().then(function(e){return t.coords.lng=e.longitude,t.coords.lat=e.latitude,t.coords})},retrieveFromDevice:function(){return t.coords.lng&&t.coords.lat?e.when(t.coords):r.getCurCoords().then(function(e){return t.coords.lat=e.latitude,t.coords.lng=e.longitude,t.coords})}}};e.module("myApp.locRepo",["myApp.geolocFactory"]).factory("locRepo",["$q","geolocFactory",r])}(window.angular),function(e){var t="location_permission",r=null,a={is_perm_checked:!1},i=function(e,i){var n=function(){r=!0,i.writeToStorage(t,{id:0,is_allowed:!0})},s=function(e){return a.is_perm_checked=!0,r=!(!e||e.is_allowed!==!0)};return{getData:function(){return a},cleanLocationPermission:function(){r=!1,i.delFromStorage(t,{id:0})},saveLocationPermission:n,checkLocationPermission:function(){if(a.is_perm_checked){var n=e.defer();return n.resolve(r),n.promise}return i.readFromStorage(t,{id:0},!1).then(s)}}};e.module("myApp.permRepo",["myApp.localDb"]).factory("permRepo",["$q","localDb",i])}(window.angular),function(e){var t={arr_prtf_work:[],is_loaded:!1},r=function(r,a){var i=function(r){t.arr_prtf_work.length=0,e.forEach(r,function(e){t.arr_prtf_work.push(e)}),t.is_loaded=!0},n=function(e,t){return a.sendGet("/work/get-portfolio",{geo_district_id:t,serv_rubric_id:e}).then(function(e){var t=e.arr_prtf_work.slice(0,99);return i(t),t})};return{retrieveData:n}};e.module("myApp.prtfRepo",["myApp.apimas"]).factory("prtfRepo",["$q","apimas",r])}(window.angular),function(e){var t={arr_serv_group:[{id:"hair",serv_area_id:"beauty",lang:"ru",name:"Парикмахер",description:null,tag1:null,tag2:null},{id:"nail",serv_area_id:"beauty",lang:"ru",name:"Ногти",description:null,tag1:null,tag2:null},{id:"lashes",serv_area_id:"beauty",lang:"ru",name:"Ресницы",description:null,tag1:null,tag2:null},{id:"makeup",serv_area_id:"beauty",lang:"ru",name:"Визажист",description:null,tag1:null,tag2:null}]},r=function(e,r){var a=function(){return e.when(t.arr_serv_group)},i=function(e){return e.map(function(e){return e.id})},n=function(e){return r.sendGet("/rubric/get-groups",{ids:e.join("__"),lang:"ru"})},s=function(e){return console.log("combine",e),t.arr_serv_group.forEach(function(t){e.forEach(function(e){e.id===t.id&&(t.arr_serv_rubric=e.arr_serv_rubric)})}),t.arr_serv_group},o=function(){return a().then(function(e){return i(e)}).then(function(e){return n(e)}).then(function(e){return s(e.arr_serv_group)})};return{retrieveData:a,retrieveWithRubrics:o}};e.module("myApp.servGroupRepo",["myApp.apimas"]).factory("servGroupRepo",["$q","apimas",r])}(window.angular),function(e,t){var r={},a=function(a,i){var n=function(e,r){var a=r.map(function(e){return e.id}),n={method:"GET",url:t.APIMAS_ENDPOINT+"/rubric/get-serv-stat",params:{ids_serv_group:a.join("__"),lang:"ru",geo_district_id:e}};return i(n)},s=function(e,t){var r=e.filter(function(e){return e.id===t})[0];return r?r.name:(console.log("error: calcGroupName: no servGroupId",t),null)},o=function(t,r){e.forEach(t,function(e){e.serv_group_name=s(r,e.serv_group_id)}),console.log("arrSRS",t)};return{retrieveData:function(e,t){var i=r["city"+e];return i?a.when(i):n(e,t).then(function(a){return o(a.data.arr_serv_rubric_stat,t),r["city"+e]=a.data,r["city"+e]})}}};e.module("myApp.servStatRepo",[]).factory("servStatRepo",["$q","$http",a])}(window.angular,window.APPCONF),function(e,t,r){var a={exp:null,uid:null,perms:null,is_loaded:!1},i=function(t){var r="",a=t.split(".")[1];if(!a)return null;try{r=e.atob(a)}catch(i){return console.log(i),null}var n;try{n=JSON.parse(r)}catch(i){return console.log(i),null}return n},n=function(e,t){var n="sess",s=0,o=function(e){a.token=e.token,a.exp=e.exp,a.perms=e.perms,a.uid=e.uid,a.is_supplier=e.is_supplier,a.is_editor=e.is_editor,a.is_moder=e.is_moder,a.avatar=e.avatar,a.fname=e.fname,a.lname=e.lname,a.is_loaded=!0},l=function(){console.log("no auth: clean data"),a.exp=null,a.perms=null,a.uid=null,a.is_supplier=!1,a.is_editor=!1,a.is_moder=!1,a.avatar=null,a.fname=null,a.lname=null,a.is_loaded=!0};return{getData:function(){return a},retrieveSess:function(){if(a.is_loaded)return e.when();if(r.getAuthUser){var c=e.defer();r.getAuthUser(function(e,t){e?c.reject(e.message):c.resolve(t)});var p=c.promise;return p.then(function(e){console.log("setDataAuthUser",e),o({uid:e.id,is_supplier:!1,is_editor:!1,is_moder:!1,fname:e.first_name,lname:e.last_name,avatar:e.photo_50})}),p}return t.readFromStorage(n,{id:s},!1).then(function(t){if(!t||!t.token)return l(),null;var r=i(t.token);return r?(o({uid:r.uid,token:t.token,is_supplier:-1===[1,2,3].indexOf(r.uid),is_editor:[2,3].indexOf(r.uid)>=0,is_moder:[2].indexOf(r.uid)>=0}),null):e.reject("Ошибка авторизации: неправильный токен")})},updateSess:function(r){var a=i(r);return a?(o({uid:a.uid,token:r,is_supplier:-1===[1,2,3].indexOf(a.uid),is_editor:[2,3].indexOf(a.uid)>=0,is_moder:[2].indexOf(a.uid)>=0}),t.writeToStorage(n,{id:s,token:r})):e.reject("Ошибка авторизации: неправильный токен")},deleteSess:function(){return l(),t.delFromStorage(n,{id:s})}}};t.module("myApp.sessRepo",["myApp.localDb"]).factory("sessRepo",["$q","localDb",n])}(window,window.angular,window.snns),function(e){var t={url:""},r=function(){return t};e.module("myApp.statePrev",[]).factory("statePrev",[r])}(window.angular),function(e){var t=function(e,t){var r="/master/get-profile",a=function(e){var a={id:e};return t.sendGet(r,a)};return{retrieveData:a}};e.module("myApp.supItemRepo",["myApp.apimas"]).factory("supItemRepo",["$q","apimas",t])}(window.angular),function(e){var t={arr_supplier:[]},r=function(r,a,i){var n=function(){t.arr_supplier.length=0},s=function(r){e.forEach(r,function(e){e.arr_serv_work=[],e.arr_master_serv=[],t.arr_supplier.push(e)})},o=function(e,t,a,o){var l={serv_rubric_id:e,geo_district_id:t};return a&&(l.req_name=a),o&&(l.limit=o),i.sendGet("/master/get-by-rubric",l).then(function(e){var t=e.arr_master_detail;return t?(n(),s(t),t):r.reject("no arr_master_detail")})};return{retrieveByRubric:o,cleanArrSupplier:n}};e.module("myApp.supListRepo",["myApp.apimas"]).factory("supListRepo",["$q","$window","apimas",r])}(window.angular),function(e){var t=function(e,t){var r="commentform";if(window.VK&&window.VK.Observer){var a=function(t,r,a){e.warn("newComment","from a comment form",{num:t,last_comment:r,date:a})};window.VK.Observer.subscribe("widgets.comments.new_comment",a)}var i=function(t,a,i){if(!a||!i)throw new Error("commentForm: required pageId and pageUrl");if(e.info("pageUrl",decodeURI(i)),e.info("pageId",a),!window.VK||!window.VK.Widgets||!window.VK.Widgets.Comments)return void e.info("noVK",window.VK);var n=document.createElement("div");n.id=r+a,t.appendChild(n),window.VK.Widgets.Comments(n.id,{height:0,limit:10,attach:!1,autoPublish:1,mini:0,norealtime:1,pageUrl:i},a)};return{restrict:"A",link:function(e,r,a){if(!a.subjectId)throw new Error("required subjectId");var n=t.toHashCode(a.subjectId);i(r[0],n,a.subjectUrl)}}};e.module("myApp.appCommentForm",["myApp.hprFactory"]).directive("appCommentForm",["lgr","hprFactory",t])}(window.angular),function(e,t){var r=function(e){e.is_web=!!t.OAUTH_VKN_ID},a=function(){return{restrict:"A",templateUrl:"drct/app-footer/app-footer.tpl.html",controller:["$scope",r]}};e.module("myApp.appFooter",["myApp.appInformer"]).directive("appFooter",[a])}(window.angular,window.APPCONF),function(e){var t=function(){return{restrict:"A",templateUrl:"drct/app-informer/app-informer.tpl.html"}};e.module("myApp.appInformer",[]).directive("appInformer",[t])}(window.angular),function(e){var t=function(){return{restrict:"A",templateUrl:"drct/app-share-block/app-share-block.tpl.html",scope:{title:"@",permalink:"@",pageImage:"@"}}};e.module("myApp.appShareBlock",[]).directive("appShareBlock",[t])}(window.angular),function(e){var t=function(){return{restrict:"A",scope:{arrSearchItem:"=",aggloName:"=",specName:"=",rubricName:"=",rviewId:"=",rviewName:"=",splrId:"=",splrName:"="},templateUrl:"drct/app-toolbar/app-toolbar.tpl.html"}};e.module("myApp.appToolbar",[]).directive("appToolbar",[t])}(window.angular),function(e){var t=function(e,t){var r="vklike";if(window.VK&&window.VK.Observer){var a=function(t){console.log("new like",t),e.sendRegFree({link:"New like: "+(new Date).toString()+": "+t}).then(function(){console.log("like reg-free success")})["catch"](function(e){console.log("like reg-free error"),console.log(e)})};window.VK.Observer.subscribe("widgets.like.liked",a)}var i=function(e,a,i,n,s,o){if(!a||!i)throw new Error("required pageId and pageUrl");if(console.log("pageUrl",decodeURI(i)),console.log("pageId",a),console.log("pageImage",n),!window.VK||!window.VK.Widgets||!window.VK.Widgets.Like)return void console.log("no vklib like",window.VK);if(t.isMobileDevice())return void console.log("no VK likes for mobile devices: bad auth");var l={type:"button",height:24,url:i,pageUrl:i,title:s,pageTitle:s,description:o,pageDescription:o};n&&(l.image=n,l.pageImage=n);var c=document.createElement("div");c.id=r+a,e.appendChild(c),window.VK.Widgets.Like(c.id,l,a)},n=function(e,r,a){if(console.log("appVkLike",r[0]),!a.subjectId)throw new Error("required subjectId");var n=t.toHashCode(a.subjectId);i(r[0],n,a.subjectUrl,a.pageImage,a.pageTitle,a.pageDescription)};return{restrict:"A",link:n}};e.module("myApp.appVkLike",["myApp.apimas","myApp.hprFactory"]).directive("appVkLike",["apimas","hprFactory",t])}(window.angular),function(e){var t=function(e,t){var r=function(r,a){var i=document.createElement("img");i.onerror=function(e){i.onerror=null,i.src="data:image/jpeg;base64,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WX73f3qr3oAcylGwRyKmtQcse3ShGWYBJPvdj61YVQoAAwKAGyNsjJ79qo1NcSbm2joKjVSzADqaALNsuEJ9ampFAVQB0FLQAHoaKD0NFABRRRQAVDPHuXcOo/lU1FAGfVmCXcNjde3vUc8W07h909vSoqANCioIp93yvwfX1qegAooooAKKKKACiiigAqCaHd8yj5vT1qeigDO/nU/2hvL2/wAXrST7N3y/e74qKgBKtW0eBvPU9Kihi8w5P3R+tXKACiiigAPQ0UHoaKACiiigAooooACMgg9KqSwFPmXlf5VbooAz6kjnZBg8rUsluG5Xg+lV2VkOGBFAFxZUfoefQ0+s408SOvRjQBeoqoLlx6H8KX7S390UAWqKqG5c9ABTGldurGgC28qJ1P4VXknZuF4H61D9acqsxwoyaAG1LFCZOTwv86kjtwOX5PpVigBAAowBgCloooAKKKKAA9DRQehooAKKKKACiiigAooooAKQgEYIyKWigCFrZD93K1EbZx0wat0UAUTE46qabtPTBrQooAoiNyeFNPFs564H41booAhW2UdSTUoAUYAwKWigAooooAKKKKACiiigAPQ0UHoaKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAD0NFFFAH//Z",t.sendReportNoImage({id:r.item.id}),console.log("image error",r.item.id,e)},i.className="ximg__img";var n=document.createElement("a");n.href=e.href("byt.mediaItem",{media_id:r.item.id});var s=r.wrapElemId;s&&(n.onclick=function(){return window.location.hash=s,!0});var o=document.createElement("div");o.className="ximg",n.appendChild(i),o.appendChild(n),a[0].appendChild(o),r.$watch("isShowImage",function(e){e&&(i.src=r.item.preview_img)})};return{restrict:"A",scope:{item:"=appItem",isShowImage:"=appIsShowImage",wrapElemId:"=appWrapElemId"},link:r}};e.module("myApp.appGalleryItem",["myApp.apimas"]).directive("appGalleryItem",["$state","apimas",t])}(window.angular),function(e){var t="data:image/png;base64,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",r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=",a=function(){var e=function(e,a,i,n,s,o){var l=function(){return new a.Icon.Default({iconUrl:t,shadowUrl:r,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},c=l(),p=a.map(i,{center:[s,n],zoom:o});a.tileLayer("https:////{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{detectRetina:!0,reuseTiles:!0,attribution:'© <a target="_blank" href="//www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | <a target="_blank" href="http://api.2gis.ru/">Предоставлено 2ГИС</a>'}).addTo(p),p.on("moveend",function(){var t=p.getCenter(),r=p.getZoom();e.mapMove()(t.lng,t.lat,r,n,s,o),n=t.lng,s=t.lat,o=r});var d=function(e){var t=new a.Marker([e.lat,e.lng],{icon:c,title:e.title});return t.bindPopup(e.message),t},u=a.layerGroup();u.addTo(p);var m=function(e){console.log(e),u.clearLayers();for(var t in e)u.addLayer(d(e[t]))};e.$watch("mapMarkers",m);var g=p.getCenter();e.mapMove()(g.lng,g.lat,p.getZoom(),null,null,null)},a=function(t,r){if(!t.startLng||!t.startLat||!t.startZoom)throw new Error("required: coords and zoom");if(!t.mapMove)throw new Error("required mapMove");if("function"!=typeof t.mapMove)throw new Error("required mapMove function");var a=t.startLng,i=t.startLat,n=t.startZoom;e(t,window.L,r[0],a,i,n)};return{restrict:"A",scope:{startLng:"@",startLat:"@",startZoom:"@",mapMarkers:"=",mapMove:"&"},link:a}};e.module("myApp.lflMap",[]).directive("lflMap",[a])}(window.angular),function(e){var t=function(e,t){e.saveHash=function(e){t.hash(e)}},r=function(){return{restrict:"A",templateUrl:"drct/tbl-item/tbl-item.tpl.html",scope:{cityName:"=",supItem:"=",isEditable:"="},controller:["$scope","$location",t]}};e.module("myApp.appTblItem",[]).directive("appTblItem",[r])}(window.angular),function(e){var t=function a(e,t,r){_classCallCheck(this,a),e.href_login=t.href("byt.oauthLogin",{});var i=function(){r.deleteSess()};e.logout=i,e.confirmLogout=function(){window.confirm("Выйти из аккаунта?")&&i()};var n=function(){var a=function(e){alert("Ошибка авторизации"),console.log(e)},i=function(){e.sessData=r.getData(),e.sessData.is_supplier&&(e.href_manage=t.href("byt.splrManager.profile",{supplier_id:e.sessData.uid}),e.href_supplier=t.href("byt.splrItem.main",{supplier_id:e.sessData.uid}))};r.retrieveSess().then(i)["catch"](a)};n()},r=function(){return{restrict:"A",templateUrl:"drct/user-status/user-status.tpl.html",controller:["$scope","$state","sessRepo",t]}};e.module("myApp.userStatusDrct",["myApp.sessRepo"]).directive("userStatusDrct",[r])}(window.angular),function(e){var t=function(e){e.stateShow={val:!1},e.switchNext=function(){e.stateShow.val=!0}},r=function(){return{restrict:"A",templateUrl:"drct/work-gallery/work-gallery.tpl.html",scope:{supItem:"=appSupItem",workScope:"=appWorkScope",wrapElemId:"=appWrapElemId"},controller:["$scope",t]}};e.module("myApp.appWorkGallery",["myApp.appGalleryItem","myApp.ytbVideo"]).directive("appWorkGallery",[r])}(window.angular),function(e){var t=/^[^"&?\/ ]{11}$/i,r=function(){var e=function(e,r,a){var i=a.yid;if(!i)return void console.log("required: yid");if(t.test(i)!==!1){var n=document.createElement("iframe");n.width="100%",n.height="100%",n.className="full-height full-width",n.src="https://www.youtube.com/embed/"+i+"?html5=1",n.frameBorder=0,n.scrolling="no",n.setAttribute("type","text/html"),n.setAttribute("allowfullscreen",""),r[0].appendChild(n)}};return{restrict:"A",link:e}};e.module("myApp.ytbVideo",[]).directive("ytbVideo",[r])}(window.angular),function(e,t,r){var a=function(a,i,n,s,o,l,c,p,d,u,m,g,v,f,_,h){if(_=_||"tbl",i.is_map="map"===_,i.is_map&&"function"==typeof window.callPhantom)return void l.notFound();i.page_ttl="Мастер / салон",i.vpos={val:0};var A=function(e,t){if(!e.is_works_once){var r=document.getElementById("serv"+e.id);if(o.debug("elemServ","position",{offsetTop:r.offsetTop,wrapScrollTop:t}),r&&r.offsetTop>t-51&&r.offsetTop<t+500){e.is_works_once=!0;var a=i.sessData.is_editor||i.sessData.uid===i.vfirm.id;m.sendGet("/work/get-by-master-and-rubric",{master_profile_id:i.vfirm.id,serv_rubric_id:e.serv_rubric_id,limit:5},a).then(function(e){return e.arr_table_work}).then(function(t){e.work_scope={arr:t}})["catch"](function(t){e.work_scope={err:t}})}}};i.$watch("vpos.val",function(t){e.forEach(i.arr_master_serv,function(e){return A(e,t)})}),i.statePrev=g;var w=function(){u.deleteSess()};i.logout=w,i.isAddToBookmarks=!!t.addToBookmarks,i.addToBookmarks=function(){i.isAddToBookmarks&&t.addToBookmarks()},i.sessData=u.getData(),i.calcCitySpecHref=function(e,t){return s.href("byt.aggloItem.specItem.rubricItem.tblView",{agglo_local_name:t,spec_name:e.serv_group_name,rubric_name:e.serv_rubric_name})};var b=function(e){return i.vfirm=e,e},y=function(e,t){if("tbl"!==e)return a.when([]);var r=i.sessData.is_editor||i.sessData.uid===t.id;return m.sendGet("/master/get-servs-by-master",{master_profile_id:t.id,lang:"ru"},r).then(function(e){return e.arr_master_serv})},k=function(e){return i.arr_master_serv=e,i.$on("servListRepeatFinished",function(){i.vpos.val=1}),e},I=function(){var t=i.vfirm.name;i.vfirm.city_name&&(t+=i.vfirm.city_name_genitive?" из "+i.vfirm.city_name_genitive:" из города "+i.vfirm.city_name),t+=" - мастер / салон красоты id"+i.vfirm.id,
e.forEach(i.arr_master_serv,function(e,r){t.length+e.serv_rubric_name.length<155&&(t+=(0===r?". Услуги: ":", ")+e.serv_rubric_name[0].toLowerCase()+e.serv_rubric_name.slice(1))}),i.supplier_url=s.href("byt.splrItem.main",{supplier_id:i.vfirm.id,name:i.vfirm.name}),o.info("supplierURL",i.supplier_url),i.url_to_share=r.MAIN_HOST+i.supplier_url;var a=i.vfirm.name;i.vfirm.city_name&&(a+=" - "+i.vfirm.city_name),a+=" - id"+i.vfirm.id+" - мастер / салон красоты",l.ok(a,t,i.supplier_url)},C=function(e){404===e.status?(i.err_msg="Мастер не найден. Возможно он был удалён модератором или самим мастером.",l.notFound()):(i.err_msg="Возникла непредвиденная ошибка. Попробуйте позже",o.crit("splrMainCatchAll","unknown",{response:e}),l.serverError(new Error(e.status)))};i.retrieveByMasterAndRubric=function(e){o.debug("rtrv",e)},u.retrieveSess().then(function(){var e=i.sessData.is_editor||i.sessData.uid===f;return o.debug("isFresh",e,{q_id:f,uid:i.sessData.uid}),c.loadSupplier(f,_,h,e)}).then(e.bind(null,p.init,_)).then(b).then(e.bind(null,y,_)).then(d.translate).then(k).then(I)["catch"](C),n(function(){i.is_prg=!0},500)};e.module("myApp.SplrMainController",["myApp.appVkLike","myApp.appCommentForm","myApp.appShareBlock","myApp.splrContactDrct","myApp.splrServDrct","myApp.appScrollWatcher","myApp.appWorkGallery","myApp.apimas","myApp.sessRepo","myApp.readiness","myApp.splrLoader","myApp.splrInitiator","myApp.servTranslator","myApp.statePrev","myApp.appSplrFill"]).controller("SplrMainController",["$q","$scope","$timeout","$state","lgr","readiness","splrLoader","splrInitiator","servTranslator","sessRepo","apimas","statePrev","q_name","q_id","q_tpe","q_hash",a])}(window.angular,window.snns,window.APPCONF),function(e){var t=function(e,t,r){var a=function(e){switch(e.status){case 422:alert("Ошибка ввода: "+JSON.stringify(e.data));break;default:alert("Непредвиденная ошибка. Не удалось сохранить. Попробуйте позже")}console.log(e)},i=function(r){console.log(r),e.is_saved=!0,t(function(){e.is_saved=!1},1500)};e.updateAddress=function(t,n){e.update_progress=!0,console.log(n),n.cusRegions=[],t.description=JSON.stringify(n),console.log(t),r.sendPost("/master/upsert-address",t).then(i)["catch"](a)["finally"](function(){e.update_progress=!1})};try{e.ggg=JSON.parse(e.mdrDescription||"{}")}catch(n){console.log(n),e.ggg={}}},r=function(){return{restrict:"A",templateUrl:"splr-manager/address/address-edt.tpl.html",scope:{mdrDescription:"=",mdrGeoDistrictId:"=",mdr:"="},controller:["$scope","$timeout","apimas",t]}};e.module("myApp.addressEdtDrct",["myApp.apimas"]).directive("addressEdtDrct",[r])}(window.angular),function(e){var t=function(t){var r=e.lowercase(t);return function(e){return e.local_name.toLowerCase().indexOf(r)>=0}},r=function(e,r,a){if(!e.supplier)return console.log("no $scope.supplier"),void alert("Непредвиденная ошибка");var i=e.supplier.master_address;return i?(e.slc_data={agglo_item:null,agglo_id:""},e.querySearch=function(e,r){return r?e.filter(t(r)):e},e.onSelectedItemChange=function(e){console.log(e),e?(i.geo_district_id=parseInt(e),console.log("changed",i)):i.geo_district_id=null},void a.retrieveData().then(function(t){e.arr_geo_agglo=t,i.geo_district_id&&(e.slc_data.agglo_id=""+i.geo_district_id)})):(console.log("no master_address aggglo_edt"),void alert("Непредвиденная ошибка"))};e.module("myApp.SplrAggloEdtController",["myApp.addressEdtDrct","myApp.geoRegionRepo","myApp.geoAggloRepo"]).controller("SplrAggloEdtController",["$scope","geoRegionRepo","geoAggloRepo",r])}(window.angular),function(e){var t=function(e,t,r){var a=function(e){switch(e.status){case 422:alert("Ошибка ввода: "+JSON.stringify(e.data));break;default:alert("Непредвиденная ошибка. Не удалось сохранить. Попробуйте позже")}console.log(e)},i=function(r){console.log(r),e.is_saved=!0,t(function(){e.is_saved=!1},1500)};e.updateEmail=function(t){e.update_progress=!0,r.sendPost("/master/update-email",t).then(i)["catch"](a)["finally"](function(){e.update_progress=!1})}},r=function(){return{restrict:"A",scope:{supplier:"="},templateUrl:"splr-manager/email/email-edt.tpl.html",controller:["$scope","$timeout","apimas",t]}};e.module("myApp.splrEmailEdt",["myApp.apimas"]).directive("splrEmailEdt",[r])}(window.angular),function(e){var t=function(e,t,r){var a=function(e){switch(e.status){case 422:var t=e.data.details;if(t){if("validationError"===e.data.errkey&&"main_phone"===t.property){alert("Неправильный формат: используйте +7xxxzzzzzzz");break}if("duplicateKeyError"===e.data.errkey&&"main_phone"===t.property){alert("Мастер или салон с таким номеров уже зарегистрирован в системе. Попробуйте указать другой номер.");break}}alert("Ошибка ввода: "+JSON.stringify(e.data));break;default:alert("Непредвиденная ошибка. Не удалось сохранить. Попробуйте позже")}console.log(e)},i=function(r){console.log(r),e.is_saved=!0,t(function(){e.is_saved=!1},1500)};e.updatePhone=function(t){e.update_progress=!0,r.sendPost("/master/update-phone",t).then(i)["catch"](a)["finally"](function(){e.update_progress=!1})}},r=function(){return{restrict:"A",scope:{supplier:"="},templateUrl:"splr-manager/phone/phone-edt.tpl.html",controller:["$scope","$timeout","apimas",t]}};e.module("myApp.splrPhoneEdt",["myApp.apimas"]).directive("splrPhoneEdt",[r])}(window.angular),function(e){var t=function(e,t,r){var a=function(t){switch(e.update_progress=!1,t.status){case 422:alert("Ошибка ввода: "+JSON.stringify(t.data));break;default:alert("Непредвиденная ошибка. Не удалось сохранить. Попробуйте позже")}console.log(t)},i=function(r){e.update_progress=!1,e.is_saved=!0,t(function(){e.is_saved=!1},1500),console.log(r)};e.updateProfile=function(t){e.update_progress=!0,console.log(t),r.sendPost("/master/update-profile",t).then(i)["catch"](a)}};e.module("myApp.SplrProfileEdtController",["myApp.apimas"]).controller("SplrProfileEdtController",["$scope","$timeout","apimas",t])}(window.angular),function(e){var t=function(e,t,r,a){var i=function(){console.log("sessRepoData",r.getData()),r.getData().is_editor||r.deleteSess(),e.is_progress=!1,t.go("byt.welcome")},n=function(t){e.is_progress=!1,console.log(t),e.err_msg="Непредвиденная ошибка: не удалось удалить. Попробуйте позже"};e.removeAccount=function(t){e.err_msg=null,console.log("removed",t),e.is_progress=!0,a.sendPost("/master/delete-master",{id:t.id}).then(i)["catch"](n)}};e.module("myApp.SplrRemovalController",["myApp.sessRepo"]).controller("SplrRemovalController",["$scope","$state","sessRepo","apimas",t])}(window.angular),function(e){var t=function a(e,t,r,i,n){_classCallCheck(this,a),e.isFree=function(t){return e.arr_master_serv?0===e.arr_master_serv.filter(function(e){return e.serv_rubric_id===t.id}).length:!0},e.arr_ids=[],e.handleChange=function(t,r){if(t)e.arr_ids.push(r);else{var a=e.arr_ids.indexOf(r);a>=0&&e.arr_ids.splice(a,1)}console.log(e.arr_ids)};var s=function o(r,a){return r[a]?i.sendPost("/master/upsert-serv",{master_profile_id:e.supplier.id,serv_rubric_id:r[a],is_out:!1}).then(function(){return o(r,a+1)}):t.when()};e.addServs=function(t){0!==t.length&&(e.err_insert=null,e.is_progress=!0,s(t,0).then(function(){e.is_progress=!1,r.go("byt.splrManager.servList",{supplier_id:e.supplier.id})})["catch"](function(t){e.err_insert=t,e.is_progress=!1}))},i.sendGet("/master/get-servs-by-master",{master_profile_id:e.supplier.id,lang:"ru"},!0).then(function(t){e.arr_master_serv=t.arr_master_serv,console.log("servs",e.arr_master_serv)}).then(function(){return n.retrieveWithRubrics()}).then(function(t){console.log("with  rubrics",t),e.arr_serv_group=t})["catch"](function(t){e.err_master_serv=t})},r=function(){return{restrict:"A",scope:{supplier:"="},templateUrl:"splr-manager/serv-creator/serv-creator-edt.tpl.html",controller:["$scope","$q","$state","apimas","servGroupRepo",t]}};e.module("myApp.servCreatorEdt",["myApp.apimas","myApp.servGroupRepo"]).directive("servCreatorEdt",[r])}(window.angular),function(e){var t=function r(e,t,a,i,n){_classCallCheck(this,r);var s=function(e,t){return i.sendPost("/work/delete-by-master-and-rubric",{master_profile_id:e,serv_rubric_id:t})};e.deleteServ=function(e){window.confirm("При удалении услуги удаляются также все соответствующие данные, в том числе фотографии, привязанные к услуге")&&i.sendPost("/master/delete-serv",{id:e.id,master_profile_id:e.master_profile_id}).then(function(){return s(e.master_profile_id,e.serv_rubric_id)}).then(function(){t.go("byt.splrManager.servList",{supplier_id:e.master_profile_id})})["catch"](function(e){alert("Возникла непредвиденная ошибка. Повторите позже или обратитесь в техподдержку."),console.log(e)})};var o=function(t){return e.update_progress=!1,422===t.status?void(e.err_update="Ошибка данных: попробуйте указать другие данные"):void(e.err_update="Непредвиденная ошибка: повторите запрос позже")},l=function(){e.update_progress=!1,console.log("success"),e.is_saved=!0,a(function(){e.is_saved=!1},1500)};e.updateMsrv=function(t){e.update_progress||(e.err_update=null,console.log("update",t),e.update_progress=!0,i.sendPost("/master/upsert-serv",t).then(l)["catch"](o))};var c=function(t){var r="";r=404===t.status?"Услуга #"+n+" не найдена.":"Непредвиденная ошибка. Попробуйте позже.",e.err_msrv={status:t.status,msg:r}},p=function(){e.arr_serv_work=[]};i.sendGet("/master/get-serv",{id:+n,lang:"ru"},!0).then(function(t){return e.msrv=t}).then(p)["catch"](c)};e.module("myApp.SplrServItemEdtController",["myApp.apimas"]).controller("SplrServItemEdtController",["$scope","$state","$timeout","apimas","q_id",t])}(window.angular),function(e){var t=function r(e,t){return _classCallCheck(this,r),t.sendGet("/master/get-servs-by-master",{master_profile_id:e.supplier.id,lang:"ru"},!0).then(function(t){e.arr_master_serv=t.arr_master_serv.sort(function(e,t){return e.serv_rubric_name>t.serv_rubric_name?1:-1}),console.log(e.arr_master_serv)})["catch"](function(t){e.err_master_serv=t})};e.module("myApp.SplrServListEdtController",["myApp.apimas"]).controller("SplrServListEdtController",["$scope","apimas",t])}(window.angular),function(e){var t=function(e,t,r){var a=function(e){if(0!==e.indexOf("uq_master_profile__"))return null;var t=e.replace("uq_master_profile__","");return"landline"===t?"стационарный телефон":t},i=function(e){if(0!==e.indexOf("bw_master_profile__"))return null;var t=e.replace("bw_master_profile__","");return"landline"===t?"стационарный телефон":t},n=function(e){switch(e.status){case 422:var t=e.data;if("duplicateKeyError"===t.errkey&&t.details&&t.details.property){var r=a(t.details.property);if(r)return void alert('Ошибка ввода: указанное значение поля "'+r+'" уже занято: попробуйте указать другое либо оставьте поле пустым')}if("validationError"===t.errkey&&t.details&&t.details.property){var n=i(t.details.property);if(n)return void alert('Ошибка ввода: неверный формат значения "'+n+'": попробуйте указать другое либо оставьте поле пустым')}alert("Ошибка ввода: "+JSON.stringify(t));break;default:alert("Непредвиденная ошибка. Не удалось сохранить. Попробуйте позже")}console.log(e)},s=function(r){console.log(r),e.is_saved=!0,t(function(){e.is_saved=!1},1500)};e.updateProfile=function(t){e.update_progress=!0,console.log(t),r.sendPost("/master/update-profile",t).then(s)["catch"](n)["finally"](function(){e.update_progress=!1})}};e.module("myApp.SplrSocialEdtController",["myApp.apimas"]).controller("SplrSocialEdtController",["$scope","$timeout","apimas",t])}(window.angular),function(e){function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}var r=function(e,r,a){var i=function(e){switch(e.status){case 422:var t=e.data.details;if(t){if("validationError"===e.data.errkey&&t.vk_id){alert("Неверный формат идентификатора");break}if("duplicateKeyError"===e.data.errkey){alert("Мастер или салон с таким ID уже зарегистрирован в системе. Попробуйте указать другой ID.");break}}alert("Ошибка данных: "+JSON.stringify(e.data));break;default:alert("Непредвиденная ошибка: не удалось сохранить - попробуйте позже")}console.log(e)},n=function(t){console.log(t),e.is_saved=!0,r(function(){e.is_saved=!1},1500)};e.updateVkid=function(r,s){return s?t(s)===!1?void alert("Ошибка: необходимо указать число"):(s=+s,e.update_progress=!0,void a.sendPost("/master/update-vk-id",{id:r,vk_id:s}).then(n)["catch"](i)["finally"](function(){e.update_progress=!1})):void alert("Ошибка: необходимо указать идентификатор")}},a=function(){return{restrict:"A",scope:{supplier:"="},templateUrl:"splr-manager/vkid/vkid-edt.tpl.html",controller:["$scope","$timeout","apimas",r]}};e.module("myApp.splrVkidEdt",["myApp.apimas"]).directive("splrVkidEdt",[a])}(window.angular),function(e){var t=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i,r=function i(e,r){_classCallCheck(this,i);var a=function(e){if(422===e.status){var t=e.data;if(t){if("duplicateKeyError"===t.errkey&&t.details&&"uq_serv_work__main_video"===t.details.property)return void alert("Данное видео уже было добавлено ранее вами или другим мастером: попробуйте указать другое видео.");if("validationError"===t.errkey&&t.details&&"main_video"===t.details.property)return void alert("Неверный формат ссылки на видео: попробуйте указать другое видео.")}}console.log(e),alert("Возникла непредвиденная ошибка при добавлении: попробуйте позже или укажите другое видео")};e.addVideoLink=function(){var i=window.prompt("Ссылка на Youtube видео, где представлена ваша услуга "+e.servRubricName,"https://www.youtube.com/watch?v=");if(i){var n=i.match(t);if(console.log(n),!n||!n[1])return void alert("На данный момент поддерживаются только видео из Youtube: укажите корректную ссылку к видео");var s=n[1];console.log(s),r.sendPost("/work/insert-item-with-ytb",{master_profile_id:e.masterProfileId,serv_rubric_id:e.servRubricId,main_video:s}).then(function(t){e.arrServWork.unshift(t)})["catch"](a)}};var n=function s(t){var a=t.length-1,i=t[a];return i?(e.progress=5,void r.sendMultipart("/work/insert-item-with-file?master_profile_id="+e.masterProfileId+"&serv_rubric_id="+e.servRubricId,i).then(function(r){console.log(r.config.data.ufile.name+" uploaded.");var i=r.data;e.arrServWork.unshift(i),t.splice(a,1),s(t)},function(t){console.log("Error status: "+t.status),e.progress=null,alert("Ошибка загрузки: попробуйте повторить позже или выберите другой файл")},function(t){var r=parseInt(100*t.loaded/t.total);e.progress=r})):void(e.progress=null)};e.removePreFile=function(e,t){e.splice(t,1)},e.submit=function(e,t){return console.log("submitting...",e,t),e.$valid||console.log("error",e.$error,e),t&&0!==t.length?void n(t):void console.log("no files selected")}},a=function(){return{restrict:"A",scope:{masterProfileId:"=",servRubricId:"=",servRubricName:"=",arrServWork:"="},templateUrl:"splr-manager/work-creator/work-creator-edt.tpl.html",controller:["$scope","apimas",r]}};e.module("myApp.workCreatorEdt",["myApp.apimas","ngFileUpload"]).directive("workCreatorEdt",[a])}(window.angular),function(e){var t=function(){var e=function(e,t){var r=t[0];e.$watch("vpos.val",function(t){e.is_show||r.offsetTop>t-500&&r.offsetTop<t+1e3&&(e.is_show=!0)})};return{restrict:"A",scope:{servWork:"=",vpos:"="},templateUrl:"splr-manager/work-item/work-item-edt.tpl.html",link:e}};e.module("myApp.workItemEdt",["myApp.ytbVideo"]).directive("workItemEdt",[t])}(window.angular),function(e){var t=function a(e,t,r){_classCallCheck(this,a);var i=function(e){console.log(e),alert("Возникла непредвиденная ошибка в процессе удаления. Повторите позже либо обратитесь к администратору.")},n=function(t){console.log("removed handleDel",t);for(var r=e.arr_serv_work,a=r.length-1;a>=0;a-=1)r[a].id===t.serv_work_id&&r.splice(a,1)};e.deleteServWork=function(e,t){window.confirm("Удаление работы (фото или видео) невозвратно. Действительно удалить?")&&r.sendPost("/work/delete-by-work-and-rubric",{serv_work_id:e,serv_rubric_id:t}).then(n)["catch"](i)},r.sendGet("/work/get-by-master-and-rubric",{master_profile_id:e.masterProfileId,serv_rubric_id:e.servRubricId,limit:20},!0).then(function(t){return e.arr_serv_work=t.arr_table_work})},r=function(){return{restrict:"A",scope:{masterProfileId:"=",servRubricId:"=",servRubricName:"=",vpos:"=",canDelete:"=",canInsert:"="},templateUrl:"splr-manager/work-list/work-list-edt.tpl.html",controller:["$scope","$state","apimas",t]}};e.module("myApp.workListEdt",["myApp.apimas"]).directive("workListEdt",[r])}(window.angular),function(e){var t=function(){return{restrict:"A",templateUrl:"agglo-item/spec-item/rubric-item/blog-links.tpl.html",scope:{rubricArticles:"="}}};e.module("myApp.appBlogLinks",[]).directive("appBlogLinks",[t])}(window.angular),function(e){var t=function(){return{restrict:"A",templateUrl:"agglo-item/spec-item/rubric-item/outer-links.tpl.html",scope:{curAgglo:"=",curSpec:"=",curRubric:"="}}};e.module("myApp.appOuterLinks",[]).directive("appOuterLinks",[t])}(window.angular),function(e){var t=function(e,t,r,a,i,n,s,o,l,c){var p=function(t){var r=t.arr_serv_rubric_stat.filter(function(e){return e.name===c})[0];return r?(e.similar_rubrics=l.calcSimilarRubrics(t.arr_serv_rubric_stat,r),e.rubric_articles=o.calcByRubricId(r.id),e.cur_rubric=r,void 0):(e.err_cur_rubric={msg:'Мастера и салоны красоты, предоставляющие услугу "'+c+'" в городе '+e.cur_agglo.local_name+" не найдены"},void i.notFound())},d=function(t){e.err_cur_rubric={msg:"Ошибка загрузки услуги. Пожалуйста, попробуйте позже",reason:t},console.log("retrieveData",t),i.serverError(new Error(t))};n.retrieveData().then(function(t){s.retrieveData(e.cur_agglo.id,t).then(p)["catch"](d)}),t(function(){e.is_prg=!0},500)};e.module("myApp.RubricItemController",["myApp.drct","myApp.appSimilarLinks","myApp.appOuterLinks","myApp.appBlogLinks","myApp.servGroupRepo","myApp.servStatRepo","myApp.blogRepo","myApp.rubricHelper","myApp.readiness"]).controller("RubricItemController",["$scope","$timeout","$q","$state","readiness","servGroupRepo","servStatRepo","blogRepo","rubricHelper","q_rubric_name",t])}(window.angular),function(e){var t=function(){return{restrict:"A",templateUrl:"agglo-item/spec-item/rubric-item/similar-links.tpl.html",scope:{similarRubrics:"=",curAgglo:"="}}};e.module("myApp.appSimilarLinks",[]).directive("appSimilarLinks",[t])}(window.angular),function(e){var t=function a(t,r,i,n,s,o){_classCallCheck(this,a),t.home_href=i.href("byt.aggloItem.specList",{agglo_local_name:t.agglo.local_name}),t.map_href=i.href("byt.map",{g:t.agglo.local_name,spec:t.spec.id}),t.calcHref=function(e,r){return i.href("byt.aggloItem.specItem.rubricItem."+r,{agglo_local_name:t.agglo.local_name,spec_name:t.spec.name,rubric_name:e})};var l=function(){var r=i.href("byt.aggloItem.specItem.rubricList",{agglo_local_name:t.agglo.local_name,spec_name:t.spec.name}),a=t.spec.name+" в "+t.agglo.case_prepositional+" - перечень предоставляемых услуг",n=a.length,s=[];e.forEach(t.rubrics,function(e){n+e.name.length+2<=140&&(n=n+e.name.length+2,s.push(e.name))}),s.length>0&&(a+=": "+s.join(", ")),o.ok(t.spec.name+" - "+t.agglo.local_name+" - услуги мастеров и салонов красоты",a,r)},c=function(r){t.allRubrics=r.arr_serv_rubric_stat;var a=[];t.allRubrics&&e.forEach(t.allRubrics,function(e){e.serv_group_id===t.spec.id&&a.push(e)}),a.sort(function(e,t){return e.count_master_serv<t.count_master_serv?1:-1}),t.rubrics=a},p=function(e){t.err_rubrics={msg:"Ошибка загрузки категорий. Пожалуйста, попробуйте позже",reason:e},console.log(e),o.serverError(new Error(e))};n.retrieveData().then(function(e){s.retrieveData(t.agglo.id,e).then(c).then(l)["catch"](p)}),r(function(){t.is_prg=!0},500)},r=function(){return{restrict:"A",scope:{agglo:"=",spec:"="},templateUrl:"agglo-item/spec-item/rubric-list/rubric-list.tpl.html",controller:["$scope","$timeout","$state","servGroupRepo","servStatRepo","readiness",t]}};e.module("myApp.rubricListDrct",["myApp.servGroupRepo","myApp.servStatRepo","myApp.readiness"]).directive("rubricListDrct",[r])}(window.angular),function(e){var t=function(t){var r=function(r){var a=function(t){var a={};return e.forEach(t,function(e){a[e.id]=e.name}),e.forEach(r,function(e){e.serv_group_name=a[e.serv_group_id]}),r};return t.retrieveData().then(a)};return{translate:r}};e.module("myApp.servTranslator",["myApp.servGroupRepo"]).factory("servTranslator",["servGroupRepo",t])}(window.angular),function(e){var t=function(t,r,a){var i=function(i,n){var s={map:function(t){var r={id:t.id,name:t.name,username:t.name,city_name:t.city_name,address:t.address,contacts:[],avatar:null,bio:null,is_company:!0,lon:t.lon,lat:t.lat};return e.forEach(t.contacts,function(t){e.forEach(t.contacts,function(e){r.contacts.push(e)})}),r},tbl:function(t){var i={id:t.id,name:t.name,username:t.username,contacts:[],ads_article:null,ads_ref:null,ads_warning:null,avatar:t.avatar,bio:t.bio,is_company:t.is_company,lon:null,lat:null};t.master_address&&(r.retrieveById(t.master_address.geo_district_id).then(function(e){e?(i.city_name=e.local_name,i.city_name_prepositional=e.case_prepositional,i.city_name_genitive=e.case_genitive):console.log("no city name for "+t.master_address)}),t.master_address.description&&(i.address=a.calcAddrFromDescription(t.master_address.description),i.address_comment=a.calcCommentFromDescription(t.master_address.description),i.out_geo=a.calcOutGeoFromDescription(t.master_address.description))),t.main_phone&&i.contacts.push({type:"phone",value:t.main_phone,alias:null,comment:""}),t.landline&&i.contacts.push({type:"landline",value:t.landline,alias:null,comment:""}),t.main_email&&i.contacts.push({type:"email",value:t.main_email,alias:null,comment:""});var n=["whatsapp","viber","twitter","skype"],s=["website","vkontakte","facebook","odnoklassniki"],o=function(e){return e&&0!==e.indexOf("http://")&&0!==e.indexOf("https://")?"https://"+e:e};return e.forEach(n,function(e){t[e]&&i.contacts.push({type:e,value:t[e],alias:t[e],comment:""})}),e.forEach(s,function(e){t[e]&&i.contacts.push({type:e,value:o(t[e]),alias:t[e].replace("http://","").replace("https://",""),comment:""})}),t.nstg_id&&i.contacts.push({type:"instagram",value:"https://www.instagram.com/_u/"+t.username+"/",alias:"instagram.com/"+t.username+"/",comment:""}),t.vk_id&&i.contacts.push({type:"vkprofile",value:"https://vk.com/id"+t.vk_id,alias:"vk.com/id"+t.vk_id,comment:""}),i}};return s[i]?t.when(s[i](n)):t.reject({status:500,msg:i+"isNotAllowed"})};return{init:i}};e.module("myApp.splrInitiator",["myApp.aggloItemRepo","myApp.splrAddressHelper"]).factory("splrInitiator",["$q","aggloItemRepo","splrAddressHelper",t])}(window.angular),function(e){var t=function(e,t,r){var a=function(a,i,n,s){var o=function(){switch(i){case"map":return"function"==typeof window.callPhantom?e.reject({msg:"Данные карты не загружаются по запросам поисковых роботов",dtl:"window.callPhantom is not allowed"}):t.retrieveData(a,n);default:return r.sendGet("/master/get-profile",{id:a},s)}};return o()};return{loadSupplier:a}};e.module("myApp.splrLoader",["myApp.firmItemRepo","myApp.apimas"]).factory("splrLoader",["$q","firmItemRepo","apimas",t])}(window.angular),function(e){var t=function(){return{restrict:"A",scope:{ctct:"="},templateUrl:"splr/main/splr-contact/splr-contact.tpl.html"}};e.module("myApp.splrContactDrct",[]).directive("splrContactDrct",[t])}(window.angular),function(e){var t=function(){return{restrict:"A",scope:{msrv:"=",citySpecHref:"=",isEditable:"="},templateUrl:"splr/main/splr-serv/splr-serv.tpl.html"}};e.module("myApp.splrServDrct",[]).directive("splrServDrct",[t])}(window.angular),function(e){var t=function(e,t,r){e.saveHash=function(e){t.hash(e)};var a={supplier_id:e.pw.master_profile_id,name:e.pw.master_profile_name};e.workInfoLink=r.href("byt.mediaItem",{media_id:e.pw.id}),e.masterInfoLink=r.href("byt.splrItem.main",a)},r=function(){return{restrict:"A",templateUrl:"agglo-item/spec-item/rubric-item/prtf-view/prtf-item.tpl.html",scope:{pw:"=",rubricName:"="},controller:["$scope","$location","$state",t]}};e.module("myApp.prtfItemDrct",["myApp.ytbVideo"]).directive("prtfItemDrct",[r])}(window.angular),function(e){var t=function(t,r,a,i,n){t.rview_id="prtf",t.rview_name="Фото";var s="Фото";s+=t.cur_rubric.case_gen?" "+t.cur_rubric.case_gen:" "+t.cur_rubric.name,s+=t.cur_agglo.case_prepositional?" в "+t.cur_agglo.case_prepositional:" "+t.cur_agglo.local_name,t.page_header=s,t.vpos={val:0},t.$watch("vpos.val",function(r){e.forEach(t.arr_prtf_work,function(e){if(!e.is_show){var t=document.getElementById("work"+e.id);t&&t.offsetTop>r-250&&t.offsetTop<r+800&&(e.is_show=!0)}})});var o=function(e){n({msg:"Ошибка загрузки фотографий. Попробуйте позже.",dtl:e})},l=function(e){n(null,e)};i.retrieveData(t.cur_rubric.id,t.cur_agglo.id).then(l)["catch"](o)},r=function(e,r,a,i,n){t(e,r,a,n,function(t,n){if(t)return e.err_arr_prtf_work=t,void i.serverError();var s=function(){var t=r.href("byt.aggloItem.specItem.rubricItem.prtfView",{agglo_local_name:e.cur_agglo.local_name,spec_name:e.cur_spec.name,rubric_name:e.cur_rubric.name}),a=e.arr_prtf_work.length,n="";a&&(n=" ("+a+"шт.)");var s="";s=e.cur_rubric.case_gen?" "+e.cur_rubric.case_gen:" по услуге "+e.cur_rubric.name,i.ok("Фото"+n+" - "+e.cur_rubric.name+" - "+e.cur_agglo.local_name+" - 2016 год","Фотографии"+n+s+" в "+e.cur_agglo.case_prepositional+": красивые фото в хорошем качестве, 2015-2016 год, модные тенденции, дизайнерские решения",t)},o=function(e){if(e){var t=document.getElementById("work"+e);if(t){var r=t.offsetTop;if(r)return r-50}}return 1};e.$on("servListRepeatFinished",function(){e.vpos.val=o(a.hash()),s()}),e.arr_prtf_work=n,0===n.length&&s()})};e.module("myApp.PrtfViewController",["myApp.drct","myApp.prtfRepo","myApp.appScrollWatcher","myApp.prtfItemDrct","myApp.readiness"]).controller("PrtfViewController",["$scope","$state","$location","readiness","prtfRepo",r])}(window.angular),function(e){var t=function(t,r,a,i,n,s,o,l,c){t.rview_id="tbl",t.rview_name="Каталог";var p="";p=t.cur_rubric.case_dat?"Мастера по "+t.cur_rubric.case_dat:t.cur_rubric.name,p+=t.cur_agglo.case_prepositional?" в "+t.cur_agglo.case_prepositional:" "+t.cur_agglo.local_name,t.page_header=p,t.vpos={val:0},t.$watch("vpos.val",function(r){e.forEach(t.arr_supplier,function(e){if(!e.is_works_once){var a=document.getElementById("supplier"+e.id);a&&a.offsetTop>r-101&&a.offsetTop<r+900&&(e.is_works_once=!0,s.sendGet("/work/get-by-master-and-rubric",{master_profile_id:e.id,serv_rubric_id:t.cur_rubric.id,limit:5}).then(function(e){return e.arr_table_work}).then(function(t){console.log("arr_table_work",e.id,t),e.work_scope={arr:t}})["catch"](function(t){console.log("err_table_work",e.id,t),e.work_scope={err:t}}))}})});var d=function(e){t.err_msg="Ошибка загрузки мастеров и салонов. Попробуйте позже",n.serverError(e)},u=function(){var e,a=r.href("byt.aggloItem.specItem.rubricItem.tblView",{agglo_local_name:t.cur_agglo.local_name,spec_name:t.cur_spec.name,rubric_name:t.cur_rubric.name}),i=t.arr_supplier.length;e=t.cur_rubric.case_dat?" по "+t.cur_rubric.case_dat:", предоставляющие услугу "+t.cur_rubric.name;var s="Избранные мастера и салоны красоты"+e+" из "+t.cur_agglo.case_genitive+": найдено "+i+" - контакты, фотографии работ, профили в соцсетях";n.ok(t.cur_rubric.name+" - "+t.cur_agglo.local_name+" - мастера и салоны красоты - найдено "+i,s,a)};t.sessData=c.getData();var m=function(t){e.forEach(t,function(e){if(e.master_address){var t=e.master_address.description;t&&(e.sup_geo=l.calcAddrFromDescription(t),e.cus_geo=l.calcOutGeoFromDescription(t),e.sup_geo||e.cus_geo||console.log("dscr parsing problem",e.id,e.name,t))}})},g=function(e){if(e){var t=document.getElementById("supplier"+e);if(t){var r=t.offsetTop;if(r)return r-4}}return 1},v=function(e){m(e);var r=i.defer();return t.$on("supplierListRepeatFinished",function(){t.vpos.val=g(a.hash()),r.resolve()}),t.arr_supplier=e,0===t.arr_supplier.length&&r.resolve(),r.promise};o.retrieveByRubric(t.cur_rubric.id,t.cur_agglo.id,"",99).then(v).then(u)["catch"](d)};e.module("myApp.TblViewController",["myApp.appTblItem","myApp.appScrollWatcher","myApp.appWorkGallery","myApp.supListRepo","myApp.splrAddressHelper","myApp.sessRepo","myApp.readiness","myApp.apimas"]).controller("TblViewController",["$scope","$state","$location","$q","readiness","apimas","supListRepo","splrAddressHelper","sessRepo",t])}(window.angular),angular.module("myApp.templateFactory",[]).run(["$templateCache",function(e){e.put("app.tpl.html",'<div class="full-height" ui-view="appContent" role="main"></div>'),e.put("agglo-item/agglo-item.tpl.html",'<div class="full-height" data-ng-if="cur_agglo" data-ui-view="aggloItemContent"></div><div ng-if="is_prg"><div ng-if="!cur_agglo && !err_cur_agglo"><div class="pdng text-center">загрузка локации...</div></div></div><div ng-if="err_cur_agglo"><div class="err-msg" ng-bind="err_cur_agglo.msg"></div><div class="err-alt"><a ui-sref="byt.welcome">Перейти на главную страницу</a></div></div>'),e.put("agglo-list/agglo-list-drct.tpl.html",'<div class="agglo-list"><div class="agglo-list__search-box"><input type="text" placeholder="Введите название города" autofocus ng-model="agglo_search.local_name"></div><ul class="agglo-list pure-g"><li class="agglo-list__item pure-u-1 pure-u-sm-1-4" ng-repeat="agg in arrGeoAgglo | filter:agglo_search | limitTo: 8"><a class="agglo-list__link agglo-list__link-bold" ng-bind="agg.local_name" ng-href="{{calcAggloHref(agg.local_name)}}"></a></li></ul><div style="border-top: 1px dashed #aaa; padding: 1px"></div><div class="pure-g"><div class="pure-u-1 pure-u-sm-1-4"><ul><li class="agglo-list__item" ng-repeat="agg in arrGeoAgglo | filter:agglo_search | limitTo: 22:8"><a class="agglo-list__link" ng-bind="agg.local_name" ui-sref="byt.aggloItem.specList({agglo_local_name:agg.local_name})"></a></li></ul></div><div class="pure-u-1 pure-u-sm-1-4"><ul class="agglo-list"><li class="agglo-list__item" ng-repeat="agg in arrGeoAgglo | filter:agglo_search | limitTo:22:30"><a class="agglo-list__link" ng-bind="agg.local_name" ui-sref="byt.aggloItem.specList({agglo_local_name:agg.local_name})"></a></li></ul></div><div class="pure-u-1 pure-u-sm-1-4"><ul class="agglo-list"><li class="agglo-list__item" ng-repeat="agg in arrGeoAgglo | filter:agglo_search | limitTo:22:52"><a class="agglo-list__link" ng-bind="agg.local_name" ui-sref="byt.aggloItem.specList({agglo_local_name:agg.local_name})"></a></li></ul></div><div class="pure-u-1 pure-u-sm-1-4"><ul class="agglo-list"><li class="agglo-list__item" ng-repeat="agg in arrGeoAgglo | filter:agglo_search | limitTo:22:74"><a class="agglo-list__link" ng-bind="agg.local_name" ui-sref="byt.aggloItem.specList({agglo_local_name:agg.local_name})"></a></li></ul></div></div></div>'),e.put("agglo-list/agglo-list.tpl.html",'<div data-app-toolbar></div><div class="app-content"><h1 class="page-header">Выбор города</h1><div ng-if="arr_geo_agglo"><div data-agglo-list-drct data-arr-geo-agglo="arr_geo_agglo"></div></div><div ng-if="agglo_err"><div class="err-msg" ng-bind="agglo_err.msg"></div><div class="err-alt"><a ui-sref="byt.welcome">Перейти на главную страницу</a></div></div></div>'),e.put("app-map/app-map.tpl.html",'<div data-app-toolbar></div><div class="app-content"><div class="full-height" ng-if="q_spec"><div class="full-height" ng-if="startLng && startLat && startZoom"><div lfl-map class="my-map custom-popup" data-start-lng="{{startLng}}" data-start-lat="{{startLat}}" data-start-zoom="{{startZoom}}" data-map-move="mapMove" data-map-markers="mapMarkers"></div></div><div class="pdng text-center" ng-if="!startLng && !startLat && !startZoom && !errMap">загрузка карты...</div><div class="err-msg" ng-if="errMap">{{errMap.msg}}</div></div><div ng-if="!q_spec && arr_serv_group" class="pdng text-center"><div class="pdng mrgn">Укажите рубрику</div><ul><li class="pdng" ng-repeat="grp in arr_serv_group"><a ui-sref="byt.map({spec: grp.id})">{{grp.name}}</a></li></ul></div></div>'),e.put("drct/breadcrumb.tpl.html",'<nav><ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"><li class="breadcrumb__item-wrap" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="breadcrumb__item breadcrumb__item-first breadcrumb__act" data-ng-href="{{hrefHome}}" itemprop="item"><span class="fa fa-home breadcrumb__icon" itemprop="name" content="МисКра"></span></a><meta itemprop="position" content="1"></li><li class="breadcrumb__item-wrap" ng-if="aggloName" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="breadcrumb__item" data-ng-href="{{calcHrefAgglo(aggloName)}}" itemprop="item"><span ng-bind="aggloName" itemprop="name"></span></a><meta itemprop="position" content="2"></li><li class="breadcrumb__item-wrap" ng-if="splrName" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="breadcrumb__item" data-ng-href="{{calcHrefSplr(splrId, splrName)}}" itemprop="item"><span ng-bind="splrName" itemprop="name"></span></a><meta itemprop="position" content="3"></li><li class="breadcrumb__item-wrap" ng-if="specName" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="breadcrumb__item" data-ng-href="{{calcHrefSpec(aggloName, specName)}}" itemprop="item"><span ng-bind="specName" itemprop="name"></span></a><meta itemprop="position" content="3"></li><li class="breadcrumb__item-wrap" ng-if="rubricName" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="breadcrumb__item" data-ng-href="{{calcHrefRubric(aggloName, specName, rubricName, rviewId)}}" itemprop="item"><span itemprop="name">{{rubricName}}: {{rviewName}}</span></a><meta itemprop="position" content="4"></li></ol></nav>'),
e.put("drct/left-link.tpl.html",'<div ng-if="is_show"><span style="cursor:pointer; color: blue" ng-click="showLeftLinkBox()" analytics-on="click" analytics-category="leftlink" analytics-event="leftlink-on">&#171; выводить ссылку на приложение в меню слева</span></div>'),e.put("media-item/media-item.tpl.html",'<div class="work-item" ng-if="sw"><div class="full-height" ng-if="sw.main_img"><div class="work-item__img-wrap" data-full-size-img data-img-src="{{sw.main_img}}" data-work-id="{{sw.id}}" ng-click="is_full=!is_full"></div></div><div class="full-height" ng-if="sw.main_video"><div ytb-video class="work-item__video-wrap" data-yid="{{sw.main_video}}"></div></div><div class="abs-top"><div class="work-item__top-wrap" ng-show="!is_full"><div class="work-item__back-link-wrap"><button class="work-item__back-link empty-button" title="назад" onclick="history.back()"><span class="fa fa-arrow-left"></span></button></div><div class="work-item__splr-link-wrap"><h1 class="work-item__header"><span ng-if="sw.main_serv_rubric">{{sw.main_serv_rubric.name}} </span>&copy;<a class="work-item__splr-link" ng-if="link_supplier" ng-href="{{link_supplier}}"> {{sw.master_profile_name}}</a></h1></div></div></div><div ng-if="sw.arr_serv_rubric && sw.arr_serv_rubric.length"><div class="work-item__dscr-wrap" ng-show="!is_full"><span class="work-item__dscr"><span ng-repeat="rbr in sw.arr_serv_rubric"><a class="work-item__dscr-tag-link" title="Все мастера и салоны красоты по услуге {{rbr.name}} в городе {{sw.city_name}}" ng-href="{{calcHrefRubric(sw.city_name, rbr.serv_group_id, rbr.name)}}" ng-if="sw.city_name">{{rbr.name}} </a><span class="work-item__dscr-tag" ng-if="!sw.city_name">{{rbr.name}}</span></span></span></div></div><div class="work-item__soc-wrap" ng-if="url_to_share && sw.main_serv_rubric && sw.main_img" ng-show="!is_full"><div class="work-item__button-wrap"><div app-vk-like data-subject-url="{{url_to_share}}" data-subject-id="media{{sw.id}}" data-page-title="{{sw.main_serv_rubric.name}}" data-page-description="{{sw.master_profile_name}}" data-page-image="{{sw.preview_img}}" analytics-on="click" analytics-category="workitem" analytics-event="likework"></div></div></div></div><div ng-if="err_msg"><div class="err-msg" ng-bind="err_msg"></div><div class="err-alt"><a ui-sref="byt.welcome">Перейти на главную страницу</a></div></div>'),e.put("quiz-item/qres-item.tpl.html",'<div ng-if="qresItem"><div class="mrgn quiz__qres-item"><img ng-src="{{image_share}}" alt="{{qresItem.best}} - {{qresItem.worst}}"></div><div class="text-center" ng-if="isWallPostQres"><button class="app-button" ng-click="wallPostQres(qresItem)" analytics-on analytics-category="share" analytics-event="share-qres">Сохранить на стену</button></div><div class="text-center" ng-if="!isWallPostQres"><div app-share-block data-title="Тест: {{quizItem.ttl}}" data-permalink="{{url_share}}" data-page-image="{{image_share}}"></div></div></div>'),e.put("quiz-item/qstn-item.tpl.html",'<h2 class="pdng qstn-ttl">{{item.ttl}}</h2><ul class="pdng qstn-list"><li class="qstn-list__item-wrap" data-ng-repeat="answ in item.answer_list"><span class="qstn-list__item-link" data-ng-click="setAnswer(item, answ)" analytics-on analytics-category="quiz" analytics-event="{{answ.id}}">{{answ.ttl}} <span class="qstn-list__item-checked" ng-if="item.user_answer === answ"><i class="fa fa-check-circle"></i></span></span></li></ul>'),e.put("quiz-item/qstn-list.tpl.html",'<div><h1 class="pdng">{{quizItem.ttl}}</h1><p class="pdng" ng-bind="quizItem.dscr"></p><div ng-repeat="qu in quizItem.question_list"><div data-qstn-item-drct data-item="qu"></div></div><div class="pdng"><div><button class="app-button full-width" data-ng-disabled="calcAnswerIds(quizItem).length !== quizItem.question_list.length" data-ng-click="calcResult(quizItem)">Показать результат</button></div><div class="text-center"><span>ответов: {{calcAnswerIds(quizItem).length}} из {{quizItem.question_list.length}}</span></div></div><div ng-if="qresItem"><div qres-item-drct data-qres-item="qresItem" data-quiz-item="quizItem"></div></div><div class="pdng"><div app-comment-form data-subject-id="quiz{{quizItem.id}}" data-subject-url="{{url_to_share}}"></div></div><div data-ng-if="err">{{err}}</div><div class="mrgn text-center"><a ui-sref="byt.welcome">Вернуться на главную</a></div></div>'),e.put("quiz-item/quiz-item.tpl.html",'<div data-app-toolbar></div><div class="app-content"><div class="quiz-wrap"><div ng-if="quizItem"><div ui-view="quizContent"></div></div><div ng-if="!quizItem && !quizErr"><div class="mrgn text-center">загрузка теста...</div></div><div ng-if="quizErr"><div class="err-msg" ng-bind="quizErr"></div></div></div></div>'),e.put("splr/splr-item.tpl.html",'<div class="full-height"><div ng-if="splr" class="full-height"><div ui-view="splrItemContent" class="full-height fade"></div></div></div>'),e.put("splr-login/oauth-callback.tpl.html","<div>идёт авторизация...</div>"),e.put("splr-login/oauth-login.tpl.html",'<div data-app-toolbar></div><div class="app-content"><div class="oauth-login"><h1 class="header" data-ng-bind="page_ttl"></h1><div class="pdng"><div class="provider-wrap"><div app-login-email></div></div><div class="provider-wrap"><div class="mrgn text-center">либо войдите с помощью</div><button class="app-button button-vk" ng-click="openOauthVkn()" analytics-on analytics-category="login" analytics-event="login-vkn"><span class="fa fa-vk fa-lg"></span> Вконтакте</button><div><small>необходим аккаунт мастера либо администратора салона красоты</small></div></div></div><div class="pdng text-center"><a ui-sref="byt.welcome">на главную</a></div></div><div data-app-footer></div></div>'),e.put("splr-login/splr-login.tpl.html",'<div data-app-toolbar></div><div class="app-content"><div class="pure-g"><div class="pure-u pure-u-sm-1-8"></div><div class="pure-u-1 pure-u-sm-3-4"><div class="mrgn"><h1 data-ng-bind="page_ttl"></h1><form class="splr-login__form" name="loginForm" ng-submit="sendAuth(auth.lgn, auth.pwd)"><div class="splr-login__form-item"><label>Логин <input class="splr-login__input" autofocus type="text" name="lgn" maxlength="10" minlength="1" required ng-model="auth.lgn"></label><div class="splr-login__warning" role="alert" ng-messages="loginForm.lgn.$error"><div ng-message="required" ng-if="loginForm.lgn.$error.required && loginForm.lgn.$dirty">обязательное поле: от 1 до 10 цифр</div><div ng-message="minlength" ng-if="loginForm.lgn.$error.minlength">обязательное поле: от 1 до 10 цифр</div><div ng-message="maxlength" ng-if="loginForm.lgn.$error.maxlength">обязательное поле: от 1 до 10 цифр</div></div></div><div class="splr-login__form-item"><label>Пароль <input class="splr-login__input" type="password" name="pwd" required maxlength="50" minlength="6" ng-model="auth.pwd"></label><div class="splr-login__warning" role="alert" ng-messages="loginForm.pwd.$error"><div ng-message="minlength" ng-if="loginForm.pwd.$error.minlength">обязательное поле: от 6 до 50 символов</div><div ng-message="maxlength" ng-if="loginForm.pwd.$error.maxlength">обязательное поле: от 6 до 50 символов</div><div ng-message="required" ng-if="loginForm.pwd.$error.required && loginForm.pwd.$dirty">обязательное поле: от 6 до 50 символов</div></div></div><div><button class="splr-login__lgn-button" type="submit" ng-disabled="loginForm.$invalid || in_progress">Войти</button> <span ng-if="in_progress" style="margin-left: 4px">...</span></div></form><div class="splr-login__err-block" ng-if="err_msg">Ошибка входа: <span ng-bind="err_msg"></span></div><p><small>*логин и пароль для входа выдаются администрацией сервиса после верификации мастера/салона</small></p><div><a href="" ng-if="statePrev.url" onclick="history.back(); return false;"><span class="fa fa-arrow-left"></span> вернуться назад</a></div></div></div></div></div>'),e.put("splr-manager/splr-manager.tpl.html",'<div data-app-toolbar ng-if="supplier.id" data-splr-name="supplier.name" data-splr-id="supplier.id"></div><div class="app-content mngr" tabindex="-1" app-scroll-watcher app-vpos="vpos"><div class="mngr__wrap" ng-if="supplier"><div ng-if="sessData.is_editor || is_owner"><ul class="mngr__menu"><li><a class="mngr__menu-link" ui-sref="byt.splrManager.profile">Профиль</a></li><li><a class="mngr__menu-link" ui-sref="byt.splrManager.address">Адрес</a></li><li><a class="mngr__menu-link" ui-sref="byt.splrManager.social">Контакты</a></li><li><a class="mngr__menu-link" ui-sref="byt.splrManager.servList">Услуги</a></li></ul><div ng-if="!supplier.master_address.geo_district_id" class="pdng text-center" style="border: 1px solid red"><a ui-sref="byt.splrManager.address">Необходимо указать город</a></div><div class="fade mngr__content" ui-view="managerContent">выберите раздел</div></div><div ng-if="!sessData.is_editor && !is_owner"><div class="mrgn pdng text-center">Необходимо <a ui-sref="byt.oauthLogin">авторизоваться</a> для доступа в личный кабинет</div></div></div><div ng-if="err_msg"><div class="err-msg" ng-bind="err_msg"></div><div class="err-alt"><a ui-sref="byt.welcome">Вернуться на главную</a></div></div></div>'),e.put("welcome/agglo-slr.tpl.html",'<div class="agglo-slr"><div class="agglo-slr__header">Выберите город</div><div class="agglo-slr__auto"><span class="agglo-slr__city" ng-if="agglo_calc"><a ui-sref="byt.aggloItem.specList({agglo_local_name: agglo_calc.local_name})">{{agglo_calc.local_name}} </a></span><span class="agglo-slr__autodefine" ng-if="!agglo_calc && !err_calc">автоопределение...</span><div class="err-msg" ng-if="err_calc">{{err_calc}}</div></div><div class="agglo-slr__manual"><a ui-sref="byt.aggloList">выбрать другой город</a></div></div>'),e.put("welcome/wlc.tpl.html",'<div data-app-toolbar></div><div class="app-content"><div class="pure-g"><div class="pure-u pure-u-md-1-4"></div><div class="pure-u-1 pure-u-md-1-2"><div class="wlc"><h1 class="wlc__header">Мастера и салоны красоты</h1><p class="wlc__description">Парикмахеры, стилисты, визажисты, услуги по уходу за ногтями, бровями и ресницами - более 30 000 мастеров и салонов красоты.</p><div class="wlc__agglo-wrap" ng-include="\'welcome/agglo-slr.tpl.html\'"></div><div class="wlc__test text-center"><a ui-sref="byt.quizItem.qstnList({quiz_ttl: \'какая-прическа-мне-подойдет\'})"><span class="fa fa-question-circle"></span> Тест: какая прическа мне подойдет</a></div></div></div></div><div data-app-footer></div></div>'),e.put("agglo-item/offer-list/offer-list.tpl.html",'<div ng-controller="OfferListController as ctrl" ng-if="ctrl.offer_list.length > 0"><div><span>действующие скидки</span></div><div ng-repeat="ofr in ctrl.offer_list"><div><span ng-bind="ofr.percent"></span>%</div><div><div>v<div ng-repeat="rbr in ofr.rubric_names"><span ng-bind="rbr"></span></div></div></div><div class="pdng"><span ng-bind="ofr.conditions"></span><br>окончание акции: <span ng-bind="ofr.end_time*1000 | date : \'d MMMM\'"></span></div><div class="pdng"><span ng-bind="ofr.master_address.description"></span></div><div><button class="app-button" analytics-on analytics-category="offer" analytics-event="offer-{{$index+1}}" ui-sref="byt.splrItem.view({supplier_id:ofr.master_profile.id, name: ofr.master_profile.name})">{{ofr.master_profile.name}}</button></div></div><div class="pdng"><small>Вы - мастер? Оставьте свою скидку в <a target="_blank" href="//vk.com/topic-92002771_31699472">группе приложения</a></small></div></div>'),e.put("agglo-item/spec-item/spec-item.tpl.html",'<div class="full-height" data-ng-if="cur_spec" data-ui-view="specItemContent"></div><div ng-if="is_prg"><div ng-if="!err_cur_spec && !cur_spec"><div class="text-center pdng">загрузка специализации...</div></div></div><div ng-if="err_cur_spec"><div class="err-msg" ng-bind="err_cur_spec.msg"></div><div class="err-alt"><a ng-href="{{home_href}}">Перейти к выбору услуг в городе {{cur_agglo.local_name}}</a></div></div>'),e.put("agglo-item/spec-list/spec-list.tpl.html",'<div data-app-toolbar data-agglo-name="agglo.local_name"></div><div class="app-content spec-list"><h1 class="spec-list__header">{{agglo.local_name}}</h1><ul class="spec-list__list"><li class="spec-list__li" ng-repeat="grp in groups"><div class="spec-list__item-wrap"><a class="spec-list__item-link" ng-href="{{calcHref(grp.name)}}">{{grp.name}}</a></div></li></ul><div ng-if="is_prg"><div ng-if="!groups && !err_groups"><div class="text-center">загрузка категорий...</div></div></div><div ng-if="err_groups"><div class="err-msg" ng-bind="err_groups.msg"></div></div><div data-app-footer></div></div>'),e.put("drct/app-footer/app-footer.tpl.html",'<footer class="app-footer"><div class="pdng"><a href="/about" target="_self">о проекте </a><a href="/agreement" target="_self">регламент </a><a href="//miskra.ru/login" target="_blank">вход для мастеров </a><a href="//vk.com/miskra_club" target="_blank">группа ВК </a><a href="https://vk.com/miskra_app" ng-if="is_web" target="_blank">приложение ВК </a><a href="http://blog.miskra.ru" target="_blank">блог </a><a href="//miskra.ru" target="_blank">веб-сайт</a></div><div class="pdng text-center" ng-if="is_web"><div app-informer></div></div></footer>'),e.put("drct/app-informer/app-informer.tpl.html",'<div><a href="https://metrika.yandex.ru/stat/?id=29726915&amp;from=informer" target="_blank" rel="nofollow"><img src="https://informer.yandex.ru/informer/29726915/3_0_FFFFFFFF_EEEEEEFF_0_pageviews" style="width:88px; height:31px; border:0" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" onclick="try{Ya.Metrika.informer({i:this,id:29726915,lang:\'ru\'});return false}catch(e){}"></a></div>'),e.put("drct/app-share-block/app-share-block.tpl.html",'<div class="share-block"><span class="share-pretext">Поделиться с друзьями: </span><a class="share-vk" target="_blank" ng-href="http://vk.com/share.php?url={{ permalink }}&image={{ pageImage }}" title="Вконтакте" onclick="window.open(this.href, \'\', \'width=550,height=235\');return false;"><i class="fa fa-vk"></i> </a><a class="share-odnoklassniki" target="_blank" ng-href="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st.comments={{ title }}&st._surl={{ permalink }}" title="Одноклассники" onclick="window.open(this.href, \'\', \'width=550,height=235\');return false;"><i class="fa fa-odnoklassniki"></i> </a><a class="share-mailru" target="_blank" ng-href="http://connect.mail.ru/share?url={{ permalink }}&title={{ title }}" title="MailRu" onclick="window.open(this.href, \'\', \'width=550,height=235\');return false;"><i class="fa fa-at"></i></a></div>'),e.put("drct/app-toolbar/app-toolbar.tpl.html",'<div class="app-toolbar"><div class="app-toolbar__user" user-status-drct></div><div class="app-toolbar__search"><a href="https://miskra.ru/search" target="_blank" title="Поиск по сайту miskra.ru"><i class="fa fa-search"></i></a></div><div class="app-toolbar__bread"><div class="app-toolbar__bread-wrap" data-breadcrumb-drct data-agglo-name="aggloName" data-spec-name="specName" data-rubric-name="rubricName" data-rview-id="rviewId" data-rview-name="rviewName" data-splr-id="splrId" data-splr-name="splrName"></div></div></div>'),e.put("drct/tbl-item/tbl-item.tpl.html",'<header class="tbl-item"><div class="tbl-item__ava-name"><div class="tbl-item__avatar-wrap"><a aria-label="Информация о мастере" ng-click="saveHash(supItem.id)" ui-sref="byt.splrItem.main({supplier_id:supItem.id, name: supItem.name})" analytics-on analytics-category="masterinfo" analytics-event="masterinfo-tbl"><span ng-if="supItem && !supItem.avatar"><img class="tbl-item__avatar-logo" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAC4ALgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3qiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAQ9DRSnoaKACiiigAooooAKKKKACjpUMk6pwOT/KqzSM/3j+FAFpriNeh3fSojcseigVBTlVm6AmgB/wBok9f0o8+T+9+lAgk9PzNL9mf/AGaAE8+T+9n8KcLlh1UGmm3kHbP0NMKMvVSKALS3CN1yPrUoIIyDWfSo7IflOKAL9FQxzhuG4P6VNQAUUUUAFFFFAAehooPQ0UAFFFFABRRRQAVVmnJyqdPX1onlydinjv71BQAVJHC0nsvqaWAIXw3XsKuUARJAi9sn3qWiigAooooAKKKKAI3hRu2D6iq7wMnPUetXKKAM+pYpinytyP5VJLAD8yDB9PWq3160AaAORkHiiqkEuw7W+6f0q3QAUUUUAB6Gig9DRQAUUUUAFRTybEwOpqWqEj73LUANqUQM0e4dewpIU8x+fujk1doAz6tQzbvlY8+vrSTQ7vmXr3HrVbvQBoUVDDNu+Vj83r61NQAUVG0yIcE8+1N+0Lno1AE1FMWVH6Hn0p9ABRRTQ6k4DAmgB1QTxbvnXr3qeigDPqzbybl2nqOlRTx7HyPummIxRgw7UAX6KQEEAjvS0AB6Gig9DRQAUUUUARTttix3PFU6nuW+cD0FRIu5wPU0AW4F2xj1PNPZgoyTgUtV7onCjtQAG69E4+tIyiZS6cN3FQUqsUO4daAEqdJPNQxscN2PrSMomXen3u4qCgCaJRHLh+OOM1Z3L6iq6sJl2P8Ae7GozE6nlT9aACTb5hKdKkS4ZVww3e9Q0UATm5JUjb+tQKdrBsdKKKALAuueU4+tTqwdcg8VQqe1PLDtigCaVd8ZHfqKo1o1RkG2Rh70AWLZsx49KmqpbNiQj1FW6AA9DRQehooAKKKKAKdx/rj7YotxmYfnRP8A65qW2/1n4UAW6r3X8FWKr3X8FAFeiiigBVYowYcEVMyiZd6fe7ioKuQrtiX35oApdKtQzbvlbr6+tE0O7LL17j1qr396ALzxq45HPrVR0MbbTU8M2/Ct19fWluVzHu7g0AVaKKKACp7X7zfSoKntfvN9KALNVLkYk+oq3Va5++v0oAiiOJVPvV6qC/eGPWr9AAehooPQ0UAFFFFAFOfiY0W5xKPenXI+cH1FRIdrqfQ0AX6r3X8FWKr3X8NAFeiiigAq9GcxqR6VRqxbyfwH8KALFQTQ7vmX73f3qeigDOqwknmoY2OG7H1p80O75lHzdx61VoAVlKNhhgikqdWEy7HOG7GoWUo2GGCKAEqe1+830qCprX7zfSgC1VS5OZR7CrdUZW3SMfegAiGZFHvV6qlsMyZ7AVboAD0NFB6GigAooooAiuF3R59KqVoEZGDVB1KOV9KALcL7ox6jg0y6HCntmooJNj89D1q2QCMHkGgChRVk2q54Yij7MP736UAVqKs/Zh/e/Sj7MP736UARpcOvB+Ye9P8AtQ/uGl+zD+9+lH2Yf3v0oAja4ckEcAU5lEyl0+93FO+zD+9+lKtvsbcHIP0oAq/zqZWEy7H4YdDT5od2WX73f3qr3oAcylGwRyKmtQcse3ShGWYBJPvdj61YVQoAAwKAGyNsjJ79qo1NcSbm2joKjVSzADqaALNsuEJ9ampFAVQB0FLQAHoaKD0NFABRRRQAVDPHuXcOo/lU1FAGfVmCXcNjde3vUc8W07h909vSoqANCioIp93yvwfX1qegAooooAKKKKACiiigAqCaHd8yj5vT1qeigDO/nU/2hvL2/wAXrST7N3y/e74qKgBKtW0eBvPU9Kihi8w5P3R+tXKACiiigAPQ0UHoaKACiiigAooooACMgg9KqSwFPmXlf5VbooAz6kjnZBg8rUsluG5Xg+lV2VkOGBFAFxZUfoefQ0+s408SOvRjQBeoqoLlx6H8KX7S390UAWqKqG5c9ABTGldurGgC28qJ1P4VXknZuF4H61D9acqsxwoyaAG1LFCZOTwv86kjtwOX5PpVigBAAowBgCloooAKKKKAA9DRQehooAKKKKACiiigAooooAKQgEYIyKWigCFrZD93K1EbZx0wat0UAUTE46qabtPTBrQooAoiNyeFNPFs564H41booAhW2UdSTUoAUYAwKWigAooooAKKKKACiiigAPQ0UHoaKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAD0NFFFAH//Z" alt="аватар" itemprop="logo"> </span><span ng-if="supItem.avatar"><img class="tbl-item__avatar-logo" ng-if="supItem.work_scope" ng-src="{{supItem.avatar}}" alt="аватар" itemprop="logo" onerror="this.onerror=null;this.src=\'data:image/jpeg;base64,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WX73f3qr3oAcylGwRyKmtQcse3ShGWYBJPvdj61YVQoAAwKAGyNsjJ79qo1NcSbm2joKjVSzADqaALNsuEJ9ampFAVQB0FLQAHoaKD0NFABRRRQAVDPHuXcOo/lU1FAGfVmCXcNjde3vUc8W07h909vSoqANCioIp93yvwfX1qegAooooAKKKKACiiigAqCaHd8yj5vT1qeigDO/nU/2hvL2/wAXrST7N3y/e74qKgBKtW0eBvPU9Kihi8w5P3R+tXKACiiigAPQ0UHoaKACiiigAooooACMgg9KqSwFPmXlf5VbooAz6kjnZBg8rUsluG5Xg+lV2VkOGBFAFxZUfoefQ0+s408SOvRjQBeoqoLlx6H8KX7S390UAWqKqG5c9ABTGldurGgC28qJ1P4VXknZuF4H61D9acqsxwoyaAG1LFCZOTwv86kjtwOX5PpVigBAAowBgCloooAKKKKAA9DRQehooAKKKKACiiigAooooAKQgEYIyKWigCFrZD93K1EbZx0wat0UAUTE46qabtPTBrQooAoiNyeFNPFs564H41booAhW2UdSTUoAUYAwKWigAooooAKKKKACiiigAPQ0UHoaKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAD0NFFFAH//Z\';"></span></a></div><div class="tbl-item__name-wrap"><div><a itemprop="url" ui-sref="byt.splrItem.main({supplier_id:supItem.id, name: supItem.name})" ng-click="saveHash(supItem.id)" analytics-on analytics-category="masterinfo" analytics-event="masterinfo-tbl"><span ng-bind="supItem.name" itemprop="name"></span></a></div></div><div class="tbl-item__edit-wrap" ng-if="isEditable"><a target="_blank" ui-sref="byt.splrManager.servItem({supplier_id: supItem.id, id: supItem.master_serv.id})"><i class="fa fa-edit"></i></a></div></div><div class="tbl-item__addt"><div class="tbl-item__bio"><span ng-bind="supItem.bio"></span></div><div class="tbl-item__address-wrap" itemprop="address" itemscope itemtype="http://schema.org/PostalAddress"><div><span class="tbl-item__address-city" itemprop="addressLocality" ng-bind="cityName"></span> <span class="tbl-item__address-street" ng-bind="supItem.sup_geo" ng-if="supItem.sup_geo" itemprop="streetAddress"></span></div><div class="tbl-item__is_out" ng-if="supItem.master_serv.is_out">возможен выезд на дом <span ng-if="supItem.cus_geo" ng-bind="supItem.cus_geo"></span></div></div></div><div class="tbl-item__price" ng-if="supItem.master_serv.price_from || supItem.master_serv.price_to"><strong>Цена</strong>: <span ng-if="supItem.master_serv.price_from">от {{supItem.master_serv.price_from}} </span><span ng-if="supItem.master_serv.price_to">до {{supItem.master_serv.price_to}} </span>руб.</div><div class="tbl-item__price" ng-if="supItem.master_serv.time_from || supItem.master_serv.time_to"><strong>Время выполнения</strong>: <span ng-if="supItem.master_serv.time_from">от {{supItem.master_serv.time_from}} </span><span ng-if="supItem.master_serv.time_to">до {{supItem.master_serv.time_to}} </span>минут</div></header>'),e.put("drct/user-status/user-status.tpl.html",'<div class="user-status"><div ng-if="!sessData.is_loaded"><div class="text-center">...</div></div><div ng-if="sessData.is_loaded"><div ng-if="!sessData.uid"><a class="user-status__icon" ng-href="{{href_login}}"><span class="fa fa-sign-in"></span></a></div><div ng-if="sessData.uid"><div ng-if="sessData.is_supplier"><a ng-href="{{href_supplier}}"><span class="back-img user-status__img" ng-if="sessData.avatar" ng-style="{\'background-image\': \'url({{sessData.avatar}})\'}"></span> <span class="user-status__icon" ng-if="!sessData.avatar"><span class="fa fa-user"></span></span></a></div><div ng-if="sessData.is_editor"><button class="empty-button user-status__icon" ng-click="confirmLogout()"><span ng-if="sessData.is_moder" class="fa fa-empire"></span> <span ng-if="!sessData.is_moder" class="fa fa-user-secret"></span></button></div><div ng-if="!sessData.is_editor && !sessData.is_supplier"><span class="back-img user-status__img" ng-if="sessData.avatar" ng-style="{\'background-image\': \'url({{sessData.avatar}})\'}"></span> <span class="user-status__icon" ng-if="!sessData.avatar"><span class="fa fa-user"></span></span></div></div></div></div>'),e.put("drct/work-gallery/work-gallery.tpl.html",'<div class="wgal"><div class="wgal__photo-wrap" ng-if="workScope.arr.length > 0"><div class="wgal__work-slide" ng-repeat="item in workScope.arr"><div ng-if="item.main_video"><div class="ximg"><div class="ximg__img" ng-if="$first || stateShow.val" ytb-video data-yid="{{item.main_video}}"></div></div></div><div ng-if="item.preview_img" app-gallery-item app-item="item" app-wrap-elem-id="wrapElemId" app-is-show-image="$first || stateShow.val"></div><footer class="wgal__footer"><span ng-if="!item.side_link">&nbsp;</span> <span ng-if="item.side_link"><a target="_blank" ng-href="{{item.side_link}}">photo </a>by <a ng-href="https://www.instagram.com/{{supItem.username}}/" target="_blank" ng-bind="supItem.username"></a> on <a href="https://www.instagram.com" target="_blank">instagram</a></span></footer><button class="wgal__arrow wgal__prev" title="предыдущее фото" ng-if="workScope.arr.length > 1" onclick="this.parentNode.parentNode.scrollLeft -= this.parentNode.clientWidth;" ng-disabled="$first" analytics-on analytics-category="gallerytbl" analytics-event="gallerytbl-prev"><i class="fa fa-chevron-left"></i></button> <button class="wgal__arrow wgal__next" title="следующее фото" ng-if="workScope.arr.length > 1" ng-click="switchNext()" ng-disabled="$last" onclick="this.parentNode.parentNode.scrollLeft += this.parentNode.clientWidth;" analytics-on analytics-category="gallerytbl" analytics-event="gallerytbl-next"><i class="fa fa-chevron-right"></i></button></div></div><div ng-if="!workScope.arr && !workScope.err"><div class="ximg"><div class="ximg__img ximg__wait">...</div></div><footer class="wgal__footer"></footer></div><div ng-if="workScope.arr && workScope.arr.length === 0"><div class="ximg"><div class="ximg__img ximg__nothing">нет фото</div></div><footer class="wgal__footer"></footer></div><div ng-if="workScope.err"><div class="ximg"><div class="ximg__img ximg__nothing">нет фото</div></div><footer class="wgal__footer"></footer></div></div>'),e.put("splr/main/splr-ad.tpl.html",'<div><div class="splr__sub-header">Специальное предложение</div><div><div ng-if="vfirm.ads_ref"><a target="_blank" ng-href="{{vfirm.ads_ref.link}}">{{vfirm.ads_ref.text}}</a></div></div><p></p><p ng-if="vfirm.ads_article"><span ng-bind-html="vfirm.ads_article"></span></p><p ng-if="vfirm.ads_warning"><small ng-bind-html="vfirm.ads_warning"></small></p><p></p></div>'),e.put("splr/main/splr-address.tpl.html",'<ul ng-if="vfirm.city_name"><li class="ctct"><div class="clearfix"><div class="ctct__icon-wrap"><span class="fa fa-home"></span></div><div class="ctct__text-wrap"><div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress"><span itemprop="addressLocality" ng-bind="vfirm.city_name"></span> <span ng-if="vfirm.address"><span>, </span><a ng-href="http://maps.apple.com/?q={{vfirm.city_name | enclink}}{{\', \' | enclink}}{{vfirm.address | enclink}}" target="_blank" rel="nofollow" analytics-on analytics-category="contact" analytics-event="contact-geo"><span itemprop="streetAddress" ng-bind="vfirm.address"></span> <sup><span class="fa fa-external-link"></span></sup></a></span></div><div class="ctct__text-sub">адрес мастера / салона</div></div></div></li><li ng-if="vfirm.address_comment" class="ctct" style="padding-top: 16px"><div class="clearfix"><div class="ctct__icon-wrap"><span class="fa fa-street-view"></span></div><div class="ctct__text-wrap"><div><span ng-bind="vfirm.address_comment"></span></div><div class="ctct__text-sub">как добраться / найти</div></div></div></li><li ng-if="vfirm.out_geo" class="ctct" style="padding-top: 16px"><div class="clearfix"><div class="ctct__icon-wrap"><span class="fa fa-sign-out"></span></div><div class="ctct__text-wrap"><div><span ng-bind="vfirm.out_geo"></span></div><div class="ctct__text-sub">районы, работа на выезде</div></div></div></li></ul>'),e.put("splr/main/splr-main.tpl.html",'<div data-app-toolbar ng-if="!is_map" data-agglo-name="vfirm.city_name" data-splr-name="vfirm.name" data-splr-id="vfirm.id"></div><div data-app-toolbar ng-if="is_map" data-agglo-name="vfirm.city_name"></div><div class="app-content" app-scroll-watcher tabindex="-1" app-vpos="vpos"><div ng-if="is_prg"><div ng-if="!vfirm && !err_msg"><div class="text-center pdng">загрузка информации...</div></div></div><div class="fade splr" ng-if="vfirm" itemscope itemtype="http://schema.org/BeautySalon"><div class="pure-g"><div class="pure-u-1 pure-u-sm-1 pure-u-md-1-8"></div><div class="pure-u-1 pure-u-sm-1-4 pure-u-md-1-4"><div class="splr__side-panel" ng-if="!is_map"><div ng-if="vfirm.avatar"><img class="splr__avatar" ng-src="{{vfirm.avatar}}" itemprop="logo" onerror="this.onerror=null;this.src=\'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAC4ALgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3qiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAQ9DRSnoaKACiiigAooooAKKKKACjpUMk6pwOT/KqzSM/3j+FAFpriNeh3fSojcseigVBTlVm6AmgB/wBok9f0o8+T+9+lAgk9PzNL9mf/AGaAE8+T+9n8KcLlh1UGmm3kHbP0NMKMvVSKALS3CN1yPrUoIIyDWfSo7IflOKAL9FQxzhuG4P6VNQAUUUUAFFFFAAehooPQ0UAFFFFABRRRQAVVmnJyqdPX1onlydinjv71BQAVJHC0nsvqaWAIXw3XsKuUARJAi9sn3qWiigAooooAKKKKAI3hRu2D6iq7wMnPUetXKKAM+pYpinytyP5VJLAD8yDB9PWq3160AaAORkHiiqkEuw7W+6f0q3QAUUUUAB6Gig9DRQAUUUUAFRTybEwOpqWqEj73LUANqUQM0e4dewpIU8x+fujk1doAz6tQzbvlY8+vrSTQ7vmXr3HrVbvQBoUVDDNu+Vj83r61NQAUVG0yIcE8+1N+0Lno1AE1FMWVH6Hn0p9ABRRTQ6k4DAmgB1QTxbvnXr3qeigDPqzbybl2nqOlRTx7HyPummIxRgw7UAX6KQEEAjvS0AB6Gig9DRQAUUUUARTttix3PFU6nuW+cD0FRIu5wPU0AW4F2xj1PNPZgoyTgUtV7onCjtQAG69E4+tIyiZS6cN3FQUqsUO4daAEqdJPNQxscN2PrSMomXen3u4qCgCaJRHLh+OOM1Z3L6iq6sJl2P8Ae7GozE6nlT9aACTb5hKdKkS4ZVww3e9Q0UATm5JUjb+tQKdrBsdKKKALAuueU4+tTqwdcg8VQqe1PLDtigCaVd8ZHfqKo1o1RkG2Rh70AWLZsx49KmqpbNiQj1FW6AA9DRQehooAKKKKAKdx/rj7YotxmYfnRP8A65qW2/1n4UAW6r3X8FWKr3X8FAFeiiigBVYowYcEVMyiZd6fe7ioKuQrtiX35oApdKtQzbvlbr6+tE0O7LL17j1qr396ALzxq45HPrVR0MbbTU8M2/Ct19fWluVzHu7g0AVaKKKACp7X7zfSoKntfvN9KALNVLkYk+oq3Va5++v0oAiiOJVPvV6qC/eGPWr9AAehooPQ0UAFFFFAFOfiY0W5xKPenXI+cH1FRIdrqfQ0AX6r3X8FWKr3X8NAFeiiigAq9GcxqR6VRqxbyfwH8KALFQTQ7vmX73f3qeigDOqwknmoY2OG7H1p80O75lHzdx61VoAVlKNhhgikqdWEy7HOG7GoWUo2GGCKAEqe1+830qCprX7zfSgC1VS5OZR7CrdUZW3SMfegAiGZFHvV6qlsMyZ7AVboAD0NFB6GigAooooAiuF3R59KqVoEZGDVB1KOV9KALcL7ox6jg0y6HCntmooJNj89D1q2QCMHkGgChRVk2q54Yij7MP736UAVqKs/Zh/e/Sj7MP736UARpcOvB+Ye9P8AtQ/uGl+zD+9+lH2Yf3v0oAja4ckEcAU5lEyl0+93FO+zD+9+lKtvsbcHIP0oAq/zqZWEy7H4YdDT5od2WX73f3qr3oAcylGwRyKmtQcse3ShGWYBJPvdj61YVQoAAwKAGyNsjJ79qo1NcSbm2joKjVSzADqaALNsuEJ9ampFAVQB0FLQAHoaKD0NFABRRRQAVDPHuXcOo/lU1FAGfVmCXcNjde3vUc8W07h909vSoqANCioIp93yvwfX1qegAooooAKKKKACiiigAqCaHd8yj5vT1qeigDO/nU/2hvL2/wAXrST7N3y/e74qKgBKtW0eBvPU9Kihi8w5P3R+tXKACiiigAPQ0UHoaKACiiigAooooACMgg9KqSwFPmXlf5VbooAz6kjnZBg8rUsluG5Xg+lV2VkOGBFAFxZUfoefQ0+s408SOvRjQBeoqoLlx6H8KX7S390UAWqKqG5c9ABTGldurGgC28qJ1P4VXknZuF4H61D9acqsxwoyaAG1LFCZOTwv86kjtwOX5PpVigBAAowBgCloooAKKKKAA9DRQehooAKKKKACiiigAooooAKQgEYIyKWigCFrZD93K1EbZx0wat0UAUTE46qabtPTBrQooAoiNyeFNPFs564H41booAhW2UdSTUoAUYAwKWigAooooAKKKKACiiigAPQ0UHoaKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAD0NFFFAH//Z\';"></div></div></div><div class="pure-u-1 pure-u-sm-3-4 pure-u-md-1-2"><div class="splr__main-panel"><h1 itemprop="name" ng-bind="vfirm.name"></h1><div class="splr__status"><sup ng-if="vfirm.is_company">салон</sup></div><div class="splr__dscr"><span itemprop="description" ng-bind="vfirm.bio" ng-if="vfirm.bio"></span></div><div class="splr__params"><div ng-include="\'splr/main/splr-address.tpl.html\'"></div><ul class="ctct-list"><li class="ctct-list__item" ng-repeat="ctct in vfirm.contacts"><div data-splr-contact-drct data-ctct="ctct"></div></li></ul></div><div class="splr__ads" ng-if="vfirm.ads_article"><div ng-include="\'splr/main/splr-ad.tpl.html\'"></div></div><div ng-if="sessData.is_editor || vfirm.id === sessData.uid"><div class="pdng"><app-splr-fill data-contacts="vfirm.contacts" data-address="vfirm.address" data-bio="vfirm.bio"></app-splr-fill></div><div class="pdng"><a ui-sref="byt.splrManager.profile({supplier_id: vfirm.id})" analytics-on analytics-category="master" analytics-event="edit"><span class="fa fa-pencil"></span> Редактировать профиль</a></div></div><div class="pdng" ng-if="vfirm.id === sessData.uid"><button class="app-button" ng-click="logout()" analytics-on analytics-category="master" analytics-event="exit">Выйти из аккаунта</button></div></div></div><div class="pure-u-1 pure-u-sm-1 pure-u-md-1-8"></div></div><div class="splr__serv-list" ng-if="arr_master_serv.length > 0"><div class="pure-g"><div class="pure-u-1 pure-u-sm-1-2 pure-u-md-1-3" ng-repeat="msrv in arr_master_serv" on-finish-render="servListRepeatFinished"><div class="splr__serv-item" id="serv{{msrv.id}}"><div data-splr-serv-drct data-msrv="msrv" data-city-spec-href="calcCitySpecHref(msrv, vfirm.city_name)" data-is-editable="sessData.is_editor || vfirm.id === sessData.uid"></div><div app-work-gallery app-sup-item="vfirm" app-work-scope="msrv.work_scope" app-wrap-elem-id=""></div></div></div></div></div><div class="splr__soc-block" ng-if="url_to_share && !is_map"><div class="splr__soc-item"><div app-vk-like data-subject-id="supplier{{vfirm.id}}" data-subject-url="{{url_to_share}}" data-page-title="{{vfirm.name}}" data-page-description="{{vfirm.bio}}" data-page-image="{{vfirm.avatar}}" analytics-on="click" analytics-category="masteritem" analytics-event="likemaster"></div></div></div><div class="splr__share-block" ng-if="vfirm && url_to_share && !is_map"><div app-share-block data-title="{{vfirm.name}}" data-permalink="{{url_to_share}}" data-page-image="{{vfirm.avatar}}"></div></div><div class="splr__comment-form" ng-if="url_to_share && !is_map"><div app-comment-form data-subject-id="supplier{{vfirm.id}}" data-subject-url="{{url_to_share}}"></div></div><div class="splr__city-link" ng-if="vfirm.city_name"><a ui-sref="byt.aggloItem.specList({agglo_local_name: vfirm.city_name})"><span ng-if="vfirm.city_name_prepositional">Просмотреть всех мастеров в {{vfirm.city_name_prepositional}} </span><span ng-if="!vfirm.city_name_prepositional">Просмотреть всех мастеров в городе {{vfirm.city_name}}</span></a></div><div ng-if="statePrev.url" class="pdng mrgn text-center"><a ng-href="{{statePrev.url}}" onclick="history.back(); return false;"><span class="fa fa-arrow-left"></span> Вернуться назад</a></div><div class="splr__id"><a ng-href="{{supplier_url}}" itemprop="url">id{{splr.id}}</a></div></div><div ng-if="err_msg"><div class="err-msg" ng-bind="err_msg"></div><div class="err-alt"><a ui-sref="byt.welcome">Перейти на главную страницу</a></div></div><div data-app-footer></div></div>'),
e.put("splr-manager/address/address-edt.tpl.html",'<form class="frm" name="addressForm"><div class="frm__inp"><label>Адрес мастера / салона</label><input ng-model="ggg.supStreet" placeholder="ул. Такая-то, 123"></div><div class="frm__inp"><label>Комментарий (как найти, пройти)</label><input ng-model="ggg.supComment" placeholder="3 подъезд, 2 этаж"></div><div class="frm__inp"><label>Условия работы на выезде</label><input ng-model="ggg.cusConds"></div><div class="frm__but"><button class="app-button" ng-click="updateAddress(mdr, ggg)">Сохранить</button> <span ng-show="update_progress">сохранение... </span><span ng-show="is_saved">сохранено успешно</span></div></form>'),e.put("splr-manager/address/agglo-edt.tpl.html",'<div class="frm"><div class="frm__sel" ng-if="arr_geo_agglo.length > 0"><label>Город<label><select placeholder="выберите город" data-ng-model="slc_data.agglo_id" data-ng-change="onSelectedItemChange(slc_data.agglo_id)"><option value="">---</option><option ng-repeat="item in arr_geo_agglo" value="{{item.id}}">{{item.local_name}}</option></select></label></label></div><div data-ng-if="supplier.master_address.geo_district_id"><div data-address-edt-drct data-mdr="supplier.master_address" data-mdr-geo-district-id="supplier.master_address.geo_district_id" data-mdr-description="supplier.master_address.description"></div></div></div>'),e.put("splr-manager/email/email-edt.tpl.html",'<form class="frm" name="emailForm" ng-submit="updateEmail(supplier)"><div class="frm__inp"><label>Email (публичный)</label><input ng-model="supplier.main_email"></div><div class="frm__but"><button class="app-button" ng-disabled="update_progress" type="submit">Сохранить</button> <span ng-show="update_progress">сохранение... </span><span ng-show="is_saved">сохранено успешно</span></div></form>'),e.put("splr-manager/fio/fio.tpl.html","<div></div>"),e.put("splr-manager/phone/phone-edt.tpl.html",'<form class="frm" name="phoneForm" ng-submit="updatePhone(supplier)"><div class="frm__inp"><label>Мобильный телефон (публичный)</label><input ng-model="supplier.main_phone" placeholder="+79871234567"></div><div class="frm__but"><button class="app-button" ng-disabled="update_progress" type="submit">Сохранить</button> <span ng-if="update_progress">сохранение... </span><span ng-if="is_saved">сохранено успешно</span></div></form>'),e.put("splr-manager/profile/profile-edt.tpl.html",'<form class="frm" name="profileForm" ng-submit="updateProfile(supplier)"><div class="frm__rad"><label><input type="radio" name="asdf" ng-model="supplier.is_company" ng-value="false"> Мастер</label><label><input type="radio" name="asdf" ng-model="supplier.is_company" ng-value="true"> Салон</label></div><div class="frm__inp"><label>Имя/Название</label><input ng-model="supplier.name" required></div><div class="frm__inp"><label>Описание, биография</label><input ng-model="supplier.bio"></div><div class="frm__but"><button class="app-button" ng-disabled="update_progress" type="submit">Сохранить</button> <span ng-show="update_progress">сохранение... </span><span ng-show="is_saved">сохранено успешно</span></div></form><div ng-if="is_owner || sessData.is_moder"><a ui-sref="byt.splrManager.removal" class="button-del">Удаление аккаунта</a></div>'),e.put("splr-manager/removal/removal.tpl.html",'<div class="text-center" ng-if="is_owner || sessData.is_moder"><p>Из системы удаляются все данные аккаунта, в том числе контакты, услуги и работы.</p><div ng-if="!is_progress"><div><button class="app-button" ng-click="removeAccount(supplier)">Удалить аккаунт</button></div><div><small>*последующее восстановление аккаунта невозможно</small></div></div><div ng-if="is_progress" class="text-center">удаление...</div><div class="err-msg" ng-if="err_msg">{{err_msg}}</div></div>'),e.put("splr-manager/serv-creator/serv-creator-edt.tpl.html",'<div class="serv-creator-edt"><h1 class="header">Добавление услуг</h1><ul class="groups"><li ng-repeat="grp in arr_serv_group"><h2 class="group-header" ng-click="is_opened=!is_opened">{{ grp.name}} <i class="fa fa-angle-double-down" ng-if="!is_opened"></i> <i class="fa fa-angle-double-up" ng-if="is_opened"></i></h2><ul class="rubrics" ng-show="is_opened"><li ng-repeat="rbr in grp.arr_serv_rubric | filter: isFree | orderBy:\'name\'"><label><input type="checkbox" ng-model="is_checked" ng-change="handleChange(is_checked, rbr.id)"> <span>{{ rbr.name }}</span></label></li></ul></li></ul><div><button class="app-button" ng-click="addServs(arr_ids)" ng-disabled="arr_ids.length === 0 || is_progress">Добавить услуги ({{arr_ids.length}})</button> <span ng-if="is_progress">добавление...</span></div><div class="back-link"><a ui-sref="byt.splrManager.servList({supplier_id: supplier.id})">вернуться к перечню услуг</a></div><div class="err-msg" ng-if="err_insert">Возникла непредвиденная ошибка. Попробуйте ещё раз.</div></div>'),e.put("splr-manager/serv-item/serv-item-edt.tpl.html",'<div class="serv-item-edt"><div ng-if="msrv"><div class="clearfix wrap-header"><div class="wrap-del" ng-if="is_owner || sessData.is_moder"><button class="button-del" ng-click="deleteServ(msrv)" title="удалить услугу"><i class="fa fa-trash"></i></button></div><h1 class="wrap-title">{{ msrv.serv_rubric_name }}</h1></div><form class="serv-form"><div class="form-item"><div class="form-item-header">Цена услуги, руб.</div><label class="lbl">от <input class="inp" type="number" ng-model="msrv.price_from"></label><label class="lbl">до <input class="inp" type="number" ng-model="msrv.price_to"></label></div><div class="form-item"><div class="form-item-header">Время выполнения, минут</div><label class="lbl">от <input class="inp" type="number" ng-model="msrv.time_from"></label><label class="lbl">до <input class="inp" type="number" ng-model="msrv.time_to"></label></div><div class="form-item"><label><input type="checkbox" ng-model="msrv.is_out"> Возможен выезд на дом</label></div><div class="form-item"><button class="app-button" ng-click="updateMsrv(msrv)">Сохранить</button> <span ng-if="update_progress">сохранение... </span><span ng-if="is_saved">сохранено</span></div><div class="err-msg" ng-if="err_update">{{err_update}}</div></form><div work-list-edt data-master-profile-id="supplier.id" data-serv-rubric-id="msrv.serv_rubric_id" data-serv-rubric-name="msrv.serv_rubric_name" data-vpos="vpos" data-can-delete="is_owner || sessData.is_moder" data-can-insert="is_owner || sessData.is_moder"></div></div><div class="err-msg" ng-if="err_msrv">{{err_msrv.msg}}</div><div ng-if="!err_msrv && !msrv">...</div></div>'),e.put("splr-manager/serv-list/serv-list-edt.tpl.html",'<div class="serv-list-edt"><h1 class="serv-list-edt__header">Услуги <a class="app-button" ui-sref="byt.splrManager.servCreator" ng-if="is_owner || sessData.is_moder"><i class="fa fa-plus"></i> Добавить</a></h1><ul class="serv-list-edt__list pure-g" ng-if="arr_master_serv"><li class="pure-u-1 pure-u-sm-1-2 pure-u-md-1-4" ng-repeat="msrv in arr_master_serv"><div class="serv-list-edt__item-wrap"><a class="serv-list-edt__item-link" ui-sref="byt.splrManager.servItem({id: msrv.id})">{{msrv.serv_rubric_name}}</a></div></li></ul><div ng-if="err_master_serv">Ошибка загрузки услуг. Попробуйте позже.</div><div ng-if="!err_master_serv && !arr_master_serv">...</div></div><div ng-if="supplier.nstg_id"><p>Фотографии работ и наименования услуг экспортируются автоматически из вашего аккаунта Инстаграм.</p><p>Первоначальный экспорт запускается в ближайшие пару дней после создания кабинета.</p><p>Дальнейший экспорт (обновление работ и услуг) происходит примерно раз в неделю.</p><p>Для того, чтобы ваши фотографии были экспортированы, необходимо выставить соответствующие тэги к фотографиям в формате #городуслуга или #услугагород, например: #москваманикюр #педикюрмосква #наращиваниересницнабережныечелны #спбстрижка и т.п.</p><p>Тэг должен включать название вашего города и наименование услуги. Название города может быть как полным, так и частоупотребляемым сокращением, например: #санктпетербург или #спб;	#ростовнадону или #рнд;	#новосибирск или #новосиб</p><p>Пробелы и дефисы не разрешены в тэгах. Регистр букв не важен.</p></div>'),e.put("splr-manager/social/social-edt.tpl.html",'<div class="mngr__soc-block"><div splr-phone-edt data-supplier="supplier"></div></div><div class="mngr__soc-block" ng-if="sessData.is_editor"><div splr-vkid-edt data-supplier="supplier"></div></div><div class="mngr__soc-block"><form class="frm" name="contactForm" ng-submit="updateProfile(supplier)"><div class="frm__inp"><label>Skype</label><input ng-model="supplier.skype"></div><div class="frm__inp"><label>Twitter</label><input ng-model="supplier.twitter"></div><div class="frm__inp"><label>WhatsApp</label><input ng-model="supplier.whatsapp"></div><div class="frm__inp"><label>Viber</label><input ng-model="supplier.viber"></div><div class="frm__inp"><label>Вконтакте (группа)</label><input ng-model="supplier.vkontakte" placeholder="https://vk.com/club123"></div><div class="frm__inp"><label>Одноклассники</label><input ng-model="supplier.odnoklassniki" placeholder="http://ok.ru/club123"></div><div class="frm__inp"><label>Facebook</label><input ng-model="supplier.facebook" placeholder="https://www.facebook.com/club123"></div><div class="frm__inp"><label>Website</label><input ng-model="supplier.website" placeholder="https://example.com"></div><div class="frm__inp"><label>Стационарный телефон</label><input ng-model="supplier.landline"></div><div class="frm__but"><button class="app-button" ng-disabled="update_progress" type="submit">Сохранить</button> <span ng-show="update_progress">сохранение... </span><span ng-show="is_saved">сохранено успешно</span></div></form></div>'),e.put("splr-manager/vkid/vkid-edt.tpl.html",'<form class="frm" name="vkidForm" ng-submit="updateVkid(supplier.id, supplier.vk_id)"><div class="frm__inp"><label>Vkontakte id (число)</label><input ng-model="supplier.vk_id" placeholder="7654321"></div><div class="frm__but"><button class="app-button" ng-disabled="update_progress" type="submit">Сохранить</button> <span ng-if="update_progress">сохранение... </span><span ng-if="is_saved">сохранено успешно</span></div></form>'),e.put("splr-manager/work-creator/work-creator-edt.tpl.html",'<div class="work-creator-edt"><form name="uform"><div><button class="btn-video-link" ng-click="addVideoLink()">добавить ссылку на видео</button></div><div class="txt-or">или</div><div class="drop-box" ngf-select ngf-drop ngf-pattern="\'image/jpeg,image/png\'" ngf-accept="\'image/jpeg,image/png\'" ng-model="files" ngf-multiple="true" ngf-min-height="200" ngf-min-width="200" ngf-max-height="4000" ngf-max-width="4000" ngf-max-size="5MB" ngf-max-files="10">добавить фотографии...</div><div class="err-selection" ng-if="!uform.$valid"><div>некоторые файлы не удалось добавить:<ul><li ng-if="uform.$error.minHeight">минимальная высота: 200px</li><li ng-if="uform.$error.minWidth">минимальная ширина: 200px</li><li ng-if="uform.$error.maxHeight">максимальная высота: 4000px</li><li ng-if="uform.$error.maxWidth">максимальная ширина: 4000px</li><li ng-if="uform.$error.pattern">разрешённые типы файлов: png, jpg (jpeg)</li></ul><span ng-if="uform.$error.maxSize">максимальный размер файла: 5МБ</span></div><div ng-if="uform.$error.maxFiles">можно выбрать до 10 файлов за один раз</div></div><div ng-if="files"><div class="thumbnail-wrap" ng-repeat="fl in files"><div class="thumbnail-progress" ng-if="progress && $index === 0">загрузка {{progress}}%</div><div><img class="thumbnail" ngf-thumbnail="fl"></div><div class="thumbnail-name">{{ fl.name }}</div><div ng-if="!progress"><button class="button-del" ng-click="removePreFile(files, $index)"><i class="fa fa-trash"></i></button></div></div></div><button class="app-button" type="submit" ng-if="files && files.length && !progress" ng-click="submit(uform, files)">Добавить фотографии</button></form></div>'),e.put("splr-manager/work-item/work-item-edt.tpl.html",'<div class="work-item-edt"><div ng-if="servWork.main_video"><div ytb-video data-yid="{{servWork.main_video}}"></div></div><div class="ximg" ng-if="servWork.preview_img"><a ui-sref="byt.mediaItem({media_id:servWork.id})"><img class="ximg__img" ng-if="is_show" ng-src="{{servWork.preview_img}}"></a></div><div class="created">{{servWork.created*1000 | date:\'dd.MM.yyyy\'}}</div></div>'),e.put("splr-manager/work-list/work-list-edt.tpl.html",'<div class="work-list-edt"><div ng-if="canInsert"><div work-creator-edt data-serv-rubric-id="servRubricId" data-serv-rubric-name="servRubricName" data-master-profile-id="masterProfileId" data-arr-serv-work="arr_serv_work"></div></div><div ng-if="arr_serv_work"><div class="list-item" ng-repeat="wrk in arr_serv_work"><div work-item-edt data-serv-work="wrk" data-vpos="vpos"></div><div ng-if="canDelete"><button class="button-del" title="удалить работу" ng-click="deleteServWork(wrk.id, servRubricId)"><i class="fa fa-trash"></i></button></div></div></div><div class="err-msg" ng-if="err_arr">{{err_arr.msg}}</div><div ng-if="!err_arr && !arr_serv_work">...</div></div>'),e.put("agglo-item/spec-item/rubric-item/blog-links.tpl.html",'<div class="blog-links" ng-if="rubricArticles.length"><div class="blog-links__header">Статьи по теме</div><ul><li class="blog-links__item" ng-repeat="article in rubricArticles"><a target="_blank" ng-href="{{article.lnk}}">{{article.ttl}} <sup><i class="fa fa-external-link"></i></sup></a></li></ul></div>'),e.put("agglo-item/spec-item/rubric-item/outer-links.tpl.html",'<div class="outer-links"><div class="outer-links__header">Мастера и салоны красоты</div><div class="outer-links__item"><a ui-sref="byt.aggloItem.specItem.rubricItem.prtfView" title="Все фотографии {{curRubric.case_gen}}"><i class="fa fa-picture-o"></i><br><span>в галерее</span></a></div><div class="outer-links__item"><a ui-sref="byt.aggloItem.specItem.rubricItem.tblView" title="Каталог мастеров и салонов красоты {{curRubric.name}}"><i class="fa fa-list"></i><br><span>в каталоге</span></a></div></div>'),e.put("agglo-item/spec-item/rubric-item/rubric-item.tpl.html",'<div class="full-height" ng-if="cur_rubric" ui-view="rubricItemContent"></div><div ng-if="is_prg"><div ng-if="!cur_rubric && !err_cur_rubric"><div class="pdng text-center">загрузка услуги...</div></div></div><div ng-if="err_cur_rubric"><div class="err-msg" ng-bind="err_cur_rubric.msg"></div><div class="err-alt"><a ng-href="{{home_href}}">Перейти к выбору услуг в городе {{cur_agglo.local_name}}</a></div></div>'),e.put("agglo-item/spec-item/rubric-item/similar-links.tpl.html",'<div class="similar-links"><div class="similar-links__header">Возможно вас заинтересует</div><div><div class="similar-links__item" ng-repeat="rbr in similarRubrics"><a ui-sref="byt.aggloItem.specItem.rubricItem.tblView({agglo_local_name: curAgglo.local_name, spec_name: rbr.item.serv_group_name, rubric_name: rbr.item.name})">{{rbr.item.name}}</a></div></div></div>'),e.put("agglo-item/spec-item/rubric-list/rubric-list.tpl.html",'<div data-app-toolbar data-agglo-name="agglo.local_name" data-spec-name="spec.name"></div><div class="app-content rubric-list"><h1 class="rubric-list__header">{{spec.name}} в {{agglo.case_prepositional}}</h1><div ng-if="allRubrics"><ul class="rubric-list__list pure-g" ng-if="rubrics.length > 0"><li class="pure-u-1 pure-u-sm-1-2 pure-u-md-1-4" ng-repeat="item in rubrics"><div class="rubric-list__item-wrap"><a class="rubric-list__item-link" ng-href="{{calcHref(item.name, \'tblView\')}}">{{item.name}}</a><div class="rubric-list__item-counter">{{item.count_master_serv}}</div></div></li></ul><div class="err-msg" ng-if="rubrics.length === 0">Не найдено услуг в городе {{agglo.local_name}} по специальности {{spec.name}}</div><div class="mrgn text-center" ng-if="spec.id === \'hair\'"><a ui-sref="byt.quizItem.qstnList({quiz_ttl: \'какая-прическа-мне-подойдет\'})"><span class="fa fa-question-circle"></span> Тест: какая прическа мне подойдет</a></div></div><div ng-if="is_prg"><div ng-if="!allRubrics && !err_rubrics"><div class="text-center"><div class="xprogress"><span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span></div></div></div></div><div ng-if="err_rubrics"><div class="err-msg" ng-bind="err_rubrics.msg"></div></div><div data-app-footer></div></div>'),e.put("splr/main/splr-contact/splr-contact.tpl.html",'<div class="clearfix"><div ng-if="ctct.type === \'phone\'"><div class="ctct__icon-wrap"><span class="fa fa-mobile"></span></div><div class="ctct__text-wrap"><div><span ng-show="is_phone_open"><a itemprop="telephone" ng-href="tel:{{ctct.value}}" ng-bind="ctct.value"></a> </span><span ng-show="!is_phone_open" style="cursor:pointer" analytics-on="click" analytics-category="contact" analytics-event="contact-phone" ng-click="is_phone_open = true"><span ng-bind="ctct.value.substr(0, 5)"></span> <span>...</span> <span class="ctct__show-link">показать</span></span></div><div class="ctct__text-sub">мобильный телефон <span ng-bind="ctct.alias"></span> <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'landline\'"><div class="ctct__icon-wrap"><span class="fa fa-phone"></span></div><div class="ctct__text-wrap"><div><span ng-show="is_landline_open"><span ng-bind="ctct.value"></span> </span><span ng-show="!is_landline_open" style="cursor:pointer" analytics-on="click" analytics-category="contact" analytics-event="contact-landline" ng-click="is_landline_open = true"><span ng-bind="ctct.value.substr(0, 5)"></span> <span>...</span> <span class="ctct__show-link">показать</span></span></div><div class="ctct__text-sub">стационарный телефон <span ng-bind="ctct.alias"></span> <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'whatsapp\'"><div class="ctct__icon-wrap"><span class="fa fa-whatsapp"></span></div><div class="ctct__text-wrap"><div><span ng-show="is_whatsapp_open"><a ng-href="tel:{{ctct.value}}" ng-bind="ctct.value"></a> </span><span ng-show="!is_whatsapp_open" style="cursor:pointer" analytics-on="click" analytics-category="contact" analytics-event="contact-whatsapp" ng-click="is_whatsapp_open = true"><span ng-bind="ctct.value.substr(0, 5)"></span> <span>...</span> <span class="ctct__show-link">показать</span></span></div><div class="ctct__text-sub">whatsapp <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'viber\'"><div class="ctct__icon-wrap"><span class="fa fa-phone-square"></span></div><div class="ctct__text-wrap"><div><span ng-show="is_viber_open"><a ng-href="tel:{{ctct.value}}" ng-bind="ctct.value"></a> </span><span ng-show="!is_viber_open" style="cursor:pointer" analytics-on="click" analytics-category="contact" analytics-event="contact-viber" ng-click="is_viber_open = true"><span ng-bind="ctct.value.substr(0, 5)"></span> <span>...</span> <span class="ctct__show-link">показать</span></span></div><div class="ctct__text-sub">viber <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'fax\'"><div class="ctct__icon-wrap"><span class="fa fa-fax"></span></div><div class="ctct__text-wrap"><div itemprop="faxNumber" ng-bind="ctct.value"></div><div class="ctct__text-sub">факс <span ng-bind="ctct.alias"></span> <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'email\'"><div class="ctct__icon-wrap"><span class="fa fa-envelope"></span></div><div class="ctct__text-wrap"><div><span ng-show="is_email_open"><span itemprop="email" ng-bind="ctct.value"></span> </span><span ng-show="!is_email_open" style="cursor:pointer" analytics-on="click" analytics-category="contact" analytics-event="contact-email" ng-click="is_email_open = true"><span ng-bind="ctct.value.substr(0, 7)"></span> <span>...</span> <span class="ctct__show-link">показать</span></span></div><div class="ctct__text-sub">email <span ng-bind="ctct.alias"></span> <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'skype\'"><div class="ctct__icon-wrap"><span class="fa fa-skype"></span></div><div class="ctct__text-wrap"><div>{{ctct.alias}}</div><div class="ctct__text-sub">Skype <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'icq\'"><div class="ctct__icon-wrap"><span class="fa fa-comments"></span></div><div class="ctct__text-wrap"><div ng-bind="ctct.value"></div><div class="ctct__text-sub">icq <span ng-bind="ctct.alias"></span> <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'jabber\'"><div class="ctct__icon-wrap"><span class="fa fa-comments-o"></span></div><div class="ctct__text-wrap"><div ng-bind="ctct.value"></div><div class="ctct__text-sub">jabber <span ng-bind="ctct.alias"></span> <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'website\'"><div class="ctct__icon-wrap"><span class="fa fa-globe"></span></div><div class="ctct__text-wrap"><a target="_blank" rel="nofollow" ng-if="ctct.value" analytics-on analytics-category="contact" analytics-event="contact-website" ng-href="{{ctct.value}}">{{ctct.alias}} <sup><span class="fa fa-external-link"></span></sup> </a><span ng-if="!ctct.value">нет данных</span><div class="ctct__text-sub">веб-сайт <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'vkprofile\'"><div class="ctct__icon-wrap"><span class="fa fa-vk"></span></div><div class="ctct__text-wrap"><a target="_blank" rel="nofollow" analytics-on analytics-category="contact" analytics-event="contact-vkprofile" ng-href="{{ctct.value}}">{{ctct.alias}} <sup><span class="fa fa-external-link"></span></sup></a><div class="ctct__text-sub">ВКонтакте (профиль) <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'vkontakte\'"><div class="ctct__icon-wrap"><span class="fa fa-vk"></span></div><div class="ctct__text-wrap"><a target="_blank" rel="nofollow" analytics-on analytics-category="contact" analytics-event="contact-vkn" ng-href="{{ctct.value}}">{{ctct.alias}} <sup><span class="fa fa-external-link"></span></sup></a><div class="ctct__text-sub">ВКонтакте (группа) <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'odnoklassniki\'"><div class="ctct__icon-wrap"><span class="fa fa-users"></span></div><div class="ctct__text-wrap"><a target="_blank" rel="nofollow" analytics-on analytics-category="contact" analytics-event="contact-odnoklassniki" ng-href="{{ctct.value}}"><span ng-bind="ctct.alias"></span></a><div class="ctct__text-sub">Одноклассники <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'facebook\'"><div class="ctct__icon-wrap"><span class="fa fa-facebook"></span></div><div class="ctct__text-wrap"><a target="_blank" rel="nofollow" analytics-on analytics-category="contact" analytics-event="contact-fbk" ng-href="{{ctct.value}}"><span ng-bind="ctct.alias"></span></a><div class="ctct__text-sub">Facebook <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'instagram\'"><div class="ctct__icon-wrap"><span class="fa fa-instagram"></span></div><div class="ctct__text-wrap"><a target="_blank" rel="nofollow" itemprop="sameAs" aria-label="instagram" analytics-on analytics-category="contact" analytics-event="contact-nstg" ng-href="{{ctct.value}}">{{ctct.alias}} <sup><span class="fa fa-external-link"></span></sup></a><div class="ctct__text-sub">Instagram <span ng-bind="ctct.comment"></span></div></div></div><div ng-if="ctct.type === \'twitter\'"><div class="ctct__icon-wrap"><span class="fa fa-twitter"></span></div><div class="ctct__text-wrap"><span ng-bind="ctct.alias"></span><div class="ctct__text-sub">Twitter <span ng-bind="ctct.comment"></span></div></div></div></div>'),e.put("splr/main/splr-serv/splr-serv.tpl.html",'<div class="splr-serv" itemscope itemtype="http://schema.org/Service"><div ng-if="isEditable" class="splr-serv__edit"><a title="Редактировать услугу и фото" ui-sref="byt.splrManager.servItem({supplier_id: msrv.master_profile_id, id: msrv.id})"><i class="fa fa-edit"></i></a></div><h2 class="splr-serv__name" ng-bind="msrv.serv_rubric_name" itemprop="name"></h2><div class="splr-serv__price-wrap" ng-if="msrv.price_from || msrv.price_to"><span ng-if="msrv.price_from">от <span class="splr-serv__price">{{msrv.price_from}}</span> </span><span ng-if="msrv.price_to">до <span class="splr-serv__price">{{msrv.price_to}}</span> </span>руб.</div><div><a class="splr-serv__city-spec-href" ng-href="{{citySpecHref}}">показать всех мастеров</a></div></div>'),e.put("agglo-item/spec-item/rubric-item/prtf-view/prtf-item.tpl.html",'<div class="prtf-item"><a class="prtf-item__img-wrap" ng-if="pw.preview_img" ng-href="{{workInfoLink}}" ng-click="saveHash(pw.id)"><span class="back-img back-grey prtf-item__img" ng-style="{\'background-image\': \'url({{pw.preview_img}})\'}" ng-if="pw.is_show"></span></a><div class="prtf-item__img-wrap" ng-if="pw.main_video"><div class="back-img back-grey prtf-item__img" ng-if="pw.is_show" ytb-video data-yid="{{pw.main_video}}"></div></div><div class="prtf-item__name-wrap" ng-if="pw.preview_img"><a class="prtf-item__master-link" ng-href="{{masterInfoLink}}" ng-click="saveHash(pw.id)" analytics-on analytics-category="masterinfo" analytics-event="masterinfo-prtf">{{pw.master_profile_name}}</a></div></div>'),e.put("agglo-item/spec-item/rubric-item/prtf-view/prtf-view.tpl.html",'<div data-app-toolbar data-agglo-name="cur_agglo.local_name" data-spec-name="cur_spec.name" data-rubric-name="cur_rubric.name" data-rview-id="rview_id" data-rview-name="rview_name"></div><div class="app-content" tabindex="-1" app-scroll-watcher app-vpos="vpos"><div ng-if="arr_prtf_work"><div><div><h1 class="page-header" data-ng-bind="page_header"></h1><div class="mrgn"><div ng-if="arr_prtf_work.length === 0">По данному запросу не найдены фотографии работ.</div><div ng-if="arr_prtf_work.length > 0">найдено: <strong ng-bind="arr_prtf_work.length"></strong></div></div></div></div><div ng-if="arr_prtf_work.length > 0"><ul class="pure-g"><li class="pure-u-1 pure-u-sm-1-2 pure-u-md-1-4" ng-repeat="pw in arr_prtf_work" on-finish-render="servListRepeatFinished" id="work{{pw.id}}"><div class="prtf-view-block" prtf-item-drct data-pw="pw" data-rubric-name="cur_rubric.name"></div></li></ul><div class="mrgn"><div class="text-center pdng"><div class="text-center pdng"><a ui-sref="byt.aggloItem.specItem.rubricItem.tblView">Каталог мастеров <span ng-if="cur_rubric.case_dat">по {{cur_rubric.case_dat}}</span></a></div></div></div><div class="prtf-view__bottom"><div app-similar-links data-cur-agglo="cur_agglo" data-similar-rubrics="similar_rubrics"></div><div app-outer-links data-cur-agglo="cur_agglo" data-cur-spec="cur_spec" data-cur-rubric="cur_rubric"></div><div app-blog-links data-rubric-articles="rubric_articles"></div><div class="pdng"><a ui-sref="byt.quizItem.qstnList({quiz_ttl: \'какая-прическа-мне-подойдет\'})"><span class="fa fa-question-circle"></span> Тест: какая прическа мне подойдет</a></div><div class="pdng"><a ng-href="{{home_href}}"><span class="fa fa-list"></span> Вернуться к выбору услуг</a></div></div></div><div ng-if="!arr_prtf_work && !err_arr_prtf_work"><div class="pdng text-center">загрузка фото...</div></div><div ng-if="err_arr_prtf_work"><div class="pdng"><span ng-bind="err_arr_prtf_work.msg"></span></div></div><div data-app-footer></div></div></div>'),e.put("agglo-item/spec-item/rubric-item/tbl-view/tbl-view.tpl.html",'<div data-app-toolbar data-agglo-name="cur_agglo.local_name" data-spec-name="cur_spec.name" data-rubric-name="cur_rubric.name" data-rview-id="rview_id" data-rview-name="rview_name"></div><div class="app-content tbl-view" tabindex="-1" app-scroll-watcher app-vpos="vpos"><div class="full-height"><div ng-if="arr_supplier" class="pdng"><div><div><h1 class="tbl-view__header" ng-bind="page_header"></h1><div class="tbl-view__state"><div ng-if="arr_supplier.length === 0">По данному запросу в каталоге не найдено мастеров. <a ng-href="{{home_href}}">выберите другую услугу</a>. Каталог мастеров пополняется с каждым днём.</div><div ng-if="arr_supplier.length > 0">Найдено: <strong ng-bind="arr_supplier.length"></strong></div></div></div></div><div class="tbl-view__list"><div itemscope itemtype="http://schema.org/BeautySalon" ng-repeat="supPart in arr_supplier" on-finish-render="supplierListRepeatFinished" id="supplier{{supPart.id}}"><div class="tbl-view__item"><div app-tbl-item data-sup-item="supPart" data-city-name="cur_agglo.local_name" data-is-editable="sessData.is_editor"></div><div app-work-gallery app-sup-item="supPart" app-work-scope="supPart.work_scope" app-wrap-elem-id="supPart.id"></div></div><div class="tbl-view__divider" ng-if="$index > 0 && $index%5 === 0 && $index < arr_supplier.length - 5"><div app-outer-links ng-if="$index%2 === 0" data-cur-agglo="cur_agglo" data-cur-spec="cur_spec" data-cur-rubric="cur_rubric"></div><div app-similar-links ng-if="$index%2 !== 0" data-cur-agglo="cur_agglo" data-similar-rubrics="similar_rubrics"></div></div></div></div><div class="tbl-view__bottom"><div app-similar-links data-cur-agglo="cur_agglo" data-similar-rubrics="similar_rubrics"></div><div app-outer-links data-cur-agglo="cur_agglo" data-cur-spec="cur_spec" data-cur-rubric="cur_rubric"></div><div app-blog-links data-rubric-articles="rubric_articles"></div><div class="mrgn text-center" ng-if="cur_spec.id === \'hair\'"><a ui-sref="byt.quizItem.qstnList({quiz_ttl: \'какая-прическа-мне-подойдет\'})"><span class="fa fa-question-circle"></span> Тест: какая прическа мне подойдет</a></div><div class="text-center pdng"><a ng-href="{{home_href}}"><span class="fa fa-list"></span> Вернуться к выбору услуг</a></div></div></div><div ng-if="!arr_supplier && !err_msg"><div class="text-center pdng">загрузка информации...</div></div><div ng-if="err_msg"><div class="err-msg" ng-bind="err_msg"></div></div><div data-app-footer></div></div></div>')}]);